(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=i(a);fetch(a.href,l)}})();function Dy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fc={exports:{}},Bs={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vm;function fS(){if(vm)return Bs;vm=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(s,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:t,type:s,key:c,ref:a!==void 0?a:null,props:l}}return Bs.Fragment=e,Bs.jsx=i,Bs.jsxs=i,Bs}var _m;function hS(){return _m||(_m=1,fc.exports=fS()),fc.exports}var A=hS(),hc={exports:{}},he={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sm;function pS(){if(Sm)return he;Sm=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),S=Symbol.iterator;function w(I){return I===null||typeof I!="object"?null:(I=S&&I[S]||I["@@iterator"],typeof I=="function"?I:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,x={};function U(I,J,W){this.props=I,this.context=J,this.refs=x,this.updater=W||b}U.prototype.isReactComponent={},U.prototype.setState=function(I,J){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,J,"setState")},U.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function H(){}H.prototype=U.prototype;function D(I,J,W){this.props=I,this.context=J,this.refs=x,this.updater=W||b}var Y=D.prototype=new H;Y.constructor=D,R(Y,U.prototype),Y.isPureReactComponent=!0;var X=Array.isArray;function B(){}var z={H:null,A:null,T:null,S:null},ne=Object.prototype.hasOwnProperty;function K(I,J,W){var te=W.ref;return{$$typeof:t,type:I,key:J,ref:te!==void 0?te:null,props:W}}function le(I,J){return K(I.type,J,I.props)}function ye(I){return typeof I=="object"&&I!==null&&I.$$typeof===t}function ke(I){var J={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(W){return J[W]})}var Ce=/\/+/g;function $e(I,J){return typeof I=="object"&&I!==null&&I.key!=null?ke(""+I.key):J.toString(36)}function st(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(B,B):(I.status="pending",I.then(function(J){I.status==="pending"&&(I.status="fulfilled",I.value=J)},function(J){I.status==="pending"&&(I.status="rejected",I.reason=J)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function G(I,J,W,te,P){var Z=typeof I;(Z==="undefined"||Z==="boolean")&&(I=null);var oe=!1;if(I===null)oe=!0;else switch(Z){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(I.$$typeof){case t:case e:oe=!0;break;case v:return oe=I._init,G(oe(I._payload),J,W,te,P)}}if(oe)return P=P(I),oe=te===""?"."+$e(I,0):te,X(P)?(W="",oe!=null&&(W=oe.replace(Ce,"$&/")+"/"),G(P,J,W,"",function(Tt){return Tt})):P!=null&&(ye(P)&&(P=le(P,W+(P.key==null||I&&I.key===P.key?"":(""+P.key).replace(Ce,"$&/")+"/")+oe)),J.push(P)),1;oe=0;var Te=te===""?".":te+":";if(X(I))for(var ge=0;ge<I.length;ge++)te=I[ge],Z=Te+$e(te,ge),oe+=G(te,J,W,Z,P);else if(ge=w(I),typeof ge=="function")for(I=ge.call(I),ge=0;!(te=I.next()).done;)te=te.value,Z=Te+$e(te,ge++),oe+=G(te,J,W,Z,P);else if(Z==="object"){if(typeof I.then=="function")return G(st(I),J,W,te,P);throw J=String(I),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return oe}function Q(I,J,W){if(I==null)return I;var te=[],P=0;return G(I,te,"","",function(Z){return J.call(W,Z,P++)}),te}function re(I){if(I._status===-1){var J=I._result;J=J(),J.then(function(W){(I._status===0||I._status===-1)&&(I._status=1,I._result=W)},function(W){(I._status===0||I._status===-1)&&(I._status=2,I._result=W)}),I._status===-1&&(I._status=0,I._result=J)}if(I._status===1)return I._result.default;throw I._result}var Me=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)},be={map:Q,forEach:function(I,J,W){Q(I,function(){J.apply(this,arguments)},W)},count:function(I){var J=0;return Q(I,function(){J++}),J},toArray:function(I){return Q(I,function(J){return J})||[]},only:function(I){if(!ye(I))throw Error("React.Children.only expected to receive a single React element child.");return I}};return he.Activity=_,he.Children=be,he.Component=U,he.Fragment=i,he.Profiler=a,he.PureComponent=D,he.StrictMode=s,he.Suspense=g,he.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,he.__COMPILER_RUNTIME={__proto__:null,c:function(I){return z.H.useMemoCache(I)}},he.cache=function(I){return function(){return I.apply(null,arguments)}},he.cacheSignal=function(){return null},he.cloneElement=function(I,J,W){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var te=R({},I.props),P=I.key;if(J!=null)for(Z in J.key!==void 0&&(P=""+J.key),J)!ne.call(J,Z)||Z==="key"||Z==="__self"||Z==="__source"||Z==="ref"&&J.ref===void 0||(te[Z]=J[Z]);var Z=arguments.length-2;if(Z===1)te.children=W;else if(1<Z){for(var oe=Array(Z),Te=0;Te<Z;Te++)oe[Te]=arguments[Te+2];te.children=oe}return K(I.type,P,te)},he.createContext=function(I){return I={$$typeof:c,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:l,_context:I},I},he.createElement=function(I,J,W){var te,P={},Z=null;if(J!=null)for(te in J.key!==void 0&&(Z=""+J.key),J)ne.call(J,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(P[te]=J[te]);var oe=arguments.length-2;if(oe===1)P.children=W;else if(1<oe){for(var Te=Array(oe),ge=0;ge<oe;ge++)Te[ge]=arguments[ge+2];P.children=Te}if(I&&I.defaultProps)for(te in oe=I.defaultProps,oe)P[te]===void 0&&(P[te]=oe[te]);return K(I,Z,P)},he.createRef=function(){return{current:null}},he.forwardRef=function(I){return{$$typeof:h,render:I}},he.isValidElement=ye,he.lazy=function(I){return{$$typeof:v,_payload:{_status:-1,_result:I},_init:re}},he.memo=function(I,J){return{$$typeof:m,type:I,compare:J===void 0?null:J}},he.startTransition=function(I){var J=z.T,W={};z.T=W;try{var te=I(),P=z.S;P!==null&&P(W,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(B,Me)}catch(Z){Me(Z)}finally{J!==null&&W.types!==null&&(J.types=W.types),z.T=J}},he.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},he.use=function(I){return z.H.use(I)},he.useActionState=function(I,J,W){return z.H.useActionState(I,J,W)},he.useCallback=function(I,J){return z.H.useCallback(I,J)},he.useContext=function(I){return z.H.useContext(I)},he.useDebugValue=function(){},he.useDeferredValue=function(I,J){return z.H.useDeferredValue(I,J)},he.useEffect=function(I,J){return z.H.useEffect(I,J)},he.useEffectEvent=function(I){return z.H.useEffectEvent(I)},he.useId=function(){return z.H.useId()},he.useImperativeHandle=function(I,J,W){return z.H.useImperativeHandle(I,J,W)},he.useInsertionEffect=function(I,J){return z.H.useInsertionEffect(I,J)},he.useLayoutEffect=function(I,J){return z.H.useLayoutEffect(I,J)},he.useMemo=function(I,J){return z.H.useMemo(I,J)},he.useOptimistic=function(I,J){return z.H.useOptimistic(I,J)},he.useReducer=function(I,J,W){return z.H.useReducer(I,J,W)},he.useRef=function(I){return z.H.useRef(I)},he.useState=function(I){return z.H.useState(I)},he.useSyncExternalStore=function(I,J,W){return z.H.useSyncExternalStore(I,J,W)},he.useTransition=function(){return z.H.useTransition()},he.version="19.2.3",he}var Em;function td(){return Em||(Em=1,hc.exports=pS()),hc.exports}var Ae=td();const mS=Dy(Ae);var pc={exports:{}},zs={},mc={exports:{}},gc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tm;function gS(){return Tm||(Tm=1,(function(t){function e(G,Q){var re=G.length;G.push(Q);e:for(;0<re;){var Me=re-1>>>1,be=G[Me];if(0<a(be,Q))G[Me]=Q,G[re]=be,re=Me;else break e}}function i(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var Q=G[0],re=G.pop();if(re!==Q){G[0]=re;e:for(var Me=0,be=G.length,I=be>>>1;Me<I;){var J=2*(Me+1)-1,W=G[J],te=J+1,P=G[te];if(0>a(W,re))te<be&&0>a(P,W)?(G[Me]=P,G[te]=re,Me=te):(G[Me]=W,G[J]=re,Me=J);else if(te<be&&0>a(P,re))G[Me]=P,G[te]=re,Me=te;else break e}}return Q}function a(G,Q){var re=G.sortIndex-Q.sortIndex;return re!==0?re:G.id-Q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var g=[],m=[],v=1,_=null,S=3,w=!1,b=!1,R=!1,x=!1,U=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function Y(G){for(var Q=i(m);Q!==null;){if(Q.callback===null)s(m);else if(Q.startTime<=G)s(m),Q.sortIndex=Q.expirationTime,e(g,Q);else break;Q=i(m)}}function X(G){if(R=!1,Y(G),!b)if(i(g)!==null)b=!0,B||(B=!0,ke());else{var Q=i(m);Q!==null&&st(X,Q.startTime-G)}}var B=!1,z=-1,ne=5,K=-1;function le(){return x?!0:!(t.unstable_now()-K<ne)}function ye(){if(x=!1,B){var G=t.unstable_now();K=G;var Q=!0;try{e:{b=!1,R&&(R=!1,H(z),z=-1),w=!0;var re=S;try{t:{for(Y(G),_=i(g);_!==null&&!(_.expirationTime>G&&le());){var Me=_.callback;if(typeof Me=="function"){_.callback=null,S=_.priorityLevel;var be=Me(_.expirationTime<=G);if(G=t.unstable_now(),typeof be=="function"){_.callback=be,Y(G),Q=!0;break t}_===i(g)&&s(g),Y(G)}else s(g);_=i(g)}if(_!==null)Q=!0;else{var I=i(m);I!==null&&st(X,I.startTime-G),Q=!1}}break e}finally{_=null,S=re,w=!1}Q=void 0}}finally{Q?ke():B=!1}}}var ke;if(typeof D=="function")ke=function(){D(ye)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,$e=Ce.port2;Ce.port1.onmessage=ye,ke=function(){$e.postMessage(null)}}else ke=function(){U(ye,0)};function st(G,Q){z=U(function(){G(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(G){switch(S){case 1:case 2:case 3:var Q=3;break;default:Q=S}var re=S;S=Q;try{return G()}finally{S=re}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(G,Q){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var re=S;S=G;try{return Q()}finally{S=re}},t.unstable_scheduleCallback=function(G,Q,re){var Me=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?Me+re:Me):re=Me,G){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=re+be,G={id:v++,callback:Q,priorityLevel:G,startTime:re,expirationTime:be,sortIndex:-1},re>Me?(G.sortIndex=re,e(m,G),i(g)===null&&G===i(m)&&(R?(H(z),z=-1):R=!0,st(X,re-Me))):(G.sortIndex=be,e(g,G),b||w||(b=!0,B||(B=!0,ke()))),G},t.unstable_shouldYield=le,t.unstable_wrapCallback=function(G){var Q=S;return function(){var re=S;S=Q;try{return G.apply(this,arguments)}finally{S=re}}}})(gc)),gc}var wm;function yS(){return wm||(wm=1,mc.exports=gS()),mc.exports}var yc={exports:{}},yt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Am;function vS(){if(Am)return yt;Am=1;var t=td();function e(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,m,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:g,containerInfo:m,implementation:v}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return yt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,yt.createPortal=function(g,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(g,m,null,v)},yt.flushSync=function(g){var m=c.T,v=s.p;try{if(c.T=null,s.p=2,g)return g()}finally{c.T=m,s.p=v,s.d.f()}},yt.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(g,m))},yt.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},yt.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var v=m.as,_=h(v,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,w=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:S,fetchPriority:w}):v==="script"&&s.d.X(g,{crossOrigin:_,integrity:S,fetchPriority:w,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},yt.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=h(m.as,m.crossOrigin);s.d.M(g,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(g)},yt.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,_=h(v,m.crossOrigin);s.d.L(g,v,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},yt.preloadModule=function(g,m){if(typeof g=="string")if(m){var v=h(m.as,m.crossOrigin);s.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(g)},yt.requestFormReset=function(g){s.d.r(g)},yt.unstable_batchedUpdates=function(g,m){return g(m)},yt.useFormState=function(g,m,v){return c.H.useFormState(g,m,v)},yt.useFormStatus=function(){return c.H.useHostTransitionStatus()},yt.version="19.2.3",yt}var bm;function _S(){if(bm)return yc.exports;bm=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),yc.exports=vS(),yc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cm;function SS(){if(Cm)return zs;Cm=1;var t=yS(),e=td(),i=_S();function s(n){var o="https://react.dev/errors/"+n;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)o+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+n+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var o=n,r=n;if(n.alternate)for(;o.return;)o=o.return;else{n=o;do o=n,(o.flags&4098)!==0&&(r=o.return),n=o.return;while(n)}return o.tag===3?r:null}function c(n){if(n.tag===13){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function h(n){if(n.tag===31){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function g(n){if(l(n)!==n)throw Error(s(188))}function m(n){var o=n.alternate;if(!o){if(o=l(n),o===null)throw Error(s(188));return o!==n?null:n}for(var r=n,u=o;;){var p=r.return;if(p===null)break;var y=p.alternate;if(y===null){if(u=p.return,u!==null){r=u;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===r)return g(p),n;if(y===u)return g(p),o;y=y.sibling}throw Error(s(188))}if(r.return!==u.return)r=p,u=y;else{for(var E=!1,T=p.child;T;){if(T===r){E=!0,r=p,u=y;break}if(T===u){E=!0,u=p,r=y;break}T=T.sibling}if(!E){for(T=y.child;T;){if(T===r){E=!0,r=y,u=p;break}if(T===u){E=!0,u=y,r=p;break}T=T.sibling}if(!E)throw Error(s(189))}}if(r.alternate!==u)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?n:o}function v(n){var o=n.tag;if(o===5||o===26||o===27||o===6)return n;for(n=n.child;n!==null;){if(o=v(n),o!==null)return o;n=n.sibling}return null}var _=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),D=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),le=Symbol.for("react.memo_cache_sentinel"),ye=Symbol.iterator;function ke(n){return n===null||typeof n!="object"?null:(n=ye&&n[ye]||n["@@iterator"],typeof n=="function"?n:null)}var Ce=Symbol.for("react.client.reference");function $e(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Ce?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case R:return"Fragment";case U:return"Profiler";case x:return"StrictMode";case X:return"Suspense";case B:return"SuspenseList";case K:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case b:return"Portal";case D:return n.displayName||"Context";case H:return(n._context.displayName||"Context")+".Consumer";case Y:var o=n.render;return n=n.displayName,n||(n=o.displayName||o.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case z:return o=n.displayName||null,o!==null?o:$e(n.type)||"Memo";case ne:o=n._payload,n=n._init;try{return $e(n(o))}catch{}}return null}var st=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},Me=[],be=-1;function I(n){return{current:n}}function J(n){0>be||(n.current=Me[be],Me[be]=null,be--)}function W(n,o){be++,Me[be]=n.current,n.current=o}var te=I(null),P=I(null),Z=I(null),oe=I(null);function Te(n,o){switch(W(Z,o),W(P,n),W(te,null),o.nodeType){case 9:case 11:n=(n=o.documentElement)&&(n=n.namespaceURI)?Vp(n):0;break;default:if(n=o.tagName,o=o.namespaceURI)o=Vp(o),n=Bp(o,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}J(te),W(te,n)}function ge(){J(te),J(P),J(Z)}function Tt(n){n.memoizedState!==null&&W(oe,n);var o=te.current,r=Bp(o,n.type);o!==r&&(W(P,n),W(te,r))}function mi(n){P.current===n&&(J(te),J(P)),oe.current===n&&(J(oe),qs._currentValue=re)}var zi,qe;function yn(n){if(zi===void 0)try{throw Error()}catch(r){var o=r.stack.trim().match(/\n( *(at )?)/);zi=o&&o[1]||"",qe=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zi+n+qe}var gt=!1;function Qa(n,o){if(!n||gt)return"";gt=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(q){var L=q}Reflect.construct(n,[],$)}else{try{$.call()}catch(q){L=q}n.call($.prototype)}}else{try{throw Error()}catch(q){L=q}($=n())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(q){if(q&&L&&typeof q.stack=="string")return[q.stack,L.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),E=y[0],T=y[1];if(E&&T){var C=E.split(`
`),O=T.split(`
`);for(p=u=0;u<C.length&&!C[u].includes("DetermineComponentFrameRoot");)u++;for(;p<O.length&&!O[p].includes("DetermineComponentFrameRoot");)p++;if(u===C.length||p===O.length)for(u=C.length-1,p=O.length-1;1<=u&&0<=p&&C[u]!==O[p];)p--;for(;1<=u&&0<=p;u--,p--)if(C[u]!==O[p]){if(u!==1||p!==1)do if(u--,p--,0>p||C[u]!==O[p]){var V=`
`+C[u].replace(" at new "," at ");return n.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",n.displayName)),V}while(1<=u&&0<=p);break}}}finally{gt=!1,Error.prepareStackTrace=r}return(r=n?n.displayName||n.name:"")?yn(r):""}function zv(n,o){switch(n.tag){case 26:case 27:case 5:return yn(n.type);case 16:return yn("Lazy");case 13:return n.child!==o&&o!==null?yn("Suspense Fallback"):yn("Suspense");case 19:return yn("SuspenseList");case 0:case 15:return Qa(n.type,!1);case 11:return Qa(n.type.render,!1);case 1:return Qa(n.type,!0);case 31:return yn("Activity");default:return""}}function yd(n){try{var o="",r=null;do o+=zv(n,r),r=n,n=n.return;while(n);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Wa=Object.prototype.hasOwnProperty,Za=t.unstable_scheduleCallback,ja=t.unstable_cancelCallback,Fv=t.unstable_shouldYield,$v=t.unstable_requestPaint,It=t.unstable_now,Jv=t.unstable_getCurrentPriorityLevel,vd=t.unstable_ImmediatePriority,_d=t.unstable_UserBlockingPriority,ir=t.unstable_NormalPriority,Yv=t.unstable_LowPriority,Sd=t.unstable_IdlePriority,Kv=t.log,Xv=t.unstable_setDisableYieldValue,Qo=null,Mt=null;function Vn(n){if(typeof Kv=="function"&&Xv(n),Mt&&typeof Mt.setStrictMode=="function")try{Mt.setStrictMode(Qo,n)}catch{}}var Dt=Math.clz32?Math.clz32:Zv,Qv=Math.log,Wv=Math.LN2;function Zv(n){return n>>>=0,n===0?32:31-(Qv(n)/Wv|0)|0}var or=256,sr=262144,rr=4194304;function gi(n){var o=n&42;if(o!==0)return o;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function ar(n,o,r){var u=n.pendingLanes;if(u===0)return 0;var p=0,y=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var T=u&134217727;return T!==0?(u=T&~y,u!==0?p=gi(u):(E&=T,E!==0?p=gi(E):r||(r=T&~n,r!==0&&(p=gi(r))))):(T=u&~y,T!==0?p=gi(T):E!==0?p=gi(E):r||(r=u&~n,r!==0&&(p=gi(r)))),p===0?0:o!==0&&o!==p&&(o&y)===0&&(y=p&-p,r=o&-o,y>=r||y===32&&(r&4194048)!==0)?o:p}function Wo(n,o){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&o)===0}function jv(n,o){switch(n){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ed(){var n=rr;return rr<<=1,(rr&62914560)===0&&(rr=4194304),n}function el(n){for(var o=[],r=0;31>r;r++)o.push(n);return o}function Zo(n,o){n.pendingLanes|=o,o!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function e0(n,o,r,u,p,y){var E=n.pendingLanes;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=r,n.entangledLanes&=r,n.errorRecoveryDisabledLanes&=r,n.shellSuspendCounter=0;var T=n.entanglements,C=n.expirationTimes,O=n.hiddenUpdates;for(r=E&~r;0<r;){var V=31-Dt(r),$=1<<V;T[V]=0,C[V]=-1;var L=O[V];if(L!==null)for(O[V]=null,V=0;V<L.length;V++){var q=L[V];q!==null&&(q.lane&=-536870913)}r&=~$}u!==0&&Td(n,u,0),y!==0&&p===0&&n.tag!==0&&(n.suspendedLanes|=y&~(E&~o))}function Td(n,o,r){n.pendingLanes|=o,n.suspendedLanes&=~o;var u=31-Dt(o);n.entangledLanes|=o,n.entanglements[u]=n.entanglements[u]|1073741824|r&261930}function wd(n,o){var r=n.entangledLanes|=o;for(n=n.entanglements;r;){var u=31-Dt(r),p=1<<u;p&o|n[u]&o&&(n[u]|=o),r&=~p}}function Ad(n,o){var r=o&-o;return r=(r&42)!==0?1:tl(r),(r&(n.suspendedLanes|o))!==0?0:r}function tl(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function nl(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function bd(){var n=Q.p;return n!==0?n:(n=window.event,n===void 0?32:dm(n.type))}function Cd(n,o){var r=Q.p;try{return Q.p=n,o()}finally{Q.p=r}}var Bn=Math.random().toString(36).slice(2),ut="__reactFiber$"+Bn,wt="__reactProps$"+Bn,Fi="__reactContainer$"+Bn,il="__reactEvents$"+Bn,t0="__reactListeners$"+Bn,n0="__reactHandles$"+Bn,Rd="__reactResources$"+Bn,jo="__reactMarker$"+Bn;function ol(n){delete n[ut],delete n[wt],delete n[il],delete n[t0],delete n[n0]}function $i(n){var o=n[ut];if(o)return o;for(var r=n.parentNode;r;){if(o=r[Fi]||r[ut]){if(r=o.alternate,o.child!==null||r!==null&&r.child!==null)for(n=Xp(n);n!==null;){if(r=n[ut])return r;n=Xp(n)}return o}n=r,r=n.parentNode}return null}function Ji(n){if(n=n[ut]||n[Fi]){var o=n.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return n}return null}function es(n){var o=n.tag;if(o===5||o===26||o===27||o===6)return n.stateNode;throw Error(s(33))}function Yi(n){var o=n[Rd];return o||(o=n[Rd]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function rt(n){n[jo]=!0}var xd=new Set,Nd={};function yi(n,o){Ki(n,o),Ki(n+"Capture",o)}function Ki(n,o){for(Nd[n]=o,n=0;n<o.length;n++)xd.add(o[n])}var i0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Id={},Md={};function o0(n){return Wa.call(Md,n)?!0:Wa.call(Id,n)?!1:i0.test(n)?Md[n]=!0:(Id[n]=!0,!1)}function lr(n,o,r){if(o0(o))if(r===null)n.removeAttribute(o);else{switch(typeof r){case"undefined":case"function":case"symbol":n.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(o);return}}n.setAttribute(o,""+r)}}function ur(n,o,r){if(r===null)n.removeAttribute(o);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttribute(o,""+r)}}function vn(n,o,r,u){if(u===null)n.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttributeNS(o,r,""+u)}}function zt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Dd(n){var o=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function s0(n,o,r){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,o);if(!n.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,y=u.set;return Object.defineProperty(n,o,{configurable:!0,get:function(){return p.call(this)},set:function(E){r=""+E,y.call(this,E)}}),Object.defineProperty(n,o,{enumerable:u.enumerable}),{getValue:function(){return r},setValue:function(E){r=""+E},stopTracking:function(){n._valueTracker=null,delete n[o]}}}}function sl(n){if(!n._valueTracker){var o=Dd(n)?"checked":"value";n._valueTracker=s0(n,o,""+n[o])}}function Ud(n){if(!n)return!1;var o=n._valueTracker;if(!o)return!0;var r=o.getValue(),u="";return n&&(u=Dd(n)?n.checked?"true":"false":n.value),n=u,n!==r?(o.setValue(n),!0):!1}function cr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var r0=/[\n"\\]/g;function Ft(n){return n.replace(r0,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function rl(n,o,r,u,p,y,E,T){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),o!=null?E==="number"?(o===0&&n.value===""||n.value!=o)&&(n.value=""+zt(o)):n.value!==""+zt(o)&&(n.value=""+zt(o)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),o!=null?al(n,E,zt(o)):r!=null?al(n,E,zt(r)):u!=null&&n.removeAttribute("value"),p==null&&y!=null&&(n.defaultChecked=!!y),p!=null&&(n.checked=p&&typeof p!="function"&&typeof p!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+zt(T):n.removeAttribute("name")}function kd(n,o,r,u,p,y,E,T){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),o!=null||r!=null){if(!(y!=="submit"&&y!=="reset"||o!=null)){sl(n);return}r=r!=null?""+zt(r):"",o=o!=null?""+zt(o):r,T||o===n.value||(n.value=o),n.defaultValue=o}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=T?n.checked:!!u,n.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E),sl(n)}function al(n,o,r){o==="number"&&cr(n.ownerDocument)===n||n.defaultValue===""+r||(n.defaultValue=""+r)}function Xi(n,o,r,u){if(n=n.options,o){o={};for(var p=0;p<r.length;p++)o["$"+r[p]]=!0;for(r=0;r<n.length;r++)p=o.hasOwnProperty("$"+n[r].value),n[r].selected!==p&&(n[r].selected=p),p&&u&&(n[r].defaultSelected=!0)}else{for(r=""+zt(r),o=null,p=0;p<n.length;p++){if(n[p].value===r){n[p].selected=!0,u&&(n[p].defaultSelected=!0);return}o!==null||n[p].disabled||(o=n[p])}o!==null&&(o.selected=!0)}}function Od(n,o,r){if(o!=null&&(o=""+zt(o),o!==n.value&&(n.value=o),r==null)){n.defaultValue!==o&&(n.defaultValue=o);return}n.defaultValue=r!=null?""+zt(r):""}function Ld(n,o,r,u){if(o==null){if(u!=null){if(r!=null)throw Error(s(92));if(st(u)){if(1<u.length)throw Error(s(93));u=u[0]}r=u}r==null&&(r=""),o=r}r=zt(o),n.defaultValue=r,u=n.textContent,u===r&&u!==""&&u!==null&&(n.value=u),sl(n)}function Qi(n,o){if(o){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=o;return}}n.textContent=o}var a0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pd(n,o,r){var u=o.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?n.setProperty(o,""):o==="float"?n.cssFloat="":n[o]="":u?n.setProperty(o,r):typeof r!="number"||r===0||a0.has(o)?o==="float"?n.cssFloat=r:n[o]=(""+r).trim():n[o]=r+"px"}function qd(n,o,r){if(o!=null&&typeof o!="object")throw Error(s(62));if(n=n.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var p in o)u=o[p],o.hasOwnProperty(p)&&r[p]!==u&&Pd(n,p,u)}else for(var y in o)o.hasOwnProperty(y)&&Pd(n,y,o[y])}function ll(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var l0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),u0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function dr(n){return u0.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function _n(){}var ul=null;function cl(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Wi=null,Zi=null;function Gd(n){var o=Ji(n);if(o&&(n=o.stateNode)){var r=n[wt]||null;e:switch(n=o.stateNode,o.type){case"input":if(rl(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),o=r.name,r.type==="radio"&&o!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Ft(""+o)+'"][type="radio"]'),o=0;o<r.length;o++){var u=r[o];if(u!==n&&u.form===n.form){var p=u[wt]||null;if(!p)throw Error(s(90));rl(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(o=0;o<r.length;o++)u=r[o],u.form===n.form&&Ud(u)}break e;case"textarea":Od(n,r.value,r.defaultValue);break e;case"select":o=r.value,o!=null&&Xi(n,!!r.multiple,o,!1)}}}var dl=!1;function Hd(n,o,r){if(dl)return n(o,r);dl=!0;try{var u=n(o);return u}finally{if(dl=!1,(Wi!==null||Zi!==null)&&(Zr(),Wi&&(o=Wi,n=Zi,Zi=Wi=null,Gd(o),n)))for(o=0;o<n.length;o++)Gd(n[o])}}function ts(n,o){var r=n.stateNode;if(r===null)return null;var u=r[wt]||null;if(u===null)return null;r=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(s(231,o,typeof r));return r}var Sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fl=!1;if(Sn)try{var ns={};Object.defineProperty(ns,"passive",{get:function(){fl=!0}}),window.addEventListener("test",ns,ns),window.removeEventListener("test",ns,ns)}catch{fl=!1}var zn=null,hl=null,fr=null;function Vd(){if(fr)return fr;var n,o=hl,r=o.length,u,p="value"in zn?zn.value:zn.textContent,y=p.length;for(n=0;n<r&&o[n]===p[n];n++);var E=r-n;for(u=1;u<=E&&o[r-u]===p[y-u];u++);return fr=p.slice(n,1<u?1-u:void 0)}function hr(n){var o=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&o===13&&(n=13)):n=o,n===10&&(n=13),32<=n||n===13?n:0}function pr(){return!0}function Bd(){return!1}function At(n){function o(r,u,p,y,E){this._reactName=r,this._targetInst=p,this.type=u,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(r=n[T],this[T]=r?r(y):y[T]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?pr:Bd,this.isPropagationStopped=Bd,this}return _(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=pr)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=pr)},persist:function(){},isPersistent:pr}),o}var vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mr=At(vi),is=_({},vi,{view:0,detail:0}),c0=At(is),pl,ml,os,gr=_({},is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yl,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==os&&(os&&n.type==="mousemove"?(pl=n.screenX-os.screenX,ml=n.screenY-os.screenY):ml=pl=0,os=n),pl)},movementY:function(n){return"movementY"in n?n.movementY:ml}}),zd=At(gr),d0=_({},gr,{dataTransfer:0}),f0=At(d0),h0=_({},is,{relatedTarget:0}),gl=At(h0),p0=_({},vi,{animationName:0,elapsedTime:0,pseudoElement:0}),m0=At(p0),g0=_({},vi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),y0=At(g0),v0=_({},vi,{data:0}),Fd=At(v0),_0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},S0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},E0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function T0(n){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(n):(n=E0[n])?!!o[n]:!1}function yl(){return T0}var w0=_({},is,{key:function(n){if(n.key){var o=_0[n.key]||n.key;if(o!=="Unidentified")return o}return n.type==="keypress"?(n=hr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?S0[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yl,charCode:function(n){return n.type==="keypress"?hr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?hr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),A0=At(w0),b0=_({},gr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$d=At(b0),C0=_({},is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yl}),R0=At(C0),x0=_({},vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),N0=At(x0),I0=_({},gr,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),M0=At(I0),D0=_({},vi,{newState:0,oldState:0}),U0=At(D0),k0=[9,13,27,32],vl=Sn&&"CompositionEvent"in window,ss=null;Sn&&"documentMode"in document&&(ss=document.documentMode);var O0=Sn&&"TextEvent"in window&&!ss,Jd=Sn&&(!vl||ss&&8<ss&&11>=ss),Yd=" ",Kd=!1;function Xd(n,o){switch(n){case"keyup":return k0.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qd(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ji=!1;function L0(n,o){switch(n){case"compositionend":return Qd(o);case"keypress":return o.which!==32?null:(Kd=!0,Yd);case"textInput":return n=o.data,n===Yd&&Kd?null:n;default:return null}}function P0(n,o){if(ji)return n==="compositionend"||!vl&&Xd(n,o)?(n=Vd(),fr=hl=zn=null,ji=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Jd&&o.locale!=="ko"?null:o.data;default:return null}}var q0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wd(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o==="input"?!!q0[n.type]:o==="textarea"}function Zd(n,o,r,u){Wi?Zi?Zi.push(u):Zi=[u]:Wi=u,o=sa(o,"onChange"),0<o.length&&(r=new mr("onChange","change",null,r,u),n.push({event:r,listeners:o}))}var rs=null,as=null;function G0(n){Op(n,0)}function yr(n){var o=es(n);if(Ud(o))return n}function jd(n,o){if(n==="change")return o}var ef=!1;if(Sn){var _l;if(Sn){var Sl="oninput"in document;if(!Sl){var tf=document.createElement("div");tf.setAttribute("oninput","return;"),Sl=typeof tf.oninput=="function"}_l=Sl}else _l=!1;ef=_l&&(!document.documentMode||9<document.documentMode)}function nf(){rs&&(rs.detachEvent("onpropertychange",of),as=rs=null)}function of(n){if(n.propertyName==="value"&&yr(as)){var o=[];Zd(o,as,n,cl(n)),Hd(G0,o)}}function H0(n,o,r){n==="focusin"?(nf(),rs=o,as=r,rs.attachEvent("onpropertychange",of)):n==="focusout"&&nf()}function V0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return yr(as)}function B0(n,o){if(n==="click")return yr(o)}function z0(n,o){if(n==="input"||n==="change")return yr(o)}function F0(n,o){return n===o&&(n!==0||1/n===1/o)||n!==n&&o!==o}var Ut=typeof Object.is=="function"?Object.is:F0;function ls(n,o){if(Ut(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var r=Object.keys(n),u=Object.keys(o);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var p=r[u];if(!Wa.call(o,p)||!Ut(n[p],o[p]))return!1}return!0}function sf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function rf(n,o){var r=sf(n);n=0;for(var u;r;){if(r.nodeType===3){if(u=n+r.textContent.length,n<=o&&u>=o)return{node:r,offset:o-n};n=u}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=sf(r)}}function af(n,o){return n&&o?n===o?!0:n&&n.nodeType===3?!1:o&&o.nodeType===3?af(n,o.parentNode):"contains"in n?n.contains(o):n.compareDocumentPosition?!!(n.compareDocumentPosition(o)&16):!1:!1}function lf(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var o=cr(n.document);o instanceof n.HTMLIFrameElement;){try{var r=typeof o.contentWindow.location.href=="string"}catch{r=!1}if(r)n=o.contentWindow;else break;o=cr(n.document)}return o}function El(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o&&(o==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||o==="textarea"||n.contentEditable==="true")}var $0=Sn&&"documentMode"in document&&11>=document.documentMode,eo=null,Tl=null,us=null,wl=!1;function uf(n,o,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;wl||eo==null||eo!==cr(u)||(u=eo,"selectionStart"in u&&El(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),us&&ls(us,u)||(us=u,u=sa(Tl,"onSelect"),0<u.length&&(o=new mr("onSelect","select",null,o,r),n.push({event:o,listeners:u}),o.target=eo)))}function _i(n,o){var r={};return r[n.toLowerCase()]=o.toLowerCase(),r["Webkit"+n]="webkit"+o,r["Moz"+n]="moz"+o,r}var to={animationend:_i("Animation","AnimationEnd"),animationiteration:_i("Animation","AnimationIteration"),animationstart:_i("Animation","AnimationStart"),transitionrun:_i("Transition","TransitionRun"),transitionstart:_i("Transition","TransitionStart"),transitioncancel:_i("Transition","TransitionCancel"),transitionend:_i("Transition","TransitionEnd")},Al={},cf={};Sn&&(cf=document.createElement("div").style,"AnimationEvent"in window||(delete to.animationend.animation,delete to.animationiteration.animation,delete to.animationstart.animation),"TransitionEvent"in window||delete to.transitionend.transition);function Si(n){if(Al[n])return Al[n];if(!to[n])return n;var o=to[n],r;for(r in o)if(o.hasOwnProperty(r)&&r in cf)return Al[n]=o[r];return n}var df=Si("animationend"),ff=Si("animationiteration"),hf=Si("animationstart"),J0=Si("transitionrun"),Y0=Si("transitionstart"),K0=Si("transitioncancel"),pf=Si("transitionend"),mf=new Map,bl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bl.push("scrollEnd");function nn(n,o){mf.set(n,o),yi(o,[n])}var vr=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},$t=[],no=0,Cl=0;function _r(){for(var n=no,o=Cl=no=0;o<n;){var r=$t[o];$t[o++]=null;var u=$t[o];$t[o++]=null;var p=$t[o];$t[o++]=null;var y=$t[o];if($t[o++]=null,u!==null&&p!==null){var E=u.pending;E===null?p.next=p:(p.next=E.next,E.next=p),u.pending=p}y!==0&&gf(r,p,y)}}function Sr(n,o,r,u){$t[no++]=n,$t[no++]=o,$t[no++]=r,$t[no++]=u,Cl|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Rl(n,o,r,u){return Sr(n,o,r,u),Er(n)}function Ei(n,o){return Sr(n,null,null,o),Er(n)}function gf(n,o,r){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r);for(var p=!1,y=n.return;y!==null;)y.childLanes|=r,u=y.alternate,u!==null&&(u.childLanes|=r),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(p=!0)),n=y,y=y.return;return n.tag===3?(y=n.stateNode,p&&o!==null&&(p=31-Dt(r),n=y.hiddenUpdates,u=n[p],u===null?n[p]=[o]:u.push(o),o.lane=r|536870912),y):null}function Er(n){if(50<Ms)throw Ms=0,Lu=null,Error(s(185));for(var o=n.return;o!==null;)n=o,o=n.return;return n.tag===3?n.stateNode:null}var io={};function X0(n,o,r,u){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kt(n,o,r,u){return new X0(n,o,r,u)}function xl(n){return n=n.prototype,!(!n||!n.isReactComponent)}function En(n,o){var r=n.alternate;return r===null?(r=kt(n.tag,o,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=o,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&65011712,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,o=n.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r.refCleanup=n.refCleanup,r}function yf(n,o){n.flags&=65011714;var r=n.alternate;return r===null?(n.childLanes=0,n.lanes=o,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=r.childLanes,n.lanes=r.lanes,n.child=r.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=r.memoizedProps,n.memoizedState=r.memoizedState,n.updateQueue=r.updateQueue,n.type=r.type,o=r.dependencies,n.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),n}function Tr(n,o,r,u,p,y){var E=0;if(u=n,typeof n=="function")xl(n)&&(E=1);else if(typeof n=="string")E=eS(n,r,te.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case K:return n=kt(31,r,o,p),n.elementType=K,n.lanes=y,n;case R:return Ti(r.children,p,y,o);case x:E=8,p|=24;break;case U:return n=kt(12,r,o,p|2),n.elementType=U,n.lanes=y,n;case X:return n=kt(13,r,o,p),n.elementType=X,n.lanes=y,n;case B:return n=kt(19,r,o,p),n.elementType=B,n.lanes=y,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case D:E=10;break e;case H:E=9;break e;case Y:E=11;break e;case z:E=14;break e;case ne:E=16,u=null;break e}E=29,r=Error(s(130,n===null?"null":typeof n,"")),u=null}return o=kt(E,r,o,p),o.elementType=n,o.type=u,o.lanes=y,o}function Ti(n,o,r,u){return n=kt(7,n,u,o),n.lanes=r,n}function Nl(n,o,r){return n=kt(6,n,null,o),n.lanes=r,n}function vf(n){var o=kt(18,null,null,0);return o.stateNode=n,o}function Il(n,o,r){return o=kt(4,n.children!==null?n.children:[],n.key,o),o.lanes=r,o.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},o}var _f=new WeakMap;function Jt(n,o){if(typeof n=="object"&&n!==null){var r=_f.get(n);return r!==void 0?r:(o={value:n,source:o,stack:yd(o)},_f.set(n,o),o)}return{value:n,source:o,stack:yd(o)}}var oo=[],so=0,wr=null,cs=0,Yt=[],Kt=0,Fn=null,hn=1,pn="";function Tn(n,o){oo[so++]=cs,oo[so++]=wr,wr=n,cs=o}function Sf(n,o,r){Yt[Kt++]=hn,Yt[Kt++]=pn,Yt[Kt++]=Fn,Fn=n;var u=hn;n=pn;var p=32-Dt(u)-1;u&=~(1<<p),r+=1;var y=32-Dt(o)+p;if(30<y){var E=p-p%5;y=(u&(1<<E)-1).toString(32),u>>=E,p-=E,hn=1<<32-Dt(o)+p|r<<p|u,pn=y+n}else hn=1<<y|r<<p|u,pn=n}function Ml(n){n.return!==null&&(Tn(n,1),Sf(n,1,0))}function Dl(n){for(;n===wr;)wr=oo[--so],oo[so]=null,cs=oo[--so],oo[so]=null;for(;n===Fn;)Fn=Yt[--Kt],Yt[Kt]=null,pn=Yt[--Kt],Yt[Kt]=null,hn=Yt[--Kt],Yt[Kt]=null}function Ef(n,o){Yt[Kt++]=hn,Yt[Kt++]=pn,Yt[Kt++]=Fn,hn=o.id,pn=o.overflow,Fn=n}var ct=null,Ve=null,we=!1,$n=null,Xt=!1,Ul=Error(s(519));function Jn(n){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ds(Jt(o,n)),Ul}function Tf(n){var o=n.stateNode,r=n.type,u=n.memoizedProps;switch(o[ut]=n,o[wt]=u,r){case"dialog":_e("cancel",o),_e("close",o);break;case"iframe":case"object":case"embed":_e("load",o);break;case"video":case"audio":for(r=0;r<Us.length;r++)_e(Us[r],o);break;case"source":_e("error",o);break;case"img":case"image":case"link":_e("error",o),_e("load",o);break;case"details":_e("toggle",o);break;case"input":_e("invalid",o),kd(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":_e("invalid",o);break;case"textarea":_e("invalid",o),Ld(o,u.value,u.defaultValue,u.children)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||o.textContent===""+r||u.suppressHydrationWarning===!0||Gp(o.textContent,r)?(u.popover!=null&&(_e("beforetoggle",o),_e("toggle",o)),u.onScroll!=null&&_e("scroll",o),u.onScrollEnd!=null&&_e("scrollend",o),u.onClick!=null&&(o.onclick=_n),o=!0):o=!1,o||Jn(n,!0)}function wf(n){for(ct=n.return;ct;)switch(ct.tag){case 5:case 31:case 13:Xt=!1;return;case 27:case 3:Xt=!0;return;default:ct=ct.return}}function ro(n){if(n!==ct)return!1;if(!we)return wf(n),we=!0,!1;var o=n.tag,r;if((r=o!==3&&o!==27)&&((r=o===5)&&(r=n.type,r=!(r!=="form"&&r!=="button")||Wu(n.type,n.memoizedProps)),r=!r),r&&Ve&&Jn(n),wf(n),o===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Ve=Kp(n)}else if(o===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Ve=Kp(n)}else o===27?(o=Ve,ri(n.type)?(n=nc,nc=null,Ve=n):Ve=o):Ve=ct?Wt(n.stateNode.nextSibling):null;return!0}function wi(){Ve=ct=null,we=!1}function kl(){var n=$n;return n!==null&&(xt===null?xt=n:xt.push.apply(xt,n),$n=null),n}function ds(n){$n===null?$n=[n]:$n.push(n)}var Ol=I(null),Ai=null,wn=null;function Yn(n,o,r){W(Ol,o._currentValue),o._currentValue=r}function An(n){n._currentValue=Ol.current,J(Ol)}function Ll(n,o,r){for(;n!==null;){var u=n.alternate;if((n.childLanes&o)!==o?(n.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),n===r)break;n=n.return}}function Pl(n,o,r,u){var p=n.child;for(p!==null&&(p.return=n);p!==null;){var y=p.dependencies;if(y!==null){var E=p.child;y=y.firstContext;e:for(;y!==null;){var T=y;y=p;for(var C=0;C<o.length;C++)if(T.context===o[C]){y.lanes|=r,T=y.alternate,T!==null&&(T.lanes|=r),Ll(y.return,r,n),u||(E=null);break e}y=T.next}}else if(p.tag===18){if(E=p.return,E===null)throw Error(s(341));E.lanes|=r,y=E.alternate,y!==null&&(y.lanes|=r),Ll(E,r,n),E=null}else E=p.child;if(E!==null)E.return=p;else for(E=p;E!==null;){if(E===n){E=null;break}if(p=E.sibling,p!==null){p.return=E.return,E=p;break}E=E.return}p=E}}function ao(n,o,r,u){n=null;for(var p=o,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var E=p.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var T=p.type;Ut(p.pendingProps.value,E.value)||(n!==null?n.push(T):n=[T])}}else if(p===oe.current){if(E=p.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(n!==null?n.push(qs):n=[qs])}p=p.return}n!==null&&Pl(o,n,r,u),o.flags|=262144}function Ar(n){for(n=n.firstContext;n!==null;){if(!Ut(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function bi(n){Ai=n,wn=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function dt(n){return Af(Ai,n)}function br(n,o){return Ai===null&&bi(n),Af(n,o)}function Af(n,o){var r=o._currentValue;if(o={context:o,memoizedValue:r,next:null},wn===null){if(n===null)throw Error(s(308));wn=o,n.dependencies={lanes:0,firstContext:o},n.flags|=524288}else wn=wn.next=o;return r}var Q0=typeof AbortController<"u"?AbortController:function(){var n=[],o=this.signal={aborted:!1,addEventListener:function(r,u){n.push(u)}};this.abort=function(){o.aborted=!0,n.forEach(function(r){return r()})}},W0=t.unstable_scheduleCallback,Z0=t.unstable_NormalPriority,We={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ql(){return{controller:new Q0,data:new Map,refCount:0}}function fs(n){n.refCount--,n.refCount===0&&W0(Z0,function(){n.controller.abort()})}var hs=null,Gl=0,lo=0,uo=null;function j0(n,o){if(hs===null){var r=hs=[];Gl=0,lo=Bu(),uo={status:"pending",value:void 0,then:function(u){r.push(u)}}}return Gl++,o.then(bf,bf),o}function bf(){if(--Gl===0&&hs!==null){uo!==null&&(uo.status="fulfilled");var n=hs;hs=null,lo=0,uo=null;for(var o=0;o<n.length;o++)(0,n[o])()}}function e_(n,o){var r=[],u={status:"pending",value:null,reason:null,then:function(p){r.push(p)}};return n.then(function(){u.status="fulfilled",u.value=o;for(var p=0;p<r.length;p++)(0,r[p])(o)},function(p){for(u.status="rejected",u.reason=p,p=0;p<r.length;p++)(0,r[p])(void 0)}),u}var Cf=G.S;G.S=function(n,o){up=It(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&j0(n,o),Cf!==null&&Cf(n,o)};var Ci=I(null);function Hl(){var n=Ci.current;return n!==null?n:Ge.pooledCache}function Cr(n,o){o===null?W(Ci,Ci.current):W(Ci,o.pool)}function Rf(){var n=Hl();return n===null?null:{parent:We._currentValue,pool:n}}var co=Error(s(460)),Vl=Error(s(474)),Rr=Error(s(542)),xr={then:function(){}};function xf(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Nf(n,o,r){switch(r=n[r],r===void 0?n.push(o):r!==o&&(o.then(_n,_n),o=r),o.status){case"fulfilled":return o.value;case"rejected":throw n=o.reason,Mf(n),n;default:if(typeof o.status=="string")o.then(_n,_n);else{if(n=Ge,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=o,n.status="pending",n.then(function(u){if(o.status==="pending"){var p=o;p.status="fulfilled",p.value=u}},function(u){if(o.status==="pending"){var p=o;p.status="rejected",p.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw n=o.reason,Mf(n),n}throw xi=o,co}}function Ri(n){try{var o=n._init;return o(n._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(xi=r,co):r}}var xi=null;function If(){if(xi===null)throw Error(s(459));var n=xi;return xi=null,n}function Mf(n){if(n===co||n===Rr)throw Error(s(483))}var fo=null,ps=0;function Nr(n){var o=ps;return ps+=1,fo===null&&(fo=[]),Nf(fo,n,o)}function ms(n,o){o=o.props.ref,n.ref=o!==void 0?o:null}function Ir(n,o){throw o.$$typeof===S?Error(s(525)):(n=Object.prototype.toString.call(o),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n)))}function Df(n){function o(M,N){if(n){var k=M.deletions;k===null?(M.deletions=[N],M.flags|=16):k.push(N)}}function r(M,N){if(!n)return null;for(;N!==null;)o(M,N),N=N.sibling;return null}function u(M){for(var N=new Map;M!==null;)M.key!==null?N.set(M.key,M):N.set(M.index,M),M=M.sibling;return N}function p(M,N){return M=En(M,N),M.index=0,M.sibling=null,M}function y(M,N,k){return M.index=k,n?(k=M.alternate,k!==null?(k=k.index,k<N?(M.flags|=67108866,N):k):(M.flags|=67108866,N)):(M.flags|=1048576,N)}function E(M){return n&&M.alternate===null&&(M.flags|=67108866),M}function T(M,N,k,F){return N===null||N.tag!==6?(N=Nl(k,M.mode,F),N.return=M,N):(N=p(N,k),N.return=M,N)}function C(M,N,k,F){var ae=k.type;return ae===R?V(M,N,k.props.children,F,k.key):N!==null&&(N.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===ne&&Ri(ae)===N.type)?(N=p(N,k.props),ms(N,k),N.return=M,N):(N=Tr(k.type,k.key,k.props,null,M.mode,F),ms(N,k),N.return=M,N)}function O(M,N,k,F){return N===null||N.tag!==4||N.stateNode.containerInfo!==k.containerInfo||N.stateNode.implementation!==k.implementation?(N=Il(k,M.mode,F),N.return=M,N):(N=p(N,k.children||[]),N.return=M,N)}function V(M,N,k,F,ae){return N===null||N.tag!==7?(N=Ti(k,M.mode,F,ae),N.return=M,N):(N=p(N,k),N.return=M,N)}function $(M,N,k){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Nl(""+N,M.mode,k),N.return=M,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case w:return k=Tr(N.type,N.key,N.props,null,M.mode,k),ms(k,N),k.return=M,k;case b:return N=Il(N,M.mode,k),N.return=M,N;case ne:return N=Ri(N),$(M,N,k)}if(st(N)||ke(N))return N=Ti(N,M.mode,k,null),N.return=M,N;if(typeof N.then=="function")return $(M,Nr(N),k);if(N.$$typeof===D)return $(M,br(M,N),k);Ir(M,N)}return null}function L(M,N,k,F){var ae=N!==null?N.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return ae!==null?null:T(M,N,""+k,F);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case w:return k.key===ae?C(M,N,k,F):null;case b:return k.key===ae?O(M,N,k,F):null;case ne:return k=Ri(k),L(M,N,k,F)}if(st(k)||ke(k))return ae!==null?null:V(M,N,k,F,null);if(typeof k.then=="function")return L(M,N,Nr(k),F);if(k.$$typeof===D)return L(M,N,br(M,k),F);Ir(M,k)}return null}function q(M,N,k,F,ae){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return M=M.get(k)||null,T(N,M,""+F,ae);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case w:return M=M.get(F.key===null?k:F.key)||null,C(N,M,F,ae);case b:return M=M.get(F.key===null?k:F.key)||null,O(N,M,F,ae);case ne:return F=Ri(F),q(M,N,k,F,ae)}if(st(F)||ke(F))return M=M.get(k)||null,V(N,M,F,ae,null);if(typeof F.then=="function")return q(M,N,k,Nr(F),ae);if(F.$$typeof===D)return q(M,N,k,br(N,F),ae);Ir(N,F)}return null}function ee(M,N,k,F){for(var ae=null,Re=null,ie=N,me=N=0,Ee=null;ie!==null&&me<k.length;me++){ie.index>me?(Ee=ie,ie=null):Ee=ie.sibling;var xe=L(M,ie,k[me],F);if(xe===null){ie===null&&(ie=Ee);break}n&&ie&&xe.alternate===null&&o(M,ie),N=y(xe,N,me),Re===null?ae=xe:Re.sibling=xe,Re=xe,ie=Ee}if(me===k.length)return r(M,ie),we&&Tn(M,me),ae;if(ie===null){for(;me<k.length;me++)ie=$(M,k[me],F),ie!==null&&(N=y(ie,N,me),Re===null?ae=ie:Re.sibling=ie,Re=ie);return we&&Tn(M,me),ae}for(ie=u(ie);me<k.length;me++)Ee=q(ie,M,me,k[me],F),Ee!==null&&(n&&Ee.alternate!==null&&ie.delete(Ee.key===null?me:Ee.key),N=y(Ee,N,me),Re===null?ae=Ee:Re.sibling=Ee,Re=Ee);return n&&ie.forEach(function(di){return o(M,di)}),we&&Tn(M,me),ae}function ue(M,N,k,F){if(k==null)throw Error(s(151));for(var ae=null,Re=null,ie=N,me=N=0,Ee=null,xe=k.next();ie!==null&&!xe.done;me++,xe=k.next()){ie.index>me?(Ee=ie,ie=null):Ee=ie.sibling;var di=L(M,ie,xe.value,F);if(di===null){ie===null&&(ie=Ee);break}n&&ie&&di.alternate===null&&o(M,ie),N=y(di,N,me),Re===null?ae=di:Re.sibling=di,Re=di,ie=Ee}if(xe.done)return r(M,ie),we&&Tn(M,me),ae;if(ie===null){for(;!xe.done;me++,xe=k.next())xe=$(M,xe.value,F),xe!==null&&(N=y(xe,N,me),Re===null?ae=xe:Re.sibling=xe,Re=xe);return we&&Tn(M,me),ae}for(ie=u(ie);!xe.done;me++,xe=k.next())xe=q(ie,M,me,xe.value,F),xe!==null&&(n&&xe.alternate!==null&&ie.delete(xe.key===null?me:xe.key),N=y(xe,N,me),Re===null?ae=xe:Re.sibling=xe,Re=xe);return n&&ie.forEach(function(dS){return o(M,dS)}),we&&Tn(M,me),ae}function Pe(M,N,k,F){if(typeof k=="object"&&k!==null&&k.type===R&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case w:e:{for(var ae=k.key;N!==null;){if(N.key===ae){if(ae=k.type,ae===R){if(N.tag===7){r(M,N.sibling),F=p(N,k.props.children),F.return=M,M=F;break e}}else if(N.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===ne&&Ri(ae)===N.type){r(M,N.sibling),F=p(N,k.props),ms(F,k),F.return=M,M=F;break e}r(M,N);break}else o(M,N);N=N.sibling}k.type===R?(F=Ti(k.props.children,M.mode,F,k.key),F.return=M,M=F):(F=Tr(k.type,k.key,k.props,null,M.mode,F),ms(F,k),F.return=M,M=F)}return E(M);case b:e:{for(ae=k.key;N!==null;){if(N.key===ae)if(N.tag===4&&N.stateNode.containerInfo===k.containerInfo&&N.stateNode.implementation===k.implementation){r(M,N.sibling),F=p(N,k.children||[]),F.return=M,M=F;break e}else{r(M,N);break}else o(M,N);N=N.sibling}F=Il(k,M.mode,F),F.return=M,M=F}return E(M);case ne:return k=Ri(k),Pe(M,N,k,F)}if(st(k))return ee(M,N,k,F);if(ke(k)){if(ae=ke(k),typeof ae!="function")throw Error(s(150));return k=ae.call(k),ue(M,N,k,F)}if(typeof k.then=="function")return Pe(M,N,Nr(k),F);if(k.$$typeof===D)return Pe(M,N,br(M,k),F);Ir(M,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,N!==null&&N.tag===6?(r(M,N.sibling),F=p(N,k),F.return=M,M=F):(r(M,N),F=Nl(k,M.mode,F),F.return=M,M=F),E(M)):r(M,N)}return function(M,N,k,F){try{ps=0;var ae=Pe(M,N,k,F);return fo=null,ae}catch(ie){if(ie===co||ie===Rr)throw ie;var Re=kt(29,ie,null,M.mode);return Re.lanes=F,Re.return=M,Re}finally{}}}var Ni=Df(!0),Uf=Df(!1),Kn=!1;function Bl(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zl(n,o){n=n.updateQueue,o.updateQueue===n&&(o.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Xn(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Qn(n,o,r){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Ie&2)!==0){var p=u.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),u.pending=o,o=Er(n),gf(n,null,r),o}return Sr(n,u,o,r),Er(n)}function gs(n,o,r){if(o=o.updateQueue,o!==null&&(o=o.shared,(r&4194048)!==0)){var u=o.lanes;u&=n.pendingLanes,r|=u,o.lanes=r,wd(n,r)}}function Fl(n,o){var r=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var p=null,y=null;if(r=r.firstBaseUpdate,r!==null){do{var E={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};y===null?p=y=E:y=y.next=E,r=r.next}while(r!==null);y===null?p=y=o:y=y.next=o}else p=y=o;r={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=o:n.next=o,r.lastBaseUpdate=o}var $l=!1;function ys(){if($l){var n=uo;if(n!==null)throw n}}function vs(n,o,r,u){$l=!1;var p=n.updateQueue;Kn=!1;var y=p.firstBaseUpdate,E=p.lastBaseUpdate,T=p.shared.pending;if(T!==null){p.shared.pending=null;var C=T,O=C.next;C.next=null,E===null?y=O:E.next=O,E=C;var V=n.alternate;V!==null&&(V=V.updateQueue,T=V.lastBaseUpdate,T!==E&&(T===null?V.firstBaseUpdate=O:T.next=O,V.lastBaseUpdate=C))}if(y!==null){var $=p.baseState;E=0,V=O=C=null,T=y;do{var L=T.lane&-536870913,q=L!==T.lane;if(q?(Se&L)===L:(u&L)===L){L!==0&&L===lo&&($l=!0),V!==null&&(V=V.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var ee=n,ue=T;L=o;var Pe=r;switch(ue.tag){case 1:if(ee=ue.payload,typeof ee=="function"){$=ee.call(Pe,$,L);break e}$=ee;break e;case 3:ee.flags=ee.flags&-65537|128;case 0:if(ee=ue.payload,L=typeof ee=="function"?ee.call(Pe,$,L):ee,L==null)break e;$=_({},$,L);break e;case 2:Kn=!0}}L=T.callback,L!==null&&(n.flags|=64,q&&(n.flags|=8192),q=p.callbacks,q===null?p.callbacks=[L]:q.push(L))}else q={lane:L,tag:T.tag,payload:T.payload,callback:T.callback,next:null},V===null?(O=V=q,C=$):V=V.next=q,E|=L;if(T=T.next,T===null){if(T=p.shared.pending,T===null)break;q=T,T=q.next,q.next=null,p.lastBaseUpdate=q,p.shared.pending=null}}while(!0);V===null&&(C=$),p.baseState=C,p.firstBaseUpdate=O,p.lastBaseUpdate=V,y===null&&(p.shared.lanes=0),ti|=E,n.lanes=E,n.memoizedState=$}}function kf(n,o){if(typeof n!="function")throw Error(s(191,n));n.call(o)}function Of(n,o){var r=n.callbacks;if(r!==null)for(n.callbacks=null,n=0;n<r.length;n++)kf(r[n],o)}var ho=I(null),Mr=I(0);function Lf(n,o){n=Un,W(Mr,n),W(ho,o),Un=n|o.baseLanes}function Jl(){W(Mr,Un),W(ho,ho.current)}function Yl(){Un=Mr.current,J(ho),J(Mr)}var Ot=I(null),Qt=null;function Wn(n){var o=n.alternate;W(Xe,Xe.current&1),W(Ot,n),Qt===null&&(o===null||ho.current!==null||o.memoizedState!==null)&&(Qt=n)}function Kl(n){W(Xe,Xe.current),W(Ot,n),Qt===null&&(Qt=n)}function Pf(n){n.tag===22?(W(Xe,Xe.current),W(Ot,n),Qt===null&&(Qt=n)):Zn()}function Zn(){W(Xe,Xe.current),W(Ot,Ot.current)}function Lt(n){J(Ot),Qt===n&&(Qt=null),J(Xe)}var Xe=I(0);function Dr(n){for(var o=n;o!==null;){if(o.tag===13){var r=o.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||ec(r)||tc(r)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var bn=0,pe=null,Oe=null,Ze=null,Ur=!1,po=!1,Ii=!1,kr=0,_s=0,mo=null,t_=0;function Je(){throw Error(s(321))}function Xl(n,o){if(o===null)return!1;for(var r=0;r<o.length&&r<n.length;r++)if(!Ut(n[r],o[r]))return!1;return!0}function Ql(n,o,r,u,p,y){return bn=y,pe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,G.H=n===null||n.memoizedState===null?Sh:du,Ii=!1,y=r(u,p),Ii=!1,po&&(y=Gf(o,r,u,p)),qf(n),y}function qf(n){G.H=Ts;var o=Oe!==null&&Oe.next!==null;if(bn=0,Ze=Oe=pe=null,Ur=!1,_s=0,mo=null,o)throw Error(s(300));n===null||je||(n=n.dependencies,n!==null&&Ar(n)&&(je=!0))}function Gf(n,o,r,u){pe=n;var p=0;do{if(po&&(mo=null),_s=0,po=!1,25<=p)throw Error(s(301));if(p+=1,Ze=Oe=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}G.H=Eh,y=o(r,u)}while(po);return y}function n_(){var n=G.H,o=n.useState()[0];return o=typeof o.then=="function"?Ss(o):o,n=n.useState()[0],(Oe!==null?Oe.memoizedState:null)!==n&&(pe.flags|=1024),o}function Wl(){var n=kr!==0;return kr=0,n}function Zl(n,o,r){o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~r}function jl(n){if(Ur){for(n=n.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}Ur=!1}bn=0,Ze=Oe=pe=null,po=!1,_s=kr=0,mo=null}function _t(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?pe.memoizedState=Ze=n:Ze=Ze.next=n,Ze}function Qe(){if(Oe===null){var n=pe.alternate;n=n!==null?n.memoizedState:null}else n=Oe.next;var o=Ze===null?pe.memoizedState:Ze.next;if(o!==null)Ze=o,Oe=n;else{if(n===null)throw pe.alternate===null?Error(s(467)):Error(s(310));Oe=n,n={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},Ze===null?pe.memoizedState=Ze=n:Ze=Ze.next=n}return Ze}function Or(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ss(n){var o=_s;return _s+=1,mo===null&&(mo=[]),n=Nf(mo,n,o),o=pe,(Ze===null?o.memoizedState:Ze.next)===null&&(o=o.alternate,G.H=o===null||o.memoizedState===null?Sh:du),n}function Lr(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Ss(n);if(n.$$typeof===D)return dt(n)}throw Error(s(438,String(n)))}function eu(n){var o=null,r=pe.updateQueue;if(r!==null&&(o=r.memoCache),o==null){var u=pe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(p){return p.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),r===null&&(r=Or(),pe.updateQueue=r),r.memoCache=o,r=o.data[o.index],r===void 0)for(r=o.data[o.index]=Array(n),u=0;u<n;u++)r[u]=le;return o.index++,r}function Cn(n,o){return typeof o=="function"?o(n):o}function Pr(n){var o=Qe();return tu(o,Oe,n)}function tu(n,o,r){var u=n.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=r;var p=n.baseQueue,y=u.pending;if(y!==null){if(p!==null){var E=p.next;p.next=y.next,y.next=E}o.baseQueue=p=y,u.pending=null}if(y=n.baseState,p===null)n.memoizedState=y;else{o=p.next;var T=E=null,C=null,O=o,V=!1;do{var $=O.lane&-536870913;if($!==O.lane?(Se&$)===$:(bn&$)===$){var L=O.revertLane;if(L===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),$===lo&&(V=!0);else if((bn&L)===L){O=O.next,L===lo&&(V=!0);continue}else $={lane:0,revertLane:O.revertLane,gesture:null,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},C===null?(T=C=$,E=y):C=C.next=$,pe.lanes|=L,ti|=L;$=O.action,Ii&&r(y,$),y=O.hasEagerState?O.eagerState:r(y,$)}else L={lane:$,revertLane:O.revertLane,gesture:O.gesture,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},C===null?(T=C=L,E=y):C=C.next=L,pe.lanes|=$,ti|=$;O=O.next}while(O!==null&&O!==o);if(C===null?E=y:C.next=T,!Ut(y,n.memoizedState)&&(je=!0,V&&(r=uo,r!==null)))throw r;n.memoizedState=y,n.baseState=E,n.baseQueue=C,u.lastRenderedState=y}return p===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function nu(n){var o=Qe(),r=o.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=n;var u=r.dispatch,p=r.pending,y=o.memoizedState;if(p!==null){r.pending=null;var E=p=p.next;do y=n(y,E.action),E=E.next;while(E!==p);Ut(y,o.memoizedState)||(je=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),r.lastRenderedState=y}return[y,u]}function Hf(n,o,r){var u=pe,p=Qe(),y=we;if(y){if(r===void 0)throw Error(s(407));r=r()}else r=o();var E=!Ut((Oe||p).memoizedState,r);if(E&&(p.memoizedState=r,je=!0),p=p.queue,su(zf.bind(null,u,p,n),[n]),p.getSnapshot!==o||E||Ze!==null&&Ze.memoizedState.tag&1){if(u.flags|=2048,go(9,{destroy:void 0},Bf.bind(null,u,p,r,o),null),Ge===null)throw Error(s(349));y||(bn&127)!==0||Vf(u,o,r)}return r}function Vf(n,o,r){n.flags|=16384,n={getSnapshot:o,value:r},o=pe.updateQueue,o===null?(o=Or(),pe.updateQueue=o,o.stores=[n]):(r=o.stores,r===null?o.stores=[n]:r.push(n))}function Bf(n,o,r,u){o.value=r,o.getSnapshot=u,Ff(o)&&$f(n)}function zf(n,o,r){return r(function(){Ff(o)&&$f(n)})}function Ff(n){var o=n.getSnapshot;n=n.value;try{var r=o();return!Ut(n,r)}catch{return!0}}function $f(n){var o=Ei(n,2);o!==null&&Nt(o,n,2)}function iu(n){var o=_t();if(typeof n=="function"){var r=n;if(n=r(),Ii){Vn(!0);try{r()}finally{Vn(!1)}}}return o.memoizedState=o.baseState=n,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cn,lastRenderedState:n},o}function Jf(n,o,r,u){return n.baseState=r,tu(n,Oe,typeof u=="function"?u:Cn)}function i_(n,o,r,u,p){if(Hr(n))throw Error(s(485));if(n=o.action,n!==null){var y={payload:p,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){y.listeners.push(E)}};G.T!==null?r(!0):y.isTransition=!1,u(y),r=o.pending,r===null?(y.next=o.pending=y,Yf(o,y)):(y.next=r.next,o.pending=r.next=y)}}function Yf(n,o){var r=o.action,u=o.payload,p=n.state;if(o.isTransition){var y=G.T,E={};G.T=E;try{var T=r(p,u),C=G.S;C!==null&&C(E,T),Kf(n,o,T)}catch(O){ou(n,o,O)}finally{y!==null&&E.types!==null&&(y.types=E.types),G.T=y}}else try{y=r(p,u),Kf(n,o,y)}catch(O){ou(n,o,O)}}function Kf(n,o,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){Xf(n,o,u)},function(u){return ou(n,o,u)}):Xf(n,o,r)}function Xf(n,o,r){o.status="fulfilled",o.value=r,Qf(o),n.state=r,o=n.pending,o!==null&&(r=o.next,r===o?n.pending=null:(r=r.next,o.next=r,Yf(n,r)))}function ou(n,o,r){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=r,Qf(o),o=o.next;while(o!==u)}n.action=null}function Qf(n){n=n.listeners;for(var o=0;o<n.length;o++)(0,n[o])()}function Wf(n,o){return o}function Zf(n,o){if(we){var r=Ge.formState;if(r!==null){e:{var u=pe;if(we){if(Ve){t:{for(var p=Ve,y=Xt;p.nodeType!==8;){if(!y){p=null;break t}if(p=Wt(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){Ve=Wt(p.nextSibling),u=p.data==="F!";break e}}Jn(u)}u=!1}u&&(o=r[0])}}return r=_t(),r.memoizedState=r.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wf,lastRenderedState:o},r.queue=u,r=yh.bind(null,pe,u),u.dispatch=r,u=iu(!1),y=cu.bind(null,pe,!1,u.queue),u=_t(),p={state:o,dispatch:null,action:n,pending:null},u.queue=p,r=i_.bind(null,pe,p,y,r),p.dispatch=r,u.memoizedState=n,[o,r,!1]}function jf(n){var o=Qe();return eh(o,Oe,n)}function eh(n,o,r){if(o=tu(n,o,Wf)[0],n=Pr(Cn)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=Ss(o)}catch(E){throw E===co?Rr:E}else u=o;o=Qe();var p=o.queue,y=p.dispatch;return r!==o.memoizedState&&(pe.flags|=2048,go(9,{destroy:void 0},o_.bind(null,p,r),null)),[u,y,n]}function o_(n,o){n.action=o}function th(n){var o=Qe(),r=Oe;if(r!==null)return eh(o,r,n);Qe(),o=o.memoizedState,r=Qe();var u=r.queue.dispatch;return r.memoizedState=n,[o,u,!1]}function go(n,o,r,u){return n={tag:n,create:r,deps:u,inst:o,next:null},o=pe.updateQueue,o===null&&(o=Or(),pe.updateQueue=o),r=o.lastEffect,r===null?o.lastEffect=n.next=n:(u=r.next,r.next=n,n.next=u,o.lastEffect=n),n}function nh(){return Qe().memoizedState}function qr(n,o,r,u){var p=_t();pe.flags|=n,p.memoizedState=go(1|o,{destroy:void 0},r,u===void 0?null:u)}function Gr(n,o,r,u){var p=Qe();u=u===void 0?null:u;var y=p.memoizedState.inst;Oe!==null&&u!==null&&Xl(u,Oe.memoizedState.deps)?p.memoizedState=go(o,y,r,u):(pe.flags|=n,p.memoizedState=go(1|o,y,r,u))}function ih(n,o){qr(8390656,8,n,o)}function su(n,o){Gr(2048,8,n,o)}function s_(n){pe.flags|=4;var o=pe.updateQueue;if(o===null)o=Or(),pe.updateQueue=o,o.events=[n];else{var r=o.events;r===null?o.events=[n]:r.push(n)}}function oh(n){var o=Qe().memoizedState;return s_({ref:o,nextImpl:n}),function(){if((Ie&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function sh(n,o){return Gr(4,2,n,o)}function rh(n,o){return Gr(4,4,n,o)}function ah(n,o){if(typeof o=="function"){n=n();var r=o(n);return function(){typeof r=="function"?r():o(null)}}if(o!=null)return n=n(),o.current=n,function(){o.current=null}}function lh(n,o,r){r=r!=null?r.concat([n]):null,Gr(4,4,ah.bind(null,o,n),r)}function ru(){}function uh(n,o){var r=Qe();o=o===void 0?null:o;var u=r.memoizedState;return o!==null&&Xl(o,u[1])?u[0]:(r.memoizedState=[n,o],n)}function ch(n,o){var r=Qe();o=o===void 0?null:o;var u=r.memoizedState;if(o!==null&&Xl(o,u[1]))return u[0];if(u=n(),Ii){Vn(!0);try{n()}finally{Vn(!1)}}return r.memoizedState=[u,o],u}function au(n,o,r){return r===void 0||(bn&1073741824)!==0&&(Se&261930)===0?n.memoizedState=o:(n.memoizedState=r,n=dp(),pe.lanes|=n,ti|=n,r)}function dh(n,o,r,u){return Ut(r,o)?r:ho.current!==null?(n=au(n,r,u),Ut(n,o)||(je=!0),n):(bn&42)===0||(bn&1073741824)!==0&&(Se&261930)===0?(je=!0,n.memoizedState=r):(n=dp(),pe.lanes|=n,ti|=n,o)}function fh(n,o,r,u,p){var y=Q.p;Q.p=y!==0&&8>y?y:8;var E=G.T,T={};G.T=T,cu(n,!1,o,r);try{var C=p(),O=G.S;if(O!==null&&O(T,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var V=e_(C,u);Es(n,o,V,Gt(n))}else Es(n,o,u,Gt(n))}catch($){Es(n,o,{then:function(){},status:"rejected",reason:$},Gt())}finally{Q.p=y,E!==null&&T.types!==null&&(E.types=T.types),G.T=E}}function r_(){}function lu(n,o,r,u){if(n.tag!==5)throw Error(s(476));var p=hh(n).queue;fh(n,p,o,re,r===null?r_:function(){return ph(n),r(u)})}function hh(n){var o=n.memoizedState;if(o!==null)return o;o={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cn,lastRenderedState:re},next:null};var r={};return o.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cn,lastRenderedState:r},next:null},n.memoizedState=o,n=n.alternate,n!==null&&(n.memoizedState=o),o}function ph(n){var o=hh(n);o.next===null&&(o=n.alternate.memoizedState),Es(n,o.next.queue,{},Gt())}function uu(){return dt(qs)}function mh(){return Qe().memoizedState}function gh(){return Qe().memoizedState}function a_(n){for(var o=n.return;o!==null;){switch(o.tag){case 24:case 3:var r=Gt();n=Xn(r);var u=Qn(o,n,r);u!==null&&(Nt(u,o,r),gs(u,o,r)),o={cache:ql()},n.payload=o;return}o=o.return}}function l_(n,o,r){var u=Gt();r={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Hr(n)?vh(o,r):(r=Rl(n,o,r,u),r!==null&&(Nt(r,n,u),_h(r,o,u)))}function yh(n,o,r){var u=Gt();Es(n,o,r,u)}function Es(n,o,r,u){var p={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Hr(n))vh(o,p);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var E=o.lastRenderedState,T=y(E,r);if(p.hasEagerState=!0,p.eagerState=T,Ut(T,E))return Sr(n,o,p,0),Ge===null&&_r(),!1}catch{}finally{}if(r=Rl(n,o,p,u),r!==null)return Nt(r,n,u),_h(r,o,u),!0}return!1}function cu(n,o,r,u){if(u={lane:2,revertLane:Bu(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Hr(n)){if(o)throw Error(s(479))}else o=Rl(n,r,u,2),o!==null&&Nt(o,n,2)}function Hr(n){var o=n.alternate;return n===pe||o!==null&&o===pe}function vh(n,o){po=Ur=!0;var r=n.pending;r===null?o.next=o:(o.next=r.next,r.next=o),n.pending=o}function _h(n,o,r){if((r&4194048)!==0){var u=o.lanes;u&=n.pendingLanes,r|=u,o.lanes=r,wd(n,r)}}var Ts={readContext:dt,use:Lr,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useLayoutEffect:Je,useInsertionEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useSyncExternalStore:Je,useId:Je,useHostTransitionStatus:Je,useFormState:Je,useActionState:Je,useOptimistic:Je,useMemoCache:Je,useCacheRefresh:Je};Ts.useEffectEvent=Je;var Sh={readContext:dt,use:Lr,useCallback:function(n,o){return _t().memoizedState=[n,o===void 0?null:o],n},useContext:dt,useEffect:ih,useImperativeHandle:function(n,o,r){r=r!=null?r.concat([n]):null,qr(4194308,4,ah.bind(null,o,n),r)},useLayoutEffect:function(n,o){return qr(4194308,4,n,o)},useInsertionEffect:function(n,o){qr(4,2,n,o)},useMemo:function(n,o){var r=_t();o=o===void 0?null:o;var u=n();if(Ii){Vn(!0);try{n()}finally{Vn(!1)}}return r.memoizedState=[u,o],u},useReducer:function(n,o,r){var u=_t();if(r!==void 0){var p=r(o);if(Ii){Vn(!0);try{r(o)}finally{Vn(!1)}}}else p=o;return u.memoizedState=u.baseState=p,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:p},u.queue=n,n=n.dispatch=l_.bind(null,pe,n),[u.memoizedState,n]},useRef:function(n){var o=_t();return n={current:n},o.memoizedState=n},useState:function(n){n=iu(n);var o=n.queue,r=yh.bind(null,pe,o);return o.dispatch=r,[n.memoizedState,r]},useDebugValue:ru,useDeferredValue:function(n,o){var r=_t();return au(r,n,o)},useTransition:function(){var n=iu(!1);return n=fh.bind(null,pe,n.queue,!0,!1),_t().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,o,r){var u=pe,p=_t();if(we){if(r===void 0)throw Error(s(407));r=r()}else{if(r=o(),Ge===null)throw Error(s(349));(Se&127)!==0||Vf(u,o,r)}p.memoizedState=r;var y={value:r,getSnapshot:o};return p.queue=y,ih(zf.bind(null,u,y,n),[n]),u.flags|=2048,go(9,{destroy:void 0},Bf.bind(null,u,y,r,o),null),r},useId:function(){var n=_t(),o=Ge.identifierPrefix;if(we){var r=pn,u=hn;r=(u&~(1<<32-Dt(u)-1)).toString(32)+r,o="_"+o+"R_"+r,r=kr++,0<r&&(o+="H"+r.toString(32)),o+="_"}else r=t_++,o="_"+o+"r_"+r.toString(32)+"_";return n.memoizedState=o},useHostTransitionStatus:uu,useFormState:Zf,useActionState:Zf,useOptimistic:function(n){var o=_t();o.memoizedState=o.baseState=n;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=r,o=cu.bind(null,pe,!0,r),r.dispatch=o,[n,o]},useMemoCache:eu,useCacheRefresh:function(){return _t().memoizedState=a_.bind(null,pe)},useEffectEvent:function(n){var o=_t(),r={impl:n};return o.memoizedState=r,function(){if((Ie&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}},du={readContext:dt,use:Lr,useCallback:uh,useContext:dt,useEffect:su,useImperativeHandle:lh,useInsertionEffect:sh,useLayoutEffect:rh,useMemo:ch,useReducer:Pr,useRef:nh,useState:function(){return Pr(Cn)},useDebugValue:ru,useDeferredValue:function(n,o){var r=Qe();return dh(r,Oe.memoizedState,n,o)},useTransition:function(){var n=Pr(Cn)[0],o=Qe().memoizedState;return[typeof n=="boolean"?n:Ss(n),o]},useSyncExternalStore:Hf,useId:mh,useHostTransitionStatus:uu,useFormState:jf,useActionState:jf,useOptimistic:function(n,o){var r=Qe();return Jf(r,Oe,n,o)},useMemoCache:eu,useCacheRefresh:gh};du.useEffectEvent=oh;var Eh={readContext:dt,use:Lr,useCallback:uh,useContext:dt,useEffect:su,useImperativeHandle:lh,useInsertionEffect:sh,useLayoutEffect:rh,useMemo:ch,useReducer:nu,useRef:nh,useState:function(){return nu(Cn)},useDebugValue:ru,useDeferredValue:function(n,o){var r=Qe();return Oe===null?au(r,n,o):dh(r,Oe.memoizedState,n,o)},useTransition:function(){var n=nu(Cn)[0],o=Qe().memoizedState;return[typeof n=="boolean"?n:Ss(n),o]},useSyncExternalStore:Hf,useId:mh,useHostTransitionStatus:uu,useFormState:th,useActionState:th,useOptimistic:function(n,o){var r=Qe();return Oe!==null?Jf(r,Oe,n,o):(r.baseState=n,[n,r.queue.dispatch])},useMemoCache:eu,useCacheRefresh:gh};Eh.useEffectEvent=oh;function fu(n,o,r,u){o=n.memoizedState,r=r(u,o),r=r==null?o:_({},o,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var hu={enqueueSetState:function(n,o,r){n=n._reactInternals;var u=Gt(),p=Xn(u);p.payload=o,r!=null&&(p.callback=r),o=Qn(n,p,u),o!==null&&(Nt(o,n,u),gs(o,n,u))},enqueueReplaceState:function(n,o,r){n=n._reactInternals;var u=Gt(),p=Xn(u);p.tag=1,p.payload=o,r!=null&&(p.callback=r),o=Qn(n,p,u),o!==null&&(Nt(o,n,u),gs(o,n,u))},enqueueForceUpdate:function(n,o){n=n._reactInternals;var r=Gt(),u=Xn(r);u.tag=2,o!=null&&(u.callback=o),o=Qn(n,u,r),o!==null&&(Nt(o,n,r),gs(o,n,r))}};function Th(n,o,r,u,p,y,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,y,E):o.prototype&&o.prototype.isPureReactComponent?!ls(r,u)||!ls(p,y):!0}function wh(n,o,r,u){n=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(r,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(r,u),o.state!==n&&hu.enqueueReplaceState(o,o.state,null)}function Mi(n,o){var r=o;if("ref"in o){r={};for(var u in o)u!=="ref"&&(r[u]=o[u])}if(n=n.defaultProps){r===o&&(r=_({},r));for(var p in n)r[p]===void 0&&(r[p]=n[p])}return r}function Ah(n){vr(n)}function bh(n){console.error(n)}function Ch(n){vr(n)}function Vr(n,o){try{var r=n.onUncaughtError;r(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function Rh(n,o,r){try{var u=n.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function pu(n,o,r){return r=Xn(r),r.tag=3,r.payload={element:null},r.callback=function(){Vr(n,o)},r}function xh(n){return n=Xn(n),n.tag=3,n}function Nh(n,o,r,u){var p=r.type.getDerivedStateFromError;if(typeof p=="function"){var y=u.value;n.payload=function(){return p(y)},n.callback=function(){Rh(o,r,u)}}var E=r.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){Rh(o,r,u),typeof p!="function"&&(ni===null?ni=new Set([this]):ni.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function u_(n,o,r,u,p){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=r.alternate,o!==null&&ao(o,r,p,!0),r=Ot.current,r!==null){switch(r.tag){case 31:case 13:return Qt===null?jr():r.alternate===null&&Ye===0&&(Ye=3),r.flags&=-257,r.flags|=65536,r.lanes=p,u===xr?r.flags|=16384:(o=r.updateQueue,o===null?r.updateQueue=new Set([u]):o.add(u),Gu(n,u,p)),!1;case 22:return r.flags|=65536,u===xr?r.flags|=16384:(o=r.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=o):(r=o.retryQueue,r===null?o.retryQueue=new Set([u]):r.add(u)),Gu(n,u,p)),!1}throw Error(s(435,r.tag))}return Gu(n,u,p),jr(),!1}if(we)return o=Ot.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=p,u!==Ul&&(n=Error(s(422),{cause:u}),ds(Jt(n,r)))):(u!==Ul&&(o=Error(s(423),{cause:u}),ds(Jt(o,r))),n=n.current.alternate,n.flags|=65536,p&=-p,n.lanes|=p,u=Jt(u,r),p=pu(n.stateNode,u,p),Fl(n,p),Ye!==4&&(Ye=2)),!1;var y=Error(s(520),{cause:u});if(y=Jt(y,r),Is===null?Is=[y]:Is.push(y),Ye!==4&&(Ye=2),o===null)return!0;u=Jt(u,r),r=o;do{switch(r.tag){case 3:return r.flags|=65536,n=p&-p,r.lanes|=n,n=pu(r.stateNode,u,n),Fl(r,n),!1;case 1:if(o=r.type,y=r.stateNode,(r.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ni===null||!ni.has(y))))return r.flags|=65536,p&=-p,r.lanes|=p,p=xh(p),Nh(p,n,r,u),Fl(r,p),!1}r=r.return}while(r!==null);return!1}var mu=Error(s(461)),je=!1;function ft(n,o,r,u){o.child=n===null?Uf(o,null,r,u):Ni(o,n.child,r,u)}function Ih(n,o,r,u,p){r=r.render;var y=o.ref;if("ref"in u){var E={};for(var T in u)T!=="ref"&&(E[T]=u[T])}else E=u;return bi(o),u=Ql(n,o,r,E,y,p),T=Wl(),n!==null&&!je?(Zl(n,o,p),Rn(n,o,p)):(we&&T&&Ml(o),o.flags|=1,ft(n,o,u,p),o.child)}function Mh(n,o,r,u,p){if(n===null){var y=r.type;return typeof y=="function"&&!xl(y)&&y.defaultProps===void 0&&r.compare===null?(o.tag=15,o.type=y,Dh(n,o,y,u,p)):(n=Tr(r.type,null,u,o,o.mode,p),n.ref=o.ref,n.return=o,o.child=n)}if(y=n.child,!wu(n,p)){var E=y.memoizedProps;if(r=r.compare,r=r!==null?r:ls,r(E,u)&&n.ref===o.ref)return Rn(n,o,p)}return o.flags|=1,n=En(y,u),n.ref=o.ref,n.return=o,o.child=n}function Dh(n,o,r,u,p){if(n!==null){var y=n.memoizedProps;if(ls(y,u)&&n.ref===o.ref)if(je=!1,o.pendingProps=u=y,wu(n,p))(n.flags&131072)!==0&&(je=!0);else return o.lanes=n.lanes,Rn(n,o,p)}return gu(n,o,r,u,p)}function Uh(n,o,r,u){var p=u.children,y=n!==null?n.memoizedState:null;if(n===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((o.flags&128)!==0){if(y=y!==null?y.baseLanes|r:r,n!==null){for(u=o.child=n.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~y}else u=0,o.child=null;return kh(n,o,y,r,u)}if((r&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},n!==null&&Cr(o,y!==null?y.cachePool:null),y!==null?Lf(o,y):Jl(),Pf(o);else return u=o.lanes=536870912,kh(n,o,y!==null?y.baseLanes|r:r,r,u)}else y!==null?(Cr(o,y.cachePool),Lf(o,y),Zn(),o.memoizedState=null):(n!==null&&Cr(o,null),Jl(),Zn());return ft(n,o,p,r),o.child}function ws(n,o){return n!==null&&n.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function kh(n,o,r,u,p){var y=Hl();return y=y===null?null:{parent:We._currentValue,pool:y},o.memoizedState={baseLanes:r,cachePool:y},n!==null&&Cr(o,null),Jl(),Pf(o),n!==null&&ao(n,o,u,!0),o.childLanes=p,null}function Br(n,o){return o=Fr({mode:o.mode,children:o.children},n.mode),o.ref=n.ref,n.child=o,o.return=n,o}function Oh(n,o,r){return Ni(o,n.child,null,r),n=Br(o,o.pendingProps),n.flags|=2,Lt(o),o.memoizedState=null,n}function c_(n,o,r){var u=o.pendingProps,p=(o.flags&128)!==0;if(o.flags&=-129,n===null){if(we){if(u.mode==="hidden")return n=Br(o,u),o.lanes=536870912,ws(null,n);if(Kl(o),(n=Ve)?(n=Yp(n,Xt),n=n!==null&&n.data==="&"?n:null,n!==null&&(o.memoizedState={dehydrated:n,treeContext:Fn!==null?{id:hn,overflow:pn}:null,retryLane:536870912,hydrationErrors:null},r=vf(n),r.return=o,o.child=r,ct=o,Ve=null)):n=null,n===null)throw Jn(o);return o.lanes=536870912,null}return Br(o,u)}var y=n.memoizedState;if(y!==null){var E=y.dehydrated;if(Kl(o),p)if(o.flags&256)o.flags&=-257,o=Oh(n,o,r);else if(o.memoizedState!==null)o.child=n.child,o.flags|=128,o=null;else throw Error(s(558));else if(je||ao(n,o,r,!1),p=(r&n.childLanes)!==0,je||p){if(u=Ge,u!==null&&(E=Ad(u,r),E!==0&&E!==y.retryLane))throw y.retryLane=E,Ei(n,E),Nt(u,n,E),mu;jr(),o=Oh(n,o,r)}else n=y.treeContext,Ve=Wt(E.nextSibling),ct=o,we=!0,$n=null,Xt=!1,n!==null&&Ef(o,n),o=Br(o,u),o.flags|=4096;return o}return n=En(n.child,{mode:u.mode,children:u.children}),n.ref=o.ref,o.child=n,n.return=o,n}function zr(n,o){var r=o.ref;if(r===null)n!==null&&n.ref!==null&&(o.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(n===null||n.ref!==r)&&(o.flags|=4194816)}}function gu(n,o,r,u,p){return bi(o),r=Ql(n,o,r,u,void 0,p),u=Wl(),n!==null&&!je?(Zl(n,o,p),Rn(n,o,p)):(we&&u&&Ml(o),o.flags|=1,ft(n,o,r,p),o.child)}function Lh(n,o,r,u,p,y){return bi(o),o.updateQueue=null,r=Gf(o,u,r,p),qf(n),u=Wl(),n!==null&&!je?(Zl(n,o,y),Rn(n,o,y)):(we&&u&&Ml(o),o.flags|=1,ft(n,o,r,y),o.child)}function Ph(n,o,r,u,p){if(bi(o),o.stateNode===null){var y=io,E=r.contextType;typeof E=="object"&&E!==null&&(y=dt(E)),y=new r(u,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=hu,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=u,y.state=o.memoizedState,y.refs={},Bl(o),E=r.contextType,y.context=typeof E=="object"&&E!==null?dt(E):io,y.state=o.memoizedState,E=r.getDerivedStateFromProps,typeof E=="function"&&(fu(o,r,E,u),y.state=o.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(E=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),E!==y.state&&hu.enqueueReplaceState(y,y.state,null),vs(o,u,y,p),ys(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(n===null){y=o.stateNode;var T=o.memoizedProps,C=Mi(r,T);y.props=C;var O=y.context,V=r.contextType;E=io,typeof V=="object"&&V!==null&&(E=dt(V));var $=r.getDerivedStateFromProps;V=typeof $=="function"||typeof y.getSnapshotBeforeUpdate=="function",T=o.pendingProps!==T,V||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T||O!==E)&&wh(o,y,u,E),Kn=!1;var L=o.memoizedState;y.state=L,vs(o,u,y,p),ys(),O=o.memoizedState,T||L!==O||Kn?(typeof $=="function"&&(fu(o,r,$,u),O=o.memoizedState),(C=Kn||Th(o,r,C,u,L,O,E))?(V||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=O),y.props=u,y.state=O,y.context=E,u=C):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{y=o.stateNode,zl(n,o),E=o.memoizedProps,V=Mi(r,E),y.props=V,$=o.pendingProps,L=y.context,O=r.contextType,C=io,typeof O=="object"&&O!==null&&(C=dt(O)),T=r.getDerivedStateFromProps,(O=typeof T=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==$||L!==C)&&wh(o,y,u,C),Kn=!1,L=o.memoizedState,y.state=L,vs(o,u,y,p),ys();var q=o.memoizedState;E!==$||L!==q||Kn||n!==null&&n.dependencies!==null&&Ar(n.dependencies)?(typeof T=="function"&&(fu(o,r,T,u),q=o.memoizedState),(V=Kn||Th(o,r,V,u,L,q,C)||n!==null&&n.dependencies!==null&&Ar(n.dependencies))?(O||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,q,C),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,q,C)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===n.memoizedProps&&L===n.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&L===n.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=q),y.props=u,y.state=q,y.context=C,u=V):(typeof y.componentDidUpdate!="function"||E===n.memoizedProps&&L===n.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&L===n.memoizedState||(o.flags|=1024),u=!1)}return y=u,zr(n,o),u=(o.flags&128)!==0,y||u?(y=o.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,n!==null&&u?(o.child=Ni(o,n.child,null,p),o.child=Ni(o,null,r,p)):ft(n,o,r,p),o.memoizedState=y.state,n=o.child):n=Rn(n,o,p),n}function qh(n,o,r,u){return wi(),o.flags|=256,ft(n,o,r,u),o.child}var yu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vu(n){return{baseLanes:n,cachePool:Rf()}}function _u(n,o,r){return n=n!==null?n.childLanes&~r:0,o&&(n|=qt),n}function Gh(n,o,r){var u=o.pendingProps,p=!1,y=(o.flags&128)!==0,E;if((E=y)||(E=n!==null&&n.memoizedState===null?!1:(Xe.current&2)!==0),E&&(p=!0,o.flags&=-129),E=(o.flags&32)!==0,o.flags&=-33,n===null){if(we){if(p?Wn(o):Zn(),(n=Ve)?(n=Yp(n,Xt),n=n!==null&&n.data!=="&"?n:null,n!==null&&(o.memoizedState={dehydrated:n,treeContext:Fn!==null?{id:hn,overflow:pn}:null,retryLane:536870912,hydrationErrors:null},r=vf(n),r.return=o,o.child=r,ct=o,Ve=null)):n=null,n===null)throw Jn(o);return tc(n)?o.lanes=32:o.lanes=536870912,null}var T=u.children;return u=u.fallback,p?(Zn(),p=o.mode,T=Fr({mode:"hidden",children:T},p),u=Ti(u,p,r,null),T.return=o,u.return=o,T.sibling=u,o.child=T,u=o.child,u.memoizedState=vu(r),u.childLanes=_u(n,E,r),o.memoizedState=yu,ws(null,u)):(Wn(o),Su(o,T))}var C=n.memoizedState;if(C!==null&&(T=C.dehydrated,T!==null)){if(y)o.flags&256?(Wn(o),o.flags&=-257,o=Eu(n,o,r)):o.memoizedState!==null?(Zn(),o.child=n.child,o.flags|=128,o=null):(Zn(),T=u.fallback,p=o.mode,u=Fr({mode:"visible",children:u.children},p),T=Ti(T,p,r,null),T.flags|=2,u.return=o,T.return=o,u.sibling=T,o.child=u,Ni(o,n.child,null,r),u=o.child,u.memoizedState=vu(r),u.childLanes=_u(n,E,r),o.memoizedState=yu,o=ws(null,u));else if(Wn(o),tc(T)){if(E=T.nextSibling&&T.nextSibling.dataset,E)var O=E.dgst;E=O,u=Error(s(419)),u.stack="",u.digest=E,ds({value:u,source:null,stack:null}),o=Eu(n,o,r)}else if(je||ao(n,o,r,!1),E=(r&n.childLanes)!==0,je||E){if(E=Ge,E!==null&&(u=Ad(E,r),u!==0&&u!==C.retryLane))throw C.retryLane=u,Ei(n,u),Nt(E,n,u),mu;ec(T)||jr(),o=Eu(n,o,r)}else ec(T)?(o.flags|=192,o.child=n.child,o=null):(n=C.treeContext,Ve=Wt(T.nextSibling),ct=o,we=!0,$n=null,Xt=!1,n!==null&&Ef(o,n),o=Su(o,u.children),o.flags|=4096);return o}return p?(Zn(),T=u.fallback,p=o.mode,C=n.child,O=C.sibling,u=En(C,{mode:"hidden",children:u.children}),u.subtreeFlags=C.subtreeFlags&65011712,O!==null?T=En(O,T):(T=Ti(T,p,r,null),T.flags|=2),T.return=o,u.return=o,u.sibling=T,o.child=u,ws(null,u),u=o.child,T=n.child.memoizedState,T===null?T=vu(r):(p=T.cachePool,p!==null?(C=We._currentValue,p=p.parent!==C?{parent:C,pool:C}:p):p=Rf(),T={baseLanes:T.baseLanes|r,cachePool:p}),u.memoizedState=T,u.childLanes=_u(n,E,r),o.memoizedState=yu,ws(n.child,u)):(Wn(o),r=n.child,n=r.sibling,r=En(r,{mode:"visible",children:u.children}),r.return=o,r.sibling=null,n!==null&&(E=o.deletions,E===null?(o.deletions=[n],o.flags|=16):E.push(n)),o.child=r,o.memoizedState=null,r)}function Su(n,o){return o=Fr({mode:"visible",children:o},n.mode),o.return=n,n.child=o}function Fr(n,o){return n=kt(22,n,null,o),n.lanes=0,n}function Eu(n,o,r){return Ni(o,n.child,null,r),n=Su(o,o.pendingProps.children),n.flags|=2,o.memoizedState=null,n}function Hh(n,o,r){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o),Ll(n.return,o,r)}function Tu(n,o,r,u,p,y){var E=n.memoizedState;E===null?n.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:p,treeForkCount:y}:(E.isBackwards=o,E.rendering=null,E.renderingStartTime=0,E.last=u,E.tail=r,E.tailMode=p,E.treeForkCount=y)}function Vh(n,o,r){var u=o.pendingProps,p=u.revealOrder,y=u.tail;u=u.children;var E=Xe.current,T=(E&2)!==0;if(T?(E=E&1|2,o.flags|=128):E&=1,W(Xe,E),ft(n,o,u,r),u=we?cs:0,!T&&n!==null&&(n.flags&128)!==0)e:for(n=o.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Hh(n,r,o);else if(n.tag===19)Hh(n,r,o);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break e;for(;n.sibling===null;){if(n.return===null||n.return===o)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(p){case"forwards":for(r=o.child,p=null;r!==null;)n=r.alternate,n!==null&&Dr(n)===null&&(p=r),r=r.sibling;r=p,r===null?(p=o.child,o.child=null):(p=r.sibling,r.sibling=null),Tu(o,!1,p,r,y,u);break;case"backwards":case"unstable_legacy-backwards":for(r=null,p=o.child,o.child=null;p!==null;){if(n=p.alternate,n!==null&&Dr(n)===null){o.child=p;break}n=p.sibling,p.sibling=r,r=p,p=n}Tu(o,!0,r,null,y,u);break;case"together":Tu(o,!1,null,null,void 0,u);break;default:o.memoizedState=null}return o.child}function Rn(n,o,r){if(n!==null&&(o.dependencies=n.dependencies),ti|=o.lanes,(r&o.childLanes)===0)if(n!==null){if(ao(n,o,r,!1),(r&o.childLanes)===0)return null}else return null;if(n!==null&&o.child!==n.child)throw Error(s(153));if(o.child!==null){for(n=o.child,r=En(n,n.pendingProps),o.child=r,r.return=o;n.sibling!==null;)n=n.sibling,r=r.sibling=En(n,n.pendingProps),r.return=o;r.sibling=null}return o.child}function wu(n,o){return(n.lanes&o)!==0?!0:(n=n.dependencies,!!(n!==null&&Ar(n)))}function d_(n,o,r){switch(o.tag){case 3:Te(o,o.stateNode.containerInfo),Yn(o,We,n.memoizedState.cache),wi();break;case 27:case 5:Tt(o);break;case 4:Te(o,o.stateNode.containerInfo);break;case 10:Yn(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Kl(o),null;break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(Wn(o),o.flags|=128,null):(r&o.child.childLanes)!==0?Gh(n,o,r):(Wn(o),n=Rn(n,o,r),n!==null?n.sibling:null);Wn(o);break;case 19:var p=(n.flags&128)!==0;if(u=(r&o.childLanes)!==0,u||(ao(n,o,r,!1),u=(r&o.childLanes)!==0),p){if(u)return Vh(n,o,r);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),W(Xe,Xe.current),u)break;return null;case 22:return o.lanes=0,Uh(n,o,r,o.pendingProps);case 24:Yn(o,We,n.memoizedState.cache)}return Rn(n,o,r)}function Bh(n,o,r){if(n!==null)if(n.memoizedProps!==o.pendingProps)je=!0;else{if(!wu(n,r)&&(o.flags&128)===0)return je=!1,d_(n,o,r);je=(n.flags&131072)!==0}else je=!1,we&&(o.flags&1048576)!==0&&Sf(o,cs,o.index);switch(o.lanes=0,o.tag){case 16:e:{var u=o.pendingProps;if(n=Ri(o.elementType),o.type=n,typeof n=="function")xl(n)?(u=Mi(n,u),o.tag=1,o=Ph(null,o,n,u,r)):(o.tag=0,o=gu(null,o,n,u,r));else{if(n!=null){var p=n.$$typeof;if(p===Y){o.tag=11,o=Ih(null,o,n,u,r);break e}else if(p===z){o.tag=14,o=Mh(null,o,n,u,r);break e}}throw o=$e(n)||n,Error(s(306,o,""))}}return o;case 0:return gu(n,o,o.type,o.pendingProps,r);case 1:return u=o.type,p=Mi(u,o.pendingProps),Ph(n,o,u,p,r);case 3:e:{if(Te(o,o.stateNode.containerInfo),n===null)throw Error(s(387));u=o.pendingProps;var y=o.memoizedState;p=y.element,zl(n,o),vs(o,u,null,r);var E=o.memoizedState;if(u=E.cache,Yn(o,We,u),u!==y.cache&&Pl(o,[We],r,!0),ys(),u=E.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:E.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=qh(n,o,u,r);break e}else if(u!==p){p=Jt(Error(s(424)),o),ds(p),o=qh(n,o,u,r);break e}else{switch(n=o.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Ve=Wt(n.firstChild),ct=o,we=!0,$n=null,Xt=!0,r=Uf(o,null,u,r),o.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(wi(),u===p){o=Rn(n,o,r);break e}ft(n,o,u,r)}o=o.child}return o;case 26:return zr(n,o),n===null?(r=jp(o.type,null,o.pendingProps,null))?o.memoizedState=r:we||(r=o.type,n=o.pendingProps,u=ra(Z.current).createElement(r),u[ut]=o,u[wt]=n,ht(u,r,n),rt(u),o.stateNode=u):o.memoizedState=jp(o.type,n.memoizedProps,o.pendingProps,n.memoizedState),null;case 27:return Tt(o),n===null&&we&&(u=o.stateNode=Qp(o.type,o.pendingProps,Z.current),ct=o,Xt=!0,p=Ve,ri(o.type)?(nc=p,Ve=Wt(u.firstChild)):Ve=p),ft(n,o,o.pendingProps.children,r),zr(n,o),n===null&&(o.flags|=4194304),o.child;case 5:return n===null&&we&&((p=u=Ve)&&(u=V_(u,o.type,o.pendingProps,Xt),u!==null?(o.stateNode=u,ct=o,Ve=Wt(u.firstChild),Xt=!1,p=!0):p=!1),p||Jn(o)),Tt(o),p=o.type,y=o.pendingProps,E=n!==null?n.memoizedProps:null,u=y.children,Wu(p,y)?u=null:E!==null&&Wu(p,E)&&(o.flags|=32),o.memoizedState!==null&&(p=Ql(n,o,n_,null,null,r),qs._currentValue=p),zr(n,o),ft(n,o,u,r),o.child;case 6:return n===null&&we&&((n=r=Ve)&&(r=B_(r,o.pendingProps,Xt),r!==null?(o.stateNode=r,ct=o,Ve=null,n=!0):n=!1),n||Jn(o)),null;case 13:return Gh(n,o,r);case 4:return Te(o,o.stateNode.containerInfo),u=o.pendingProps,n===null?o.child=Ni(o,null,u,r):ft(n,o,u,r),o.child;case 11:return Ih(n,o,o.type,o.pendingProps,r);case 7:return ft(n,o,o.pendingProps,r),o.child;case 8:return ft(n,o,o.pendingProps.children,r),o.child;case 12:return ft(n,o,o.pendingProps.children,r),o.child;case 10:return u=o.pendingProps,Yn(o,o.type,u.value),ft(n,o,u.children,r),o.child;case 9:return p=o.type._context,u=o.pendingProps.children,bi(o),p=dt(p),u=u(p),o.flags|=1,ft(n,o,u,r),o.child;case 14:return Mh(n,o,o.type,o.pendingProps,r);case 15:return Dh(n,o,o.type,o.pendingProps,r);case 19:return Vh(n,o,r);case 31:return c_(n,o,r);case 22:return Uh(n,o,r,o.pendingProps);case 24:return bi(o),u=dt(We),n===null?(p=Hl(),p===null&&(p=Ge,y=ql(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=r),p=y),o.memoizedState={parent:u,cache:p},Bl(o),Yn(o,We,p)):((n.lanes&r)!==0&&(zl(n,o),vs(o,null,null,r),ys()),p=n.memoizedState,y=o.memoizedState,p.parent!==u?(p={parent:u,cache:u},o.memoizedState=p,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=p),Yn(o,We,u)):(u=y.cache,Yn(o,We,u),u!==p.cache&&Pl(o,[We],r,!0))),ft(n,o,o.pendingProps.children,r),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function xn(n){n.flags|=4}function Au(n,o,r,u,p){if((o=(n.mode&32)!==0)&&(o=!1),o){if(n.flags|=16777216,(p&335544128)===p)if(n.stateNode.complete)n.flags|=8192;else if(mp())n.flags|=8192;else throw xi=xr,Vl}else n.flags&=-16777217}function zh(n,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!om(o))if(mp())n.flags|=8192;else throw xi=xr,Vl}function $r(n,o){o!==null&&(n.flags|=4),n.flags&16384&&(o=n.tag!==22?Ed():536870912,n.lanes|=o,So|=o)}function As(n,o){if(!we)switch(n.tailMode){case"hidden":o=n.tail;for(var r=null;o!==null;)o.alternate!==null&&(r=o),o=o.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?o||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Be(n){var o=n.alternate!==null&&n.alternate.child===n.child,r=0,u=0;if(o)for(var p=n.child;p!==null;)r|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=n,p=p.sibling;else for(p=n.child;p!==null;)r|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=n,p=p.sibling;return n.subtreeFlags|=u,n.childLanes=r,o}function f_(n,o,r){var u=o.pendingProps;switch(Dl(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Be(o),null;case 1:return Be(o),null;case 3:return r=o.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),An(We),ge(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(ro(o)?xn(o):n===null||n.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,kl())),Be(o),null;case 26:var p=o.type,y=o.memoizedState;return n===null?(xn(o),y!==null?(Be(o),zh(o,y)):(Be(o),Au(o,p,null,u,r))):y?y!==n.memoizedState?(xn(o),Be(o),zh(o,y)):(Be(o),o.flags&=-16777217):(n=n.memoizedProps,n!==u&&xn(o),Be(o),Au(o,p,n,u,r)),null;case 27:if(mi(o),r=Z.current,p=o.type,n!==null&&o.stateNode!=null)n.memoizedProps!==u&&xn(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return Be(o),null}n=te.current,ro(o)?Tf(o):(n=Qp(p,u,r),o.stateNode=n,xn(o))}return Be(o),null;case 5:if(mi(o),p=o.type,n!==null&&o.stateNode!=null)n.memoizedProps!==u&&xn(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return Be(o),null}if(y=te.current,ro(o))Tf(o);else{var E=ra(Z.current);switch(y){case 1:y=E.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=E.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=E.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=E.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=E.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?E.createElement("select",{is:u.is}):E.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?E.createElement(p,{is:u.is}):E.createElement(p)}}y[ut]=o,y[wt]=u;e:for(E=o.child;E!==null;){if(E.tag===5||E.tag===6)y.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===o)break e;for(;E.sibling===null;){if(E.return===null||E.return===o)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}o.stateNode=y;e:switch(ht(y,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&xn(o)}}return Be(o),Au(o,o.type,n===null?null:n.memoizedProps,o.pendingProps,r),null;case 6:if(n&&o.stateNode!=null)n.memoizedProps!==u&&xn(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(s(166));if(n=Z.current,ro(o)){if(n=o.stateNode,r=o.memoizedProps,u=null,p=ct,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}n[ut]=o,n=!!(n.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||Gp(n.nodeValue,r)),n||Jn(o,!0)}else n=ra(n).createTextNode(u),n[ut]=o,o.stateNode=n}return Be(o),null;case 31:if(r=o.memoizedState,n===null||n.memoizedState!==null){if(u=ro(o),r!==null){if(n===null){if(!u)throw Error(s(318));if(n=o.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[ut]=o}else wi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Be(o),n=!1}else r=kl(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=r),n=!0;if(!n)return o.flags&256?(Lt(o),o):(Lt(o),null);if((o.flags&128)!==0)throw Error(s(558))}return Be(o),null;case 13:if(u=o.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(p=ro(o),u!==null&&u.dehydrated!==null){if(n===null){if(!p)throw Error(s(318));if(p=o.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[ut]=o}else wi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Be(o),p=!1}else p=kl(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=p),p=!0;if(!p)return o.flags&256?(Lt(o),o):(Lt(o),null)}return Lt(o),(o.flags&128)!==0?(o.lanes=r,o):(r=u!==null,n=n!==null&&n.memoizedState!==null,r&&(u=o.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048)),r!==n&&r&&(o.child.flags|=8192),$r(o,o.updateQueue),Be(o),null);case 4:return ge(),n===null&&Ju(o.stateNode.containerInfo),Be(o),null;case 10:return An(o.type),Be(o),null;case 19:if(J(Xe),u=o.memoizedState,u===null)return Be(o),null;if(p=(o.flags&128)!==0,y=u.rendering,y===null)if(p)As(u,!1);else{if(Ye!==0||n!==null&&(n.flags&128)!==0)for(n=o.child;n!==null;){if(y=Dr(n),y!==null){for(o.flags|=128,As(u,!1),n=y.updateQueue,o.updateQueue=n,$r(o,n),o.subtreeFlags=0,n=r,r=o.child;r!==null;)yf(r,n),r=r.sibling;return W(Xe,Xe.current&1|2),we&&Tn(o,u.treeForkCount),o.child}n=n.sibling}u.tail!==null&&It()>Qr&&(o.flags|=128,p=!0,As(u,!1),o.lanes=4194304)}else{if(!p)if(n=Dr(y),n!==null){if(o.flags|=128,p=!0,n=n.updateQueue,o.updateQueue=n,$r(o,n),As(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!we)return Be(o),null}else 2*It()-u.renderingStartTime>Qr&&r!==536870912&&(o.flags|=128,p=!0,As(u,!1),o.lanes=4194304);u.isBackwards?(y.sibling=o.child,o.child=y):(n=u.last,n!==null?n.sibling=y:o.child=y,u.last=y)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=It(),n.sibling=null,r=Xe.current,W(Xe,p?r&1|2:r&1),we&&Tn(o,u.treeForkCount),n):(Be(o),null);case 22:case 23:return Lt(o),Yl(),u=o.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(r&536870912)!==0&&(o.flags&128)===0&&(Be(o),o.subtreeFlags&6&&(o.flags|=8192)):Be(o),r=o.updateQueue,r!==null&&$r(o,r.retryQueue),r=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==r&&(o.flags|=2048),n!==null&&J(Ci),null;case 24:return r=null,n!==null&&(r=n.memoizedState.cache),o.memoizedState.cache!==r&&(o.flags|=2048),An(We),Be(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function h_(n,o){switch(Dl(o),o.tag){case 1:return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 3:return An(We),ge(),n=o.flags,(n&65536)!==0&&(n&128)===0?(o.flags=n&-65537|128,o):null;case 26:case 27:case 5:return mi(o),null;case 31:if(o.memoizedState!==null){if(Lt(o),o.alternate===null)throw Error(s(340));wi()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 13:if(Lt(o),n=o.memoizedState,n!==null&&n.dehydrated!==null){if(o.alternate===null)throw Error(s(340));wi()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 19:return J(Xe),null;case 4:return ge(),null;case 10:return An(o.type),null;case 22:case 23:return Lt(o),Yl(),n!==null&&J(Ci),n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 24:return An(We),null;case 25:return null;default:return null}}function Fh(n,o){switch(Dl(o),o.tag){case 3:An(We),ge();break;case 26:case 27:case 5:mi(o);break;case 4:ge();break;case 31:o.memoizedState!==null&&Lt(o);break;case 13:Lt(o);break;case 19:J(Xe);break;case 10:An(o.type);break;case 22:case 23:Lt(o),Yl(),n!==null&&J(Ci);break;case 24:An(We)}}function bs(n,o){try{var r=o.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var p=u.next;r=p;do{if((r.tag&n)===n){u=void 0;var y=r.create,E=r.inst;u=y(),E.destroy=u}r=r.next}while(r!==p)}}catch(T){Ue(o,o.return,T)}}function jn(n,o,r){try{var u=o.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var y=p.next;u=y;do{if((u.tag&n)===n){var E=u.inst,T=E.destroy;if(T!==void 0){E.destroy=void 0,p=o;var C=r,O=T;try{O()}catch(V){Ue(p,C,V)}}}u=u.next}while(u!==y)}}catch(V){Ue(o,o.return,V)}}function $h(n){var o=n.updateQueue;if(o!==null){var r=n.stateNode;try{Of(o,r)}catch(u){Ue(n,n.return,u)}}}function Jh(n,o,r){r.props=Mi(n.type,n.memoizedProps),r.state=n.memoizedState;try{r.componentWillUnmount()}catch(u){Ue(n,o,u)}}function Cs(n,o){try{var r=n.ref;if(r!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof r=="function"?n.refCleanup=r(u):r.current=u}}catch(p){Ue(n,o,p)}}function mn(n,o){var r=n.ref,u=n.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(p){Ue(n,o,p)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(p){Ue(n,o,p)}else r.current=null}function Yh(n){var o=n.type,r=n.memoizedProps,u=n.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break e;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(p){Ue(n,n.return,p)}}function bu(n,o,r){try{var u=n.stateNode;O_(u,n.type,r,o),u[wt]=o}catch(p){Ue(n,n.return,p)}}function Kh(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ri(n.type)||n.tag===4}function Cu(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Kh(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ri(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ru(n,o,r){var u=n.tag;if(u===5||u===6)n=n.stateNode,o?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(n,o):(o=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.appendChild(n),r=r._reactRootContainer,r!=null||o.onclick!==null||(o.onclick=_n));else if(u!==4&&(u===27&&ri(n.type)&&(r=n.stateNode,o=null),n=n.child,n!==null))for(Ru(n,o,r),n=n.sibling;n!==null;)Ru(n,o,r),n=n.sibling}function Jr(n,o,r){var u=n.tag;if(u===5||u===6)n=n.stateNode,o?r.insertBefore(n,o):r.appendChild(n);else if(u!==4&&(u===27&&ri(n.type)&&(r=n.stateNode),n=n.child,n!==null))for(Jr(n,o,r),n=n.sibling;n!==null;)Jr(n,o,r),n=n.sibling}function Xh(n){var o=n.stateNode,r=n.memoizedProps;try{for(var u=n.type,p=o.attributes;p.length;)o.removeAttributeNode(p[0]);ht(o,u,r),o[ut]=n,o[wt]=r}catch(y){Ue(n,n.return,y)}}var Nn=!1,et=!1,xu=!1,Qh=typeof WeakSet=="function"?WeakSet:Set,at=null;function p_(n,o){if(n=n.containerInfo,Xu=ha,n=lf(n),El(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else e:{r=(r=n.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var p=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{r.nodeType,y.nodeType}catch{r=null;break e}var E=0,T=-1,C=-1,O=0,V=0,$=n,L=null;t:for(;;){for(var q;$!==r||p!==0&&$.nodeType!==3||(T=E+p),$!==y||u!==0&&$.nodeType!==3||(C=E+u),$.nodeType===3&&(E+=$.nodeValue.length),(q=$.firstChild)!==null;)L=$,$=q;for(;;){if($===n)break t;if(L===r&&++O===p&&(T=E),L===y&&++V===u&&(C=E),(q=$.nextSibling)!==null)break;$=L,L=$.parentNode}$=q}r=T===-1||C===-1?null:{start:T,end:C}}else r=null}r=r||{start:0,end:0}}else r=null;for(Qu={focusedElem:n,selectionRange:r},ha=!1,at=o;at!==null;)if(o=at,n=o.child,(o.subtreeFlags&1028)!==0&&n!==null)n.return=o,at=n;else for(;at!==null;){switch(o=at,y=o.alternate,n=o.flags,o.tag){case 0:if((n&4)!==0&&(n=o.updateQueue,n=n!==null?n.events:null,n!==null))for(r=0;r<n.length;r++)p=n[r],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,r=o,p=y.memoizedProps,y=y.memoizedState,u=r.stateNode;try{var ee=Mi(r.type,p);n=u.getSnapshotBeforeUpdate(ee,y),u.__reactInternalSnapshotBeforeUpdate=n}catch(ue){Ue(r,r.return,ue)}}break;case 3:if((n&1024)!==0){if(n=o.stateNode.containerInfo,r=n.nodeType,r===9)ju(n);else if(r===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":ju(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=o.sibling,n!==null){n.return=o.return,at=n;break}at=o.return}}function Wh(n,o,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:Mn(n,r),u&4&&bs(5,r);break;case 1:if(Mn(n,r),u&4)if(n=r.stateNode,o===null)try{n.componentDidMount()}catch(E){Ue(r,r.return,E)}else{var p=Mi(r.type,o.memoizedProps);o=o.memoizedState;try{n.componentDidUpdate(p,o,n.__reactInternalSnapshotBeforeUpdate)}catch(E){Ue(r,r.return,E)}}u&64&&$h(r),u&512&&Cs(r,r.return);break;case 3:if(Mn(n,r),u&64&&(n=r.updateQueue,n!==null)){if(o=null,r.child!==null)switch(r.child.tag){case 27:case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}try{Of(n,o)}catch(E){Ue(r,r.return,E)}}break;case 27:o===null&&u&4&&Xh(r);case 26:case 5:Mn(n,r),o===null&&u&4&&Yh(r),u&512&&Cs(r,r.return);break;case 12:Mn(n,r);break;case 31:Mn(n,r),u&4&&ep(n,r);break;case 13:Mn(n,r),u&4&&tp(n,r),u&64&&(n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(r=w_.bind(null,r),z_(n,r))));break;case 22:if(u=r.memoizedState!==null||Nn,!u){o=o!==null&&o.memoizedState!==null||et,p=Nn;var y=et;Nn=u,(et=o)&&!y?Dn(n,r,(r.subtreeFlags&8772)!==0):Mn(n,r),Nn=p,et=y}break;case 30:break;default:Mn(n,r)}}function Zh(n){var o=n.alternate;o!==null&&(n.alternate=null,Zh(o)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(o=n.stateNode,o!==null&&ol(o)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ze=null,bt=!1;function In(n,o,r){for(r=r.child;r!==null;)jh(n,o,r),r=r.sibling}function jh(n,o,r){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(Qo,r)}catch{}switch(r.tag){case 26:et||mn(r,o),In(n,o,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:et||mn(r,o);var u=ze,p=bt;ri(r.type)&&(ze=r.stateNode,bt=!1),In(n,o,r),Os(r.stateNode),ze=u,bt=p;break;case 5:et||mn(r,o);case 6:if(u=ze,p=bt,ze=null,In(n,o,r),ze=u,bt=p,ze!==null)if(bt)try{(ze.nodeType===9?ze.body:ze.nodeName==="HTML"?ze.ownerDocument.body:ze).removeChild(r.stateNode)}catch(y){Ue(r,o,y)}else try{ze.removeChild(r.stateNode)}catch(y){Ue(r,o,y)}break;case 18:ze!==null&&(bt?(n=ze,$p(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,r.stateNode),xo(n)):$p(ze,r.stateNode));break;case 4:u=ze,p=bt,ze=r.stateNode.containerInfo,bt=!0,In(n,o,r),ze=u,bt=p;break;case 0:case 11:case 14:case 15:jn(2,r,o),et||jn(4,r,o),In(n,o,r);break;case 1:et||(mn(r,o),u=r.stateNode,typeof u.componentWillUnmount=="function"&&Jh(r,o,u)),In(n,o,r);break;case 21:In(n,o,r);break;case 22:et=(u=et)||r.memoizedState!==null,In(n,o,r),et=u;break;default:In(n,o,r)}}function ep(n,o){if(o.memoizedState===null&&(n=o.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{xo(n)}catch(r){Ue(o,o.return,r)}}}function tp(n,o){if(o.memoizedState===null&&(n=o.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{xo(n)}catch(r){Ue(o,o.return,r)}}function m_(n){switch(n.tag){case 31:case 13:case 19:var o=n.stateNode;return o===null&&(o=n.stateNode=new Qh),o;case 22:return n=n.stateNode,o=n._retryCache,o===null&&(o=n._retryCache=new Qh),o;default:throw Error(s(435,n.tag))}}function Yr(n,o){var r=m_(n);o.forEach(function(u){if(!r.has(u)){r.add(u);var p=A_.bind(null,n,u);u.then(p,p)}})}function Ct(n,o){var r=o.deletions;if(r!==null)for(var u=0;u<r.length;u++){var p=r[u],y=n,E=o,T=E;e:for(;T!==null;){switch(T.tag){case 27:if(ri(T.type)){ze=T.stateNode,bt=!1;break e}break;case 5:ze=T.stateNode,bt=!1;break e;case 3:case 4:ze=T.stateNode.containerInfo,bt=!0;break e}T=T.return}if(ze===null)throw Error(s(160));jh(y,E,p),ze=null,bt=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)np(o,n),o=o.sibling}var on=null;function np(n,o){var r=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Ct(o,n),Rt(n),u&4&&(jn(3,n,n.return),bs(3,n),jn(5,n,n.return));break;case 1:Ct(o,n),Rt(n),u&512&&(et||r===null||mn(r,r.return)),u&64&&Nn&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(r=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var p=on;if(Ct(o,n),Rt(n),u&512&&(et||r===null||mn(r,r.return)),u&4){var y=r!==null?r.memoizedState:null;if(u=n.memoizedState,r===null)if(u===null)if(n.stateNode===null){e:{u=n.type,r=n.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":y=p.getElementsByTagName("title")[0],(!y||y[jo]||y[ut]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(u),p.head.insertBefore(y,p.querySelector("head > title"))),ht(y,u,r),y[ut]=n,rt(y),u=y;break e;case"link":var E=nm("link","href",p).get(u+(r.href||""));if(E){for(var T=0;T<E.length;T++)if(y=E[T],y.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&y.getAttribute("rel")===(r.rel==null?null:r.rel)&&y.getAttribute("title")===(r.title==null?null:r.title)&&y.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){E.splice(T,1);break t}}y=p.createElement(u),ht(y,u,r),p.head.appendChild(y);break;case"meta":if(E=nm("meta","content",p).get(u+(r.content||""))){for(T=0;T<E.length;T++)if(y=E[T],y.getAttribute("content")===(r.content==null?null:""+r.content)&&y.getAttribute("name")===(r.name==null?null:r.name)&&y.getAttribute("property")===(r.property==null?null:r.property)&&y.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&y.getAttribute("charset")===(r.charSet==null?null:r.charSet)){E.splice(T,1);break t}}y=p.createElement(u),ht(y,u,r),p.head.appendChild(y);break;default:throw Error(s(468,u))}y[ut]=n,rt(y),u=y}n.stateNode=u}else im(p,n.type,n.stateNode);else n.stateNode=tm(p,u,n.memoizedProps);else y!==u?(y===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):y.count--,u===null?im(p,n.type,n.stateNode):tm(p,u,n.memoizedProps)):u===null&&n.stateNode!==null&&bu(n,n.memoizedProps,r.memoizedProps)}break;case 27:Ct(o,n),Rt(n),u&512&&(et||r===null||mn(r,r.return)),r!==null&&u&4&&bu(n,n.memoizedProps,r.memoizedProps);break;case 5:if(Ct(o,n),Rt(n),u&512&&(et||r===null||mn(r,r.return)),n.flags&32){p=n.stateNode;try{Qi(p,"")}catch(ee){Ue(n,n.return,ee)}}u&4&&n.stateNode!=null&&(p=n.memoizedProps,bu(n,p,r!==null?r.memoizedProps:p)),u&1024&&(xu=!0);break;case 6:if(Ct(o,n),Rt(n),u&4){if(n.stateNode===null)throw Error(s(162));u=n.memoizedProps,r=n.stateNode;try{r.nodeValue=u}catch(ee){Ue(n,n.return,ee)}}break;case 3:if(ua=null,p=on,on=aa(o.containerInfo),Ct(o,n),on=p,Rt(n),u&4&&r!==null&&r.memoizedState.isDehydrated)try{xo(o.containerInfo)}catch(ee){Ue(n,n.return,ee)}xu&&(xu=!1,ip(n));break;case 4:u=on,on=aa(n.stateNode.containerInfo),Ct(o,n),Rt(n),on=u;break;case 12:Ct(o,n),Rt(n);break;case 31:Ct(o,n),Rt(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Yr(n,u)));break;case 13:Ct(o,n),Rt(n),n.child.flags&8192&&n.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Xr=It()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Yr(n,u)));break;case 22:p=n.memoizedState!==null;var C=r!==null&&r.memoizedState!==null,O=Nn,V=et;if(Nn=O||p,et=V||C,Ct(o,n),et=V,Nn=O,Rt(n),u&8192)e:for(o=n.stateNode,o._visibility=p?o._visibility&-2:o._visibility|1,p&&(r===null||C||Nn||et||Di(n)),r=null,o=n;;){if(o.tag===5||o.tag===26){if(r===null){C=r=o;try{if(y=C.stateNode,p)E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{T=C.stateNode;var $=C.memoizedProps.style,L=$!=null&&$.hasOwnProperty("display")?$.display:null;T.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(ee){Ue(C,C.return,ee)}}}else if(o.tag===6){if(r===null){C=o;try{C.stateNode.nodeValue=p?"":C.memoizedProps}catch(ee){Ue(C,C.return,ee)}}}else if(o.tag===18){if(r===null){C=o;try{var q=C.stateNode;p?Jp(q,!0):Jp(C.stateNode,!1)}catch(ee){Ue(C,C.return,ee)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===n)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break e;for(;o.sibling===null;){if(o.return===null||o.return===n)break e;r===o&&(r=null),o=o.return}r===o&&(r=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=n.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,Yr(n,r))));break;case 19:Ct(o,n),Rt(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Yr(n,u)));break;case 30:break;case 21:break;default:Ct(o,n),Rt(n)}}function Rt(n){var o=n.flags;if(o&2){try{for(var r,u=n.return;u!==null;){if(Kh(u)){r=u;break}u=u.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var p=r.stateNode,y=Cu(n);Jr(n,y,p);break;case 5:var E=r.stateNode;r.flags&32&&(Qi(E,""),r.flags&=-33);var T=Cu(n);Jr(n,T,E);break;case 3:case 4:var C=r.stateNode.containerInfo,O=Cu(n);Ru(n,O,C);break;default:throw Error(s(161))}}catch(V){Ue(n,n.return,V)}n.flags&=-3}o&4096&&(n.flags&=-4097)}function ip(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var o=n;ip(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),n=n.sibling}}function Mn(n,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Wh(n,o.alternate,o),o=o.sibling}function Di(n){for(n=n.child;n!==null;){var o=n;switch(o.tag){case 0:case 11:case 14:case 15:jn(4,o,o.return),Di(o);break;case 1:mn(o,o.return);var r=o.stateNode;typeof r.componentWillUnmount=="function"&&Jh(o,o.return,r),Di(o);break;case 27:Os(o.stateNode);case 26:case 5:mn(o,o.return),Di(o);break;case 22:o.memoizedState===null&&Di(o);break;case 30:Di(o);break;default:Di(o)}n=n.sibling}}function Dn(n,o,r){for(r=r&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,p=n,y=o,E=y.flags;switch(y.tag){case 0:case 11:case 15:Dn(p,y,r),bs(4,y);break;case 1:if(Dn(p,y,r),u=y,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(O){Ue(u,u.return,O)}if(u=y,p=u.updateQueue,p!==null){var T=u.stateNode;try{var C=p.shared.hiddenCallbacks;if(C!==null)for(p.shared.hiddenCallbacks=null,p=0;p<C.length;p++)kf(C[p],T)}catch(O){Ue(u,u.return,O)}}r&&E&64&&$h(y),Cs(y,y.return);break;case 27:Xh(y);case 26:case 5:Dn(p,y,r),r&&u===null&&E&4&&Yh(y),Cs(y,y.return);break;case 12:Dn(p,y,r);break;case 31:Dn(p,y,r),r&&E&4&&ep(p,y);break;case 13:Dn(p,y,r),r&&E&4&&tp(p,y);break;case 22:y.memoizedState===null&&Dn(p,y,r),Cs(y,y.return);break;case 30:break;default:Dn(p,y,r)}o=o.sibling}}function Nu(n,o){var r=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),n=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(n=o.memoizedState.cachePool.pool),n!==r&&(n!=null&&n.refCount++,r!=null&&fs(r))}function Iu(n,o){n=null,o.alternate!==null&&(n=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==n&&(o.refCount++,n!=null&&fs(n))}function sn(n,o,r,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)op(n,o,r,u),o=o.sibling}function op(n,o,r,u){var p=o.flags;switch(o.tag){case 0:case 11:case 15:sn(n,o,r,u),p&2048&&bs(9,o);break;case 1:sn(n,o,r,u);break;case 3:sn(n,o,r,u),p&2048&&(n=null,o.alternate!==null&&(n=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==n&&(o.refCount++,n!=null&&fs(n)));break;case 12:if(p&2048){sn(n,o,r,u),n=o.stateNode;try{var y=o.memoizedProps,E=y.id,T=y.onPostCommit;typeof T=="function"&&T(E,o.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(C){Ue(o,o.return,C)}}else sn(n,o,r,u);break;case 31:sn(n,o,r,u);break;case 13:sn(n,o,r,u);break;case 23:break;case 22:y=o.stateNode,E=o.alternate,o.memoizedState!==null?y._visibility&2?sn(n,o,r,u):Rs(n,o):y._visibility&2?sn(n,o,r,u):(y._visibility|=2,yo(n,o,r,u,(o.subtreeFlags&10256)!==0||!1)),p&2048&&Nu(E,o);break;case 24:sn(n,o,r,u),p&2048&&Iu(o.alternate,o);break;default:sn(n,o,r,u)}}function yo(n,o,r,u,p){for(p=p&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var y=n,E=o,T=r,C=u,O=E.flags;switch(E.tag){case 0:case 11:case 15:yo(y,E,T,C,p),bs(8,E);break;case 23:break;case 22:var V=E.stateNode;E.memoizedState!==null?V._visibility&2?yo(y,E,T,C,p):Rs(y,E):(V._visibility|=2,yo(y,E,T,C,p)),p&&O&2048&&Nu(E.alternate,E);break;case 24:yo(y,E,T,C,p),p&&O&2048&&Iu(E.alternate,E);break;default:yo(y,E,T,C,p)}o=o.sibling}}function Rs(n,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var r=n,u=o,p=u.flags;switch(u.tag){case 22:Rs(r,u),p&2048&&Nu(u.alternate,u);break;case 24:Rs(r,u),p&2048&&Iu(u.alternate,u);break;default:Rs(r,u)}o=o.sibling}}var xs=8192;function vo(n,o,r){if(n.subtreeFlags&xs)for(n=n.child;n!==null;)sp(n,o,r),n=n.sibling}function sp(n,o,r){switch(n.tag){case 26:vo(n,o,r),n.flags&xs&&n.memoizedState!==null&&tS(r,on,n.memoizedState,n.memoizedProps);break;case 5:vo(n,o,r);break;case 3:case 4:var u=on;on=aa(n.stateNode.containerInfo),vo(n,o,r),on=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=xs,xs=16777216,vo(n,o,r),xs=u):vo(n,o,r));break;default:vo(n,o,r)}}function rp(n){var o=n.alternate;if(o!==null&&(n=o.child,n!==null)){o.child=null;do o=n.sibling,n.sibling=null,n=o;while(n!==null)}}function Ns(n){var o=n.deletions;if((n.flags&16)!==0){if(o!==null)for(var r=0;r<o.length;r++){var u=o[r];at=u,lp(u,n)}rp(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)ap(n),n=n.sibling}function ap(n){switch(n.tag){case 0:case 11:case 15:Ns(n),n.flags&2048&&jn(9,n,n.return);break;case 3:Ns(n);break;case 12:Ns(n);break;case 22:var o=n.stateNode;n.memoizedState!==null&&o._visibility&2&&(n.return===null||n.return.tag!==13)?(o._visibility&=-3,Kr(n)):Ns(n);break;default:Ns(n)}}function Kr(n){var o=n.deletions;if((n.flags&16)!==0){if(o!==null)for(var r=0;r<o.length;r++){var u=o[r];at=u,lp(u,n)}rp(n)}for(n=n.child;n!==null;){switch(o=n,o.tag){case 0:case 11:case 15:jn(8,o,o.return),Kr(o);break;case 22:r=o.stateNode,r._visibility&2&&(r._visibility&=-3,Kr(o));break;default:Kr(o)}n=n.sibling}}function lp(n,o){for(;at!==null;){var r=at;switch(r.tag){case 0:case 11:case 15:jn(8,r,o);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:fs(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,at=u;else e:for(r=n;at!==null;){u=at;var p=u.sibling,y=u.return;if(Zh(u),u===r){at=null;break e}if(p!==null){p.return=y,at=p;break e}at=y}}}var g_={getCacheForType:function(n){var o=dt(We),r=o.data.get(n);return r===void 0&&(r=n(),o.data.set(n,r)),r},cacheSignal:function(){return dt(We).controller.signal}},y_=typeof WeakMap=="function"?WeakMap:Map,Ie=0,Ge=null,ve=null,Se=0,De=0,Pt=null,ei=!1,_o=!1,Mu=!1,Un=0,Ye=0,ti=0,Ui=0,Du=0,qt=0,So=0,Is=null,xt=null,Uu=!1,Xr=0,up=0,Qr=1/0,Wr=null,ni=null,it=0,ii=null,Eo=null,kn=0,ku=0,Ou=null,cp=null,Ms=0,Lu=null;function Gt(){return(Ie&2)!==0&&Se!==0?Se&-Se:G.T!==null?Bu():bd()}function dp(){if(qt===0)if((Se&536870912)===0||we){var n=sr;sr<<=1,(sr&3932160)===0&&(sr=262144),qt=n}else qt=536870912;return n=Ot.current,n!==null&&(n.flags|=32),qt}function Nt(n,o,r){(n===Ge&&(De===2||De===9)||n.cancelPendingCommit!==null)&&(To(n,0),oi(n,Se,qt,!1)),Zo(n,r),((Ie&2)===0||n!==Ge)&&(n===Ge&&((Ie&2)===0&&(Ui|=r),Ye===4&&oi(n,Se,qt,!1)),gn(n))}function fp(n,o,r){if((Ie&6)!==0)throw Error(s(327));var u=!r&&(o&127)===0&&(o&n.expiredLanes)===0||Wo(n,o),p=u?S_(n,o):qu(n,o,!0),y=u;do{if(p===0){_o&&!u&&oi(n,o,0,!1);break}else{if(r=n.current.alternate,y&&!v_(r)){p=qu(n,o,!1),y=!1;continue}if(p===2){if(y=o,n.errorRecoveryDisabledLanes&y)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){o=E;e:{var T=n;p=Is;var C=T.current.memoizedState.isDehydrated;if(C&&(To(T,E).flags|=256),E=qu(T,E,!1),E!==2){if(Mu&&!C){T.errorRecoveryDisabledLanes|=y,Ui|=y,p=4;break e}y=xt,xt=p,y!==null&&(xt===null?xt=y:xt.push.apply(xt,y))}p=E}if(y=!1,p!==2)continue}}if(p===1){To(n,0),oi(n,o,0,!0);break}e:{switch(u=n,y=p,y){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:oi(u,o,qt,!ei);break e;case 2:xt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(p=Xr+300-It(),10<p)){if(oi(u,o,qt,!ei),ar(u,0,!0)!==0)break e;kn=o,u.timeoutHandle=zp(hp.bind(null,u,r,xt,Wr,Uu,o,qt,Ui,So,ei,y,"Throttled",-0,0),p);break e}hp(u,r,xt,Wr,Uu,o,qt,Ui,So,ei,y,null,-0,0)}}break}while(!0);gn(n)}function hp(n,o,r,u,p,y,E,T,C,O,V,$,L,q){if(n.timeoutHandle=-1,$=o.subtreeFlags,$&8192||($&16785408)===16785408){$={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_n},sp(o,y,$);var ee=(y&62914560)===y?Xr-It():(y&4194048)===y?up-It():0;if(ee=nS($,ee),ee!==null){kn=y,n.cancelPendingCommit=ee(Ep.bind(null,n,o,y,r,u,p,E,T,C,V,$,null,L,q)),oi(n,y,E,!O);return}}Ep(n,o,y,r,u,p,E,T,C)}function v_(n){for(var o=n;;){var r=o.tag;if((r===0||r===11||r===15)&&o.flags&16384&&(r=o.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var p=r[u],y=p.getSnapshot;p=p.value;try{if(!Ut(y(),p))return!1}catch{return!1}}if(r=o.child,o.subtreeFlags&16384&&r!==null)r.return=o,o=r;else{if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function oi(n,o,r,u){o&=~Du,o&=~Ui,n.suspendedLanes|=o,n.pingedLanes&=~o,u&&(n.warmLanes|=o),u=n.expirationTimes;for(var p=o;0<p;){var y=31-Dt(p),E=1<<y;u[y]=-1,p&=~E}r!==0&&Td(n,r,o)}function Zr(){return(Ie&6)===0?(Ds(0),!1):!0}function Pu(){if(ve!==null){if(De===0)var n=ve.return;else n=ve,wn=Ai=null,jl(n),fo=null,ps=0,n=ve;for(;n!==null;)Fh(n.alternate,n),n=n.return;ve=null}}function To(n,o){var r=n.timeoutHandle;r!==-1&&(n.timeoutHandle=-1,q_(r)),r=n.cancelPendingCommit,r!==null&&(n.cancelPendingCommit=null,r()),kn=0,Pu(),Ge=n,ve=r=En(n.current,null),Se=o,De=0,Pt=null,ei=!1,_o=Wo(n,o),Mu=!1,So=qt=Du=Ui=ti=Ye=0,xt=Is=null,Uu=!1,(o&8)!==0&&(o|=o&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=o;0<u;){var p=31-Dt(u),y=1<<p;o|=n[p],u&=~y}return Un=o,_r(),r}function pp(n,o){pe=null,G.H=Ts,o===co||o===Rr?(o=If(),De=3):o===Vl?(o=If(),De=4):De=o===mu?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Pt=o,ve===null&&(Ye=1,Vr(n,Jt(o,n.current)))}function mp(){var n=Ot.current;return n===null?!0:(Se&4194048)===Se?Qt===null:(Se&62914560)===Se||(Se&536870912)!==0?n===Qt:!1}function gp(){var n=G.H;return G.H=Ts,n===null?Ts:n}function yp(){var n=G.A;return G.A=g_,n}function jr(){Ye=4,ei||(Se&4194048)!==Se&&Ot.current!==null||(_o=!0),(ti&134217727)===0&&(Ui&134217727)===0||Ge===null||oi(Ge,Se,qt,!1)}function qu(n,o,r){var u=Ie;Ie|=2;var p=gp(),y=yp();(Ge!==n||Se!==o)&&(Wr=null,To(n,o)),o=!1;var E=Ye;e:do try{if(De!==0&&ve!==null){var T=ve,C=Pt;switch(De){case 8:Pu(),E=6;break e;case 3:case 2:case 9:case 6:Ot.current===null&&(o=!0);var O=De;if(De=0,Pt=null,wo(n,T,C,O),r&&_o){E=0;break e}break;default:O=De,De=0,Pt=null,wo(n,T,C,O)}}__(),E=Ye;break}catch(V){pp(n,V)}while(!0);return o&&n.shellSuspendCounter++,wn=Ai=null,Ie=u,G.H=p,G.A=y,ve===null&&(Ge=null,Se=0,_r()),E}function __(){for(;ve!==null;)vp(ve)}function S_(n,o){var r=Ie;Ie|=2;var u=gp(),p=yp();Ge!==n||Se!==o?(Wr=null,Qr=It()+500,To(n,o)):_o=Wo(n,o);e:do try{if(De!==0&&ve!==null){o=ve;var y=Pt;t:switch(De){case 1:De=0,Pt=null,wo(n,o,y,1);break;case 2:case 9:if(xf(y)){De=0,Pt=null,_p(o);break}o=function(){De!==2&&De!==9||Ge!==n||(De=7),gn(n)},y.then(o,o);break e;case 3:De=7;break e;case 4:De=5;break e;case 7:xf(y)?(De=0,Pt=null,_p(o)):(De=0,Pt=null,wo(n,o,y,7));break;case 5:var E=null;switch(ve.tag){case 26:E=ve.memoizedState;case 5:case 27:var T=ve;if(E?om(E):T.stateNode.complete){De=0,Pt=null;var C=T.sibling;if(C!==null)ve=C;else{var O=T.return;O!==null?(ve=O,ea(O)):ve=null}break t}}De=0,Pt=null,wo(n,o,y,5);break;case 6:De=0,Pt=null,wo(n,o,y,6);break;case 8:Pu(),Ye=6;break e;default:throw Error(s(462))}}E_();break}catch(V){pp(n,V)}while(!0);return wn=Ai=null,G.H=u,G.A=p,Ie=r,ve!==null?0:(Ge=null,Se=0,_r(),Ye)}function E_(){for(;ve!==null&&!Fv();)vp(ve)}function vp(n){var o=Bh(n.alternate,n,Un);n.memoizedProps=n.pendingProps,o===null?ea(n):ve=o}function _p(n){var o=n,r=o.alternate;switch(o.tag){case 15:case 0:o=Lh(r,o,o.pendingProps,o.type,void 0,Se);break;case 11:o=Lh(r,o,o.pendingProps,o.type.render,o.ref,Se);break;case 5:jl(o);default:Fh(r,o),o=ve=yf(o,Un),o=Bh(r,o,Un)}n.memoizedProps=n.pendingProps,o===null?ea(n):ve=o}function wo(n,o,r,u){wn=Ai=null,jl(o),fo=null,ps=0;var p=o.return;try{if(u_(n,p,o,r,Se)){Ye=1,Vr(n,Jt(r,n.current)),ve=null;return}}catch(y){if(p!==null)throw ve=p,y;Ye=1,Vr(n,Jt(r,n.current)),ve=null;return}o.flags&32768?(we||u===1?n=!0:_o||(Se&536870912)!==0?n=!1:(ei=n=!0,(u===2||u===9||u===3||u===6)&&(u=Ot.current,u!==null&&u.tag===13&&(u.flags|=16384))),Sp(o,n)):ea(o)}function ea(n){var o=n;do{if((o.flags&32768)!==0){Sp(o,ei);return}n=o.return;var r=f_(o.alternate,o,Un);if(r!==null){ve=r;return}if(o=o.sibling,o!==null){ve=o;return}ve=o=n}while(o!==null);Ye===0&&(Ye=5)}function Sp(n,o){do{var r=h_(n.alternate,n);if(r!==null){r.flags&=32767,ve=r;return}if(r=n.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!o&&(n=n.sibling,n!==null)){ve=n;return}ve=n=r}while(n!==null);Ye=6,ve=null}function Ep(n,o,r,u,p,y,E,T,C){n.cancelPendingCommit=null;do ta();while(it!==0);if((Ie&6)!==0)throw Error(s(327));if(o!==null){if(o===n.current)throw Error(s(177));if(y=o.lanes|o.childLanes,y|=Cl,e0(n,r,y,E,T,C),n===Ge&&(ve=Ge=null,Se=0),Eo=o,ii=n,kn=r,ku=y,Ou=p,cp=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,b_(ir,function(){return Cp(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=G.T,G.T=null,p=Q.p,Q.p=2,E=Ie,Ie|=4;try{p_(n,o,r)}finally{Ie=E,Q.p=p,G.T=u}}it=1,Tp(),wp(),Ap()}}function Tp(){if(it===1){it=0;var n=ii,o=Eo,r=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||r){r=G.T,G.T=null;var u=Q.p;Q.p=2;var p=Ie;Ie|=4;try{np(o,n);var y=Qu,E=lf(n.containerInfo),T=y.focusedElem,C=y.selectionRange;if(E!==T&&T&&T.ownerDocument&&af(T.ownerDocument.documentElement,T)){if(C!==null&&El(T)){var O=C.start,V=C.end;if(V===void 0&&(V=O),"selectionStart"in T)T.selectionStart=O,T.selectionEnd=Math.min(V,T.value.length);else{var $=T.ownerDocument||document,L=$&&$.defaultView||window;if(L.getSelection){var q=L.getSelection(),ee=T.textContent.length,ue=Math.min(C.start,ee),Pe=C.end===void 0?ue:Math.min(C.end,ee);!q.extend&&ue>Pe&&(E=Pe,Pe=ue,ue=E);var M=rf(T,ue),N=rf(T,Pe);if(M&&N&&(q.rangeCount!==1||q.anchorNode!==M.node||q.anchorOffset!==M.offset||q.focusNode!==N.node||q.focusOffset!==N.offset)){var k=$.createRange();k.setStart(M.node,M.offset),q.removeAllRanges(),ue>Pe?(q.addRange(k),q.extend(N.node,N.offset)):(k.setEnd(N.node,N.offset),q.addRange(k))}}}}for($=[],q=T;q=q.parentNode;)q.nodeType===1&&$.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<$.length;T++){var F=$[T];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}ha=!!Xu,Qu=Xu=null}finally{Ie=p,Q.p=u,G.T=r}}n.current=o,it=2}}function wp(){if(it===2){it=0;var n=ii,o=Eo,r=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||r){r=G.T,G.T=null;var u=Q.p;Q.p=2;var p=Ie;Ie|=4;try{Wh(n,o.alternate,o)}finally{Ie=p,Q.p=u,G.T=r}}it=3}}function Ap(){if(it===4||it===3){it=0,$v();var n=ii,o=Eo,r=kn,u=cp;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?it=5:(it=0,Eo=ii=null,bp(n,n.pendingLanes));var p=n.pendingLanes;if(p===0&&(ni=null),nl(r),o=o.stateNode,Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(Qo,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=G.T,p=Q.p,Q.p=2,G.T=null;try{for(var y=n.onRecoverableError,E=0;E<u.length;E++){var T=u[E];y(T.value,{componentStack:T.stack})}}finally{G.T=o,Q.p=p}}(kn&3)!==0&&ta(),gn(n),p=n.pendingLanes,(r&261930)!==0&&(p&42)!==0?n===Lu?Ms++:(Ms=0,Lu=n):Ms=0,Ds(0)}}function bp(n,o){(n.pooledCacheLanes&=o)===0&&(o=n.pooledCache,o!=null&&(n.pooledCache=null,fs(o)))}function ta(){return Tp(),wp(),Ap(),Cp()}function Cp(){if(it!==5)return!1;var n=ii,o=ku;ku=0;var r=nl(kn),u=G.T,p=Q.p;try{Q.p=32>r?32:r,G.T=null,r=Ou,Ou=null;var y=ii,E=kn;if(it=0,Eo=ii=null,kn=0,(Ie&6)!==0)throw Error(s(331));var T=Ie;if(Ie|=4,ap(y.current),op(y,y.current,E,r),Ie=T,Ds(0,!1),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(Qo,y)}catch{}return!0}finally{Q.p=p,G.T=u,bp(n,o)}}function Rp(n,o,r){o=Jt(r,o),o=pu(n.stateNode,o,2),n=Qn(n,o,2),n!==null&&(Zo(n,2),gn(n))}function Ue(n,o,r){if(n.tag===3)Rp(n,n,r);else for(;o!==null;){if(o.tag===3){Rp(o,n,r);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ni===null||!ni.has(u))){n=Jt(r,n),r=xh(2),u=Qn(o,r,2),u!==null&&(Nh(r,u,o,n),Zo(u,2),gn(u));break}}o=o.return}}function Gu(n,o,r){var u=n.pingCache;if(u===null){u=n.pingCache=new y_;var p=new Set;u.set(o,p)}else p=u.get(o),p===void 0&&(p=new Set,u.set(o,p));p.has(r)||(Mu=!0,p.add(r),n=T_.bind(null,n,o,r),o.then(n,n))}function T_(n,o,r){var u=n.pingCache;u!==null&&u.delete(o),n.pingedLanes|=n.suspendedLanes&r,n.warmLanes&=~r,Ge===n&&(Se&r)===r&&(Ye===4||Ye===3&&(Se&62914560)===Se&&300>It()-Xr?(Ie&2)===0&&To(n,0):Du|=r,So===Se&&(So=0)),gn(n)}function xp(n,o){o===0&&(o=Ed()),n=Ei(n,o),n!==null&&(Zo(n,o),gn(n))}function w_(n){var o=n.memoizedState,r=0;o!==null&&(r=o.retryLane),xp(n,r)}function A_(n,o){var r=0;switch(n.tag){case 31:case 13:var u=n.stateNode,p=n.memoizedState;p!==null&&(r=p.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(o),xp(n,r)}function b_(n,o){return Za(n,o)}var na=null,Ao=null,Hu=!1,ia=!1,Vu=!1,si=0;function gn(n){n!==Ao&&n.next===null&&(Ao===null?na=Ao=n:Ao=Ao.next=n),ia=!0,Hu||(Hu=!0,R_())}function Ds(n,o){if(!Vu&&ia){Vu=!0;do for(var r=!1,u=na;u!==null;){if(n!==0){var p=u.pendingLanes;if(p===0)var y=0;else{var E=u.suspendedLanes,T=u.pingedLanes;y=(1<<31-Dt(42|n)+1)-1,y&=p&~(E&~T),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(r=!0,Dp(u,y))}else y=Se,y=ar(u,u===Ge?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||Wo(u,y)||(r=!0,Dp(u,y));u=u.next}while(r);Vu=!1}}function C_(){Np()}function Np(){ia=Hu=!1;var n=0;si!==0&&P_()&&(n=si);for(var o=It(),r=null,u=na;u!==null;){var p=u.next,y=Ip(u,o);y===0?(u.next=null,r===null?na=p:r.next=p,p===null&&(Ao=r)):(r=u,(n!==0||(y&3)!==0)&&(ia=!0)),u=p}it!==0&&it!==5||Ds(n),si!==0&&(si=0)}function Ip(n,o){for(var r=n.suspendedLanes,u=n.pingedLanes,p=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var E=31-Dt(y),T=1<<E,C=p[E];C===-1?((T&r)===0||(T&u)!==0)&&(p[E]=jv(T,o)):C<=o&&(n.expiredLanes|=T),y&=~T}if(o=Ge,r=Se,r=ar(n,n===o?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,r===0||n===o&&(De===2||De===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&ja(u),n.callbackNode=null,n.callbackPriority=0;if((r&3)===0||Wo(n,r)){if(o=r&-r,o===n.callbackPriority)return o;switch(u!==null&&ja(u),nl(r)){case 2:case 8:r=_d;break;case 32:r=ir;break;case 268435456:r=Sd;break;default:r=ir}return u=Mp.bind(null,n),r=Za(r,u),n.callbackPriority=o,n.callbackNode=r,o}return u!==null&&u!==null&&ja(u),n.callbackPriority=2,n.callbackNode=null,2}function Mp(n,o){if(it!==0&&it!==5)return n.callbackNode=null,n.callbackPriority=0,null;var r=n.callbackNode;if(ta()&&n.callbackNode!==r)return null;var u=Se;return u=ar(n,n===Ge?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(fp(n,u,o),Ip(n,It()),n.callbackNode!=null&&n.callbackNode===r?Mp.bind(null,n):null)}function Dp(n,o){if(ta())return null;fp(n,o,!0)}function R_(){G_(function(){(Ie&6)!==0?Za(vd,C_):Np()})}function Bu(){if(si===0){var n=lo;n===0&&(n=or,or<<=1,(or&261888)===0&&(or=256)),si=n}return si}function Up(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:dr(""+n)}function kp(n,o){var r=o.ownerDocument.createElement("input");return r.name=o.name,r.value=o.value,n.id&&r.setAttribute("form",n.id),o.parentNode.insertBefore(r,o),n=new FormData(n),r.parentNode.removeChild(r),n}function x_(n,o,r,u,p){if(o==="submit"&&r&&r.stateNode===p){var y=Up((p[wt]||null).action),E=u.submitter;E&&(o=(o=E[wt]||null)?Up(o.formAction):E.getAttribute("formAction"),o!==null&&(y=o,E=null));var T=new mr("action","action",null,u,p);n.push({event:T,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(si!==0){var C=E?kp(p,E):new FormData(p);lu(r,{pending:!0,data:C,method:p.method,action:y},null,C)}}else typeof y=="function"&&(T.preventDefault(),C=E?kp(p,E):new FormData(p),lu(r,{pending:!0,data:C,method:p.method,action:y},y,C))},currentTarget:p}]})}}for(var zu=0;zu<bl.length;zu++){var Fu=bl[zu],N_=Fu.toLowerCase(),I_=Fu[0].toUpperCase()+Fu.slice(1);nn(N_,"on"+I_)}nn(df,"onAnimationEnd"),nn(ff,"onAnimationIteration"),nn(hf,"onAnimationStart"),nn("dblclick","onDoubleClick"),nn("focusin","onFocus"),nn("focusout","onBlur"),nn(J0,"onTransitionRun"),nn(Y0,"onTransitionStart"),nn(K0,"onTransitionCancel"),nn(pf,"onTransitionEnd"),Ki("onMouseEnter",["mouseout","mouseover"]),Ki("onMouseLeave",["mouseout","mouseover"]),Ki("onPointerEnter",["pointerout","pointerover"]),Ki("onPointerLeave",["pointerout","pointerover"]),yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Us="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),M_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Us));function Op(n,o){o=(o&4)!==0;for(var r=0;r<n.length;r++){var u=n[r],p=u.event;u=u.listeners;e:{var y=void 0;if(o)for(var E=u.length-1;0<=E;E--){var T=u[E],C=T.instance,O=T.currentTarget;if(T=T.listener,C!==y&&p.isPropagationStopped())break e;y=T,p.currentTarget=O;try{y(p)}catch(V){vr(V)}p.currentTarget=null,y=C}else for(E=0;E<u.length;E++){if(T=u[E],C=T.instance,O=T.currentTarget,T=T.listener,C!==y&&p.isPropagationStopped())break e;y=T,p.currentTarget=O;try{y(p)}catch(V){vr(V)}p.currentTarget=null,y=C}}}}function _e(n,o){var r=o[il];r===void 0&&(r=o[il]=new Set);var u=n+"__bubble";r.has(u)||(Lp(o,n,2,!1),r.add(u))}function $u(n,o,r){var u=0;o&&(u|=4),Lp(r,n,u,o)}var oa="_reactListening"+Math.random().toString(36).slice(2);function Ju(n){if(!n[oa]){n[oa]=!0,xd.forEach(function(r){r!=="selectionchange"&&(M_.has(r)||$u(r,!1,n),$u(r,!0,n))});var o=n.nodeType===9?n:n.ownerDocument;o===null||o[oa]||(o[oa]=!0,$u("selectionchange",!1,o))}}function Lp(n,o,r,u){switch(dm(o)){case 2:var p=sS;break;case 8:p=rS;break;default:p=ac}r=p.bind(null,o,r,n),p=void 0,!fl||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),u?p!==void 0?n.addEventListener(o,r,{capture:!0,passive:p}):n.addEventListener(o,r,!0):p!==void 0?n.addEventListener(o,r,{passive:p}):n.addEventListener(o,r,!1)}function Yu(n,o,r,u,p){var y=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var T=u.stateNode.containerInfo;if(T===p)break;if(E===4)for(E=u.return;E!==null;){var C=E.tag;if((C===3||C===4)&&E.stateNode.containerInfo===p)return;E=E.return}for(;T!==null;){if(E=$i(T),E===null)return;if(C=E.tag,C===5||C===6||C===26||C===27){u=y=E;continue e}T=T.parentNode}}u=u.return}Hd(function(){var O=y,V=cl(r),$=[];e:{var L=mf.get(n);if(L!==void 0){var q=mr,ee=n;switch(n){case"keypress":if(hr(r)===0)break e;case"keydown":case"keyup":q=A0;break;case"focusin":ee="focus",q=gl;break;case"focusout":ee="blur",q=gl;break;case"beforeblur":case"afterblur":q=gl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=zd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=f0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=R0;break;case df:case ff:case hf:q=m0;break;case pf:q=N0;break;case"scroll":case"scrollend":q=c0;break;case"wheel":q=M0;break;case"copy":case"cut":case"paste":q=y0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=$d;break;case"toggle":case"beforetoggle":q=U0}var ue=(o&4)!==0,Pe=!ue&&(n==="scroll"||n==="scrollend"),M=ue?L!==null?L+"Capture":null:L;ue=[];for(var N=O,k;N!==null;){var F=N;if(k=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||k===null||M===null||(F=ts(N,M),F!=null&&ue.push(ks(N,F,k))),Pe)break;N=N.return}0<ue.length&&(L=new q(L,ee,null,r,V),$.push({event:L,listeners:ue}))}}if((o&7)===0){e:{if(L=n==="mouseover"||n==="pointerover",q=n==="mouseout"||n==="pointerout",L&&r!==ul&&(ee=r.relatedTarget||r.fromElement)&&($i(ee)||ee[Fi]))break e;if((q||L)&&(L=V.window===V?V:(L=V.ownerDocument)?L.defaultView||L.parentWindow:window,q?(ee=r.relatedTarget||r.toElement,q=O,ee=ee?$i(ee):null,ee!==null&&(Pe=l(ee),ue=ee.tag,ee!==Pe||ue!==5&&ue!==27&&ue!==6)&&(ee=null)):(q=null,ee=O),q!==ee)){if(ue=zd,F="onMouseLeave",M="onMouseEnter",N="mouse",(n==="pointerout"||n==="pointerover")&&(ue=$d,F="onPointerLeave",M="onPointerEnter",N="pointer"),Pe=q==null?L:es(q),k=ee==null?L:es(ee),L=new ue(F,N+"leave",q,r,V),L.target=Pe,L.relatedTarget=k,F=null,$i(V)===O&&(ue=new ue(M,N+"enter",ee,r,V),ue.target=k,ue.relatedTarget=Pe,F=ue),Pe=F,q&&ee)t:{for(ue=D_,M=q,N=ee,k=0,F=M;F;F=ue(F))k++;F=0;for(var ae=N;ae;ae=ue(ae))F++;for(;0<k-F;)M=ue(M),k--;for(;0<F-k;)N=ue(N),F--;for(;k--;){if(M===N||N!==null&&M===N.alternate){ue=M;break t}M=ue(M),N=ue(N)}ue=null}else ue=null;q!==null&&Pp($,L,q,ue,!1),ee!==null&&Pe!==null&&Pp($,Pe,ee,ue,!0)}}e:{if(L=O?es(O):window,q=L.nodeName&&L.nodeName.toLowerCase(),q==="select"||q==="input"&&L.type==="file")var Re=jd;else if(Wd(L))if(ef)Re=z0;else{Re=V0;var ie=H0}else q=L.nodeName,!q||q.toLowerCase()!=="input"||L.type!=="checkbox"&&L.type!=="radio"?O&&ll(O.elementType)&&(Re=jd):Re=B0;if(Re&&(Re=Re(n,O))){Zd($,Re,r,V);break e}ie&&ie(n,L,O),n==="focusout"&&O&&L.type==="number"&&O.memoizedProps.value!=null&&al(L,"number",L.value)}switch(ie=O?es(O):window,n){case"focusin":(Wd(ie)||ie.contentEditable==="true")&&(eo=ie,Tl=O,us=null);break;case"focusout":us=Tl=eo=null;break;case"mousedown":wl=!0;break;case"contextmenu":case"mouseup":case"dragend":wl=!1,uf($,r,V);break;case"selectionchange":if($0)break;case"keydown":case"keyup":uf($,r,V)}var me;if(vl)e:{switch(n){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else ji?Xd(n,r)&&(Ee="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(Ee="onCompositionStart");Ee&&(Jd&&r.locale!=="ko"&&(ji||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&ji&&(me=Vd()):(zn=V,hl="value"in zn?zn.value:zn.textContent,ji=!0)),ie=sa(O,Ee),0<ie.length&&(Ee=new Fd(Ee,n,null,r,V),$.push({event:Ee,listeners:ie}),me?Ee.data=me:(me=Qd(r),me!==null&&(Ee.data=me)))),(me=O0?L0(n,r):P0(n,r))&&(Ee=sa(O,"onBeforeInput"),0<Ee.length&&(ie=new Fd("onBeforeInput","beforeinput",null,r,V),$.push({event:ie,listeners:Ee}),ie.data=me)),x_($,n,O,r,V)}Op($,o)})}function ks(n,o,r){return{instance:n,listener:o,currentTarget:r}}function sa(n,o){for(var r=o+"Capture",u=[];n!==null;){var p=n,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=ts(n,r),p!=null&&u.unshift(ks(n,p,y)),p=ts(n,o),p!=null&&u.push(ks(n,p,y))),n.tag===3)return u;n=n.return}return[]}function D_(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Pp(n,o,r,u,p){for(var y=o._reactName,E=[];r!==null&&r!==u;){var T=r,C=T.alternate,O=T.stateNode;if(T=T.tag,C!==null&&C===u)break;T!==5&&T!==26&&T!==27||O===null||(C=O,p?(O=ts(r,y),O!=null&&E.unshift(ks(r,O,C))):p||(O=ts(r,y),O!=null&&E.push(ks(r,O,C)))),r=r.return}E.length!==0&&n.push({event:o,listeners:E})}var U_=/\r\n?/g,k_=/\u0000|\uFFFD/g;function qp(n){return(typeof n=="string"?n:""+n).replace(U_,`
`).replace(k_,"")}function Gp(n,o){return o=qp(o),qp(n)===o}function Le(n,o,r,u,p,y){switch(r){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||Qi(n,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&Qi(n,""+u);break;case"className":ur(n,"class",u);break;case"tabIndex":ur(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ur(n,r,u);break;case"style":qd(n,u,y);break;case"data":if(o!=="object"){ur(n,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||r!=="href")){n.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(r);break}u=dr(""+u),n.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(r==="formAction"?(o!=="input"&&Le(n,o,"name",p.name,p,null),Le(n,o,"formEncType",p.formEncType,p,null),Le(n,o,"formMethod",p.formMethod,p,null),Le(n,o,"formTarget",p.formTarget,p,null)):(Le(n,o,"encType",p.encType,p,null),Le(n,o,"method",p.method,p,null),Le(n,o,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(r);break}u=dr(""+u),n.setAttribute(r,u);break;case"onClick":u!=null&&(n.onclick=_n);break;case"onScroll":u!=null&&_e("scroll",n);break;case"onScrollEnd":u!=null&&_e("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(r=u.__html,r!=null){if(p.children!=null)throw Error(s(60));n.innerHTML=r}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}r=dr(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,""+u):n.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,""):n.removeAttribute(r);break;case"capture":case"download":u===!0?n.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,u):n.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(r,u):n.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(r):n.setAttribute(r,u);break;case"popover":_e("beforetoggle",n),_e("toggle",n),lr(n,"popover",u);break;case"xlinkActuate":vn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":vn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":vn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":vn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":vn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":vn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":vn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":vn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":vn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":lr(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=l0.get(r)||r,lr(n,r,u))}}function Ku(n,o,r,u,p,y){switch(r){case"style":qd(n,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(r=u.__html,r!=null){if(p.children!=null)throw Error(s(60));n.innerHTML=r}}break;case"children":typeof u=="string"?Qi(n,u):(typeof u=="number"||typeof u=="bigint")&&Qi(n,""+u);break;case"onScroll":u!=null&&_e("scroll",n);break;case"onScrollEnd":u!=null&&_e("scrollend",n);break;case"onClick":u!=null&&(n.onclick=_n);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Nd.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(p=r.endsWith("Capture"),o=r.slice(2,p?r.length-7:void 0),y=n[wt]||null,y=y!=null?y[r]:null,typeof y=="function"&&n.removeEventListener(o,y,p),typeof u=="function")){typeof y!="function"&&y!==null&&(r in n?n[r]=null:n.hasAttribute(r)&&n.removeAttribute(r)),n.addEventListener(o,u,p);break e}r in n?n[r]=u:u===!0?n.setAttribute(r,""):lr(n,r,u)}}}function ht(n,o,r){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_e("error",n),_e("load",n);var u=!1,p=!1,y;for(y in r)if(r.hasOwnProperty(y)){var E=r[y];if(E!=null)switch(y){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:Le(n,o,y,E,r,null)}}p&&Le(n,o,"srcSet",r.srcSet,r,null),u&&Le(n,o,"src",r.src,r,null);return;case"input":_e("invalid",n);var T=y=E=p=null,C=null,O=null;for(u in r)if(r.hasOwnProperty(u)){var V=r[u];if(V!=null)switch(u){case"name":p=V;break;case"type":E=V;break;case"checked":C=V;break;case"defaultChecked":O=V;break;case"value":y=V;break;case"defaultValue":T=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(s(137,o));break;default:Le(n,o,u,V,r,null)}}kd(n,y,T,C,O,E,p,!1);return;case"select":_e("invalid",n),u=E=y=null;for(p in r)if(r.hasOwnProperty(p)&&(T=r[p],T!=null))switch(p){case"value":y=T;break;case"defaultValue":E=T;break;case"multiple":u=T;default:Le(n,o,p,T,r,null)}o=y,r=E,n.multiple=!!u,o!=null?Xi(n,!!u,o,!1):r!=null&&Xi(n,!!u,r,!0);return;case"textarea":_e("invalid",n),y=p=u=null;for(E in r)if(r.hasOwnProperty(E)&&(T=r[E],T!=null))switch(E){case"value":u=T;break;case"defaultValue":p=T;break;case"children":y=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:Le(n,o,E,T,r,null)}Ld(n,u,p,y);return;case"option":for(C in r)if(r.hasOwnProperty(C)&&(u=r[C],u!=null))switch(C){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Le(n,o,C,u,r,null)}return;case"dialog":_e("beforetoggle",n),_e("toggle",n),_e("cancel",n),_e("close",n);break;case"iframe":case"object":_e("load",n);break;case"video":case"audio":for(u=0;u<Us.length;u++)_e(Us[u],n);break;case"image":_e("error",n),_e("load",n);break;case"details":_e("toggle",n);break;case"embed":case"source":case"link":_e("error",n),_e("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(O in r)if(r.hasOwnProperty(O)&&(u=r[O],u!=null))switch(O){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:Le(n,o,O,u,r,null)}return;default:if(ll(o)){for(V in r)r.hasOwnProperty(V)&&(u=r[V],u!==void 0&&Ku(n,o,V,u,r,void 0));return}}for(T in r)r.hasOwnProperty(T)&&(u=r[T],u!=null&&Le(n,o,T,u,r,null))}function O_(n,o,r,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,E=null,T=null,C=null,O=null,V=null;for(q in r){var $=r[q];if(r.hasOwnProperty(q)&&$!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":C=$;default:u.hasOwnProperty(q)||Le(n,o,q,null,u,$)}}for(var L in u){var q=u[L];if($=r[L],u.hasOwnProperty(L)&&(q!=null||$!=null))switch(L){case"type":y=q;break;case"name":p=q;break;case"checked":O=q;break;case"defaultChecked":V=q;break;case"value":E=q;break;case"defaultValue":T=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,o));break;default:q!==$&&Le(n,o,L,q,u,$)}}rl(n,E,T,C,O,V,y,p);return;case"select":q=E=T=L=null;for(y in r)if(C=r[y],r.hasOwnProperty(y)&&C!=null)switch(y){case"value":break;case"multiple":q=C;default:u.hasOwnProperty(y)||Le(n,o,y,null,u,C)}for(p in u)if(y=u[p],C=r[p],u.hasOwnProperty(p)&&(y!=null||C!=null))switch(p){case"value":L=y;break;case"defaultValue":T=y;break;case"multiple":E=y;default:y!==C&&Le(n,o,p,y,u,C)}o=T,r=E,u=q,L!=null?Xi(n,!!r,L,!1):!!u!=!!r&&(o!=null?Xi(n,!!r,o,!0):Xi(n,!!r,r?[]:"",!1));return;case"textarea":q=L=null;for(T in r)if(p=r[T],r.hasOwnProperty(T)&&p!=null&&!u.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Le(n,o,T,null,u,p)}for(E in u)if(p=u[E],y=r[E],u.hasOwnProperty(E)&&(p!=null||y!=null))switch(E){case"value":L=p;break;case"defaultValue":q=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==y&&Le(n,o,E,p,u,y)}Od(n,L,q);return;case"option":for(var ee in r)if(L=r[ee],r.hasOwnProperty(ee)&&L!=null&&!u.hasOwnProperty(ee))switch(ee){case"selected":n.selected=!1;break;default:Le(n,o,ee,null,u,L)}for(C in u)if(L=u[C],q=r[C],u.hasOwnProperty(C)&&L!==q&&(L!=null||q!=null))switch(C){case"selected":n.selected=L&&typeof L!="function"&&typeof L!="symbol";break;default:Le(n,o,C,L,u,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ue in r)L=r[ue],r.hasOwnProperty(ue)&&L!=null&&!u.hasOwnProperty(ue)&&Le(n,o,ue,null,u,L);for(O in u)if(L=u[O],q=r[O],u.hasOwnProperty(O)&&L!==q&&(L!=null||q!=null))switch(O){case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(s(137,o));break;default:Le(n,o,O,L,u,q)}return;default:if(ll(o)){for(var Pe in r)L=r[Pe],r.hasOwnProperty(Pe)&&L!==void 0&&!u.hasOwnProperty(Pe)&&Ku(n,o,Pe,void 0,u,L);for(V in u)L=u[V],q=r[V],!u.hasOwnProperty(V)||L===q||L===void 0&&q===void 0||Ku(n,o,V,L,u,q);return}}for(var M in r)L=r[M],r.hasOwnProperty(M)&&L!=null&&!u.hasOwnProperty(M)&&Le(n,o,M,null,u,L);for($ in u)L=u[$],q=r[$],!u.hasOwnProperty($)||L===q||L==null&&q==null||Le(n,o,$,L,u,q)}function Hp(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function L_(){if(typeof performance.getEntriesByType=="function"){for(var n=0,o=0,r=performance.getEntriesByType("resource"),u=0;u<r.length;u++){var p=r[u],y=p.transferSize,E=p.initiatorType,T=p.duration;if(y&&T&&Hp(E)){for(E=0,T=p.responseEnd,u+=1;u<r.length;u++){var C=r[u],O=C.startTime;if(O>T)break;var V=C.transferSize,$=C.initiatorType;V&&Hp($)&&(C=C.responseEnd,E+=V*(C<T?1:(T-O)/(C-O)))}if(--u,o+=8*(y+E)/(p.duration/1e3),n++,10<n)break}}if(0<n)return o/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Xu=null,Qu=null;function ra(n){return n.nodeType===9?n:n.ownerDocument}function Vp(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Bp(n,o){if(n===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&o==="foreignObject"?0:n}function Wu(n,o){return n==="textarea"||n==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Zu=null;function P_(){var n=window.event;return n&&n.type==="popstate"?n===Zu?!1:(Zu=n,!0):(Zu=null,!1)}var zp=typeof setTimeout=="function"?setTimeout:void 0,q_=typeof clearTimeout=="function"?clearTimeout:void 0,Fp=typeof Promise=="function"?Promise:void 0,G_=typeof queueMicrotask=="function"?queueMicrotask:typeof Fp<"u"?function(n){return Fp.resolve(null).then(n).catch(H_)}:zp;function H_(n){setTimeout(function(){throw n})}function ri(n){return n==="head"}function $p(n,o){var r=o,u=0;do{var p=r.nextSibling;if(n.removeChild(r),p&&p.nodeType===8)if(r=p.data,r==="/$"||r==="/&"){if(u===0){n.removeChild(p),xo(o);return}u--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")u++;else if(r==="html")Os(n.ownerDocument.documentElement);else if(r==="head"){r=n.ownerDocument.head,Os(r);for(var y=r.firstChild;y;){var E=y.nextSibling,T=y.nodeName;y[jo]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&y.rel.toLowerCase()==="stylesheet"||r.removeChild(y),y=E}}else r==="body"&&Os(n.ownerDocument.body);r=p}while(r);xo(o)}function Jp(n,o){var r=n;n=0;do{var u=r.nextSibling;if(r.nodeType===1?o?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(o?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(n===0)break;n--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||n++;r=u}while(r)}function ju(n){var o=n.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var r=o;switch(o=o.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":ju(r),ol(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}n.removeChild(r)}}function V_(n,o,r,u){for(;n.nodeType===1;){var p=r;if(n.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[jo])switch(o){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==p.rel||n.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||n.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||n.getAttribute("title")!==(p.title==null?null:p.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(p.src==null?null:p.src)||n.getAttribute("type")!==(p.type==null?null:p.type)||n.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(o==="input"&&n.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=Wt(n.nextSibling),n===null)break}return null}function B_(n,o,r){if(o==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=Wt(n.nextSibling),n===null))return null;return n}function Yp(n,o){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Wt(n.nextSibling),n===null))return null;return n}function ec(n){return n.data==="$?"||n.data==="$~"}function tc(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function z_(n,o){var r=n.ownerDocument;if(n.data==="$~")n._reactRetry=o;else if(n.data!=="$?"||r.readyState!=="loading")o();else{var u=function(){o(),r.removeEventListener("DOMContentLoaded",u)};r.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Wt(n){for(;n!=null;n=n.nextSibling){var o=n.nodeType;if(o===1||o===3)break;if(o===8){if(o=n.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return n}var nc=null;function Kp(n){n=n.nextSibling;for(var o=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"||r==="/&"){if(o===0)return Wt(n.nextSibling);o--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||o++}n=n.nextSibling}return null}function Xp(n){n=n.previousSibling;for(var o=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(o===0)return n;o--}else r!=="/$"&&r!=="/&"||o++}n=n.previousSibling}return null}function Qp(n,o,r){switch(o=ra(r),n){case"html":if(n=o.documentElement,!n)throw Error(s(452));return n;case"head":if(n=o.head,!n)throw Error(s(453));return n;case"body":if(n=o.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Os(n){for(var o=n.attributes;o.length;)n.removeAttributeNode(o[0]);ol(n)}var Zt=new Map,Wp=new Set;function aa(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var On=Q.d;Q.d={f:F_,r:$_,D:J_,C:Y_,L:K_,m:X_,X:W_,S:Q_,M:Z_};function F_(){var n=On.f(),o=Zr();return n||o}function $_(n){var o=Ji(n);o!==null&&o.tag===5&&o.type==="form"?ph(o):On.r(n)}var bo=typeof document>"u"?null:document;function Zp(n,o,r){var u=bo;if(u&&typeof o=="string"&&o){var p=Ft(o);p='link[rel="'+n+'"][href="'+p+'"]',typeof r=="string"&&(p+='[crossorigin="'+r+'"]'),Wp.has(p)||(Wp.add(p),n={rel:n,crossOrigin:r,href:o},u.querySelector(p)===null&&(o=u.createElement("link"),ht(o,"link",n),rt(o),u.head.appendChild(o)))}}function J_(n){On.D(n),Zp("dns-prefetch",n,null)}function Y_(n,o){On.C(n,o),Zp("preconnect",n,o)}function K_(n,o,r){On.L(n,o,r);var u=bo;if(u&&n&&o){var p='link[rel="preload"][as="'+Ft(o)+'"]';o==="image"&&r&&r.imageSrcSet?(p+='[imagesrcset="'+Ft(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(p+='[imagesizes="'+Ft(r.imageSizes)+'"]')):p+='[href="'+Ft(n)+'"]';var y=p;switch(o){case"style":y=Co(n);break;case"script":y=Ro(n)}Zt.has(y)||(n=_({rel:"preload",href:o==="image"&&r&&r.imageSrcSet?void 0:n,as:o},r),Zt.set(y,n),u.querySelector(p)!==null||o==="style"&&u.querySelector(Ls(y))||o==="script"&&u.querySelector(Ps(y))||(o=u.createElement("link"),ht(o,"link",n),rt(o),u.head.appendChild(o)))}}function X_(n,o){On.m(n,o);var r=bo;if(r&&n){var u=o&&typeof o.as=="string"?o.as:"script",p='link[rel="modulepreload"][as="'+Ft(u)+'"][href="'+Ft(n)+'"]',y=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Ro(n)}if(!Zt.has(y)&&(n=_({rel:"modulepreload",href:n},o),Zt.set(y,n),r.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Ps(y)))return}u=r.createElement("link"),ht(u,"link",n),rt(u),r.head.appendChild(u)}}}function Q_(n,o,r){On.S(n,o,r);var u=bo;if(u&&n){var p=Yi(u).hoistableStyles,y=Co(n);o=o||"default";var E=p.get(y);if(!E){var T={loading:0,preload:null};if(E=u.querySelector(Ls(y)))T.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":o},r),(r=Zt.get(y))&&ic(n,r);var C=E=u.createElement("link");rt(C),ht(C,"link",n),C._p=new Promise(function(O,V){C.onload=O,C.onerror=V}),C.addEventListener("load",function(){T.loading|=1}),C.addEventListener("error",function(){T.loading|=2}),T.loading|=4,la(E,o,u)}E={type:"stylesheet",instance:E,count:1,state:T},p.set(y,E)}}}function W_(n,o){On.X(n,o);var r=bo;if(r&&n){var u=Yi(r).hoistableScripts,p=Ro(n),y=u.get(p);y||(y=r.querySelector(Ps(p)),y||(n=_({src:n,async:!0},o),(o=Zt.get(p))&&oc(n,o),y=r.createElement("script"),rt(y),ht(y,"link",n),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function Z_(n,o){On.M(n,o);var r=bo;if(r&&n){var u=Yi(r).hoistableScripts,p=Ro(n),y=u.get(p);y||(y=r.querySelector(Ps(p)),y||(n=_({src:n,async:!0,type:"module"},o),(o=Zt.get(p))&&oc(n,o),y=r.createElement("script"),rt(y),ht(y,"link",n),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function jp(n,o,r,u){var p=(p=Z.current)?aa(p):null;if(!p)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(o=Co(r.href),r=Yi(p).hoistableStyles,u=r.get(o),u||(u={type:"style",instance:null,count:0,state:null},r.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){n=Co(r.href);var y=Yi(p).hoistableStyles,E=y.get(n);if(E||(p=p.ownerDocument||p,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,E),(y=p.querySelector(Ls(n)))&&!y._p&&(E.instance=y,E.state.loading=5),Zt.has(n)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Zt.set(n,r),y||j_(p,n,r,E.state))),o&&u===null)throw Error(s(528,""));return E}if(o&&u!==null)throw Error(s(529,""));return null;case"script":return o=r.async,r=r.src,typeof r=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Ro(r),r=Yi(p).hoistableScripts,u=r.get(o),u||(u={type:"script",instance:null,count:0,state:null},r.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function Co(n){return'href="'+Ft(n)+'"'}function Ls(n){return'link[rel="stylesheet"]['+n+"]"}function em(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function j_(n,o,r,u){n.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=n.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),ht(o,"link",r),rt(o),n.head.appendChild(o))}function Ro(n){return'[src="'+Ft(n)+'"]'}function Ps(n){return"script[async]"+n}function tm(n,o,r){if(o.count++,o.instance===null)switch(o.type){case"style":var u=n.querySelector('style[data-href~="'+Ft(r.href)+'"]');if(u)return o.instance=u,rt(u),u;var p=_({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),rt(u),ht(u,"style",p),la(u,r.precedence,n),o.instance=u;case"stylesheet":p=Co(r.href);var y=n.querySelector(Ls(p));if(y)return o.state.loading|=4,o.instance=y,rt(y),y;u=em(r),(p=Zt.get(p))&&ic(u,p),y=(n.ownerDocument||n).createElement("link"),rt(y);var E=y;return E._p=new Promise(function(T,C){E.onload=T,E.onerror=C}),ht(y,"link",u),o.state.loading|=4,la(y,r.precedence,n),o.instance=y;case"script":return y=Ro(r.src),(p=n.querySelector(Ps(y)))?(o.instance=p,rt(p),p):(u=r,(p=Zt.get(y))&&(u=_({},r),oc(u,p)),n=n.ownerDocument||n,p=n.createElement("script"),rt(p),ht(p,"link",u),n.head.appendChild(p),o.instance=p);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,la(u,r.precedence,n));return o.instance}function la(n,o,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,y=p,E=0;E<u.length;E++){var T=u[E];if(T.dataset.precedence===o)y=T;else if(y!==p)break}y?y.parentNode.insertBefore(n,y.nextSibling):(o=r.nodeType===9?r.head:r,o.insertBefore(n,o.firstChild))}function ic(n,o){n.crossOrigin==null&&(n.crossOrigin=o.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=o.referrerPolicy),n.title==null&&(n.title=o.title)}function oc(n,o){n.crossOrigin==null&&(n.crossOrigin=o.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=o.referrerPolicy),n.integrity==null&&(n.integrity=o.integrity)}var ua=null;function nm(n,o,r){if(ua===null){var u=new Map,p=ua=new Map;p.set(r,u)}else p=ua,u=p.get(r),u||(u=new Map,p.set(r,u));if(u.has(n))return u;for(u.set(n,null),r=r.getElementsByTagName(n),p=0;p<r.length;p++){var y=r[p];if(!(y[jo]||y[ut]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var E=y.getAttribute(o)||"";E=n+E;var T=u.get(E);T?T.push(y):u.set(E,[y])}}return u}function im(n,o,r){n=n.ownerDocument||n,n.head.insertBefore(r,o==="title"?n.querySelector("head > title"):null)}function eS(n,o,r){if(r===1||o.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return n=o.disabled,typeof o.precedence=="string"&&n==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function om(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function tS(n,o,r,u){if(r.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var p=Co(u.href),y=o.querySelector(Ls(p));if(y){o=y._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(n.count++,n=ca.bind(n),o.then(n,n)),r.state.loading|=4,r.instance=y,rt(y);return}y=o.ownerDocument||o,u=em(u),(p=Zt.get(p))&&ic(u,p),y=y.createElement("link"),rt(y);var E=y;E._p=new Promise(function(T,C){E.onload=T,E.onerror=C}),ht(y,"link",u),r.instance=y}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(r,o),(o=r.state.preload)&&(r.state.loading&3)===0&&(n.count++,r=ca.bind(n),o.addEventListener("load",r),o.addEventListener("error",r))}}var sc=0;function nS(n,o){return n.stylesheets&&n.count===0&&fa(n,n.stylesheets),0<n.count||0<n.imgCount?function(r){var u=setTimeout(function(){if(n.stylesheets&&fa(n,n.stylesheets),n.unsuspend){var y=n.unsuspend;n.unsuspend=null,y()}},6e4+o);0<n.imgBytes&&sc===0&&(sc=62500*L_());var p=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&fa(n,n.stylesheets),n.unsuspend)){var y=n.unsuspend;n.unsuspend=null,y()}},(n.imgBytes>sc?50:800)+o);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function ca(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)fa(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var da=null;function fa(n,o){n.stylesheets=null,n.unsuspend!==null&&(n.count++,da=new Map,o.forEach(iS,n),da=null,ca.call(n))}function iS(n,o){if(!(o.state.loading&4)){var r=da.get(n);if(r)var u=r.get(null);else{r=new Map,da.set(n,r);for(var p=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var E=p[y];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(r.set(E.dataset.precedence,E),u=E)}u&&r.set(null,u)}p=o.instance,E=p.getAttribute("data-precedence"),y=r.get(E)||u,y===u&&r.set(null,p),r.set(E,p),this.count++,u=ca.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),y?y.parentNode.insertBefore(p,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(p,n.firstChild)),o.state.loading|=4}}var qs={$$typeof:D,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function oS(n,o,r,u,p,y,E,T,C){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=el(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=el(0),this.hiddenUpdates=el(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function sm(n,o,r,u,p,y,E,T,C,O,V,$){return n=new oS(n,o,r,E,C,O,V,$,T),o=1,y===!0&&(o|=24),y=kt(3,null,null,o),n.current=y,y.stateNode=n,o=ql(),o.refCount++,n.pooledCache=o,o.refCount++,y.memoizedState={element:u,isDehydrated:r,cache:o},Bl(y),n}function rm(n){return n?(n=io,n):io}function am(n,o,r,u,p,y){p=rm(p),u.context===null?u.context=p:u.pendingContext=p,u=Xn(o),u.payload={element:r},y=y===void 0?null:y,y!==null&&(u.callback=y),r=Qn(n,u,o),r!==null&&(Nt(r,n,o),gs(r,n,o))}function lm(n,o){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<o?r:o}}function rc(n,o){lm(n,o),(n=n.alternate)&&lm(n,o)}function um(n){if(n.tag===13||n.tag===31){var o=Ei(n,67108864);o!==null&&Nt(o,n,67108864),rc(n,67108864)}}function cm(n){if(n.tag===13||n.tag===31){var o=Gt();o=tl(o);var r=Ei(n,o);r!==null&&Nt(r,n,o),rc(n,o)}}var ha=!0;function sS(n,o,r,u){var p=G.T;G.T=null;var y=Q.p;try{Q.p=2,ac(n,o,r,u)}finally{Q.p=y,G.T=p}}function rS(n,o,r,u){var p=G.T;G.T=null;var y=Q.p;try{Q.p=8,ac(n,o,r,u)}finally{Q.p=y,G.T=p}}function ac(n,o,r,u){if(ha){var p=lc(u);if(p===null)Yu(n,o,u,pa,r),fm(n,u);else if(lS(p,n,o,r,u))u.stopPropagation();else if(fm(n,u),o&4&&-1<aS.indexOf(n)){for(;p!==null;){var y=Ji(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var E=gi(y.pendingLanes);if(E!==0){var T=y;for(T.pendingLanes|=2,T.entangledLanes|=2;E;){var C=1<<31-Dt(E);T.entanglements[1]|=C,E&=~C}gn(y),(Ie&6)===0&&(Qr=It()+500,Ds(0))}}break;case 31:case 13:T=Ei(y,2),T!==null&&Nt(T,y,2),Zr(),rc(y,2)}if(y=lc(u),y===null&&Yu(n,o,u,pa,r),y===p)break;p=y}p!==null&&u.stopPropagation()}else Yu(n,o,u,null,r)}}function lc(n){return n=cl(n),uc(n)}var pa=null;function uc(n){if(pa=null,n=$i(n),n!==null){var o=l(n);if(o===null)n=null;else{var r=o.tag;if(r===13){if(n=c(o),n!==null)return n;n=null}else if(r===31){if(n=h(o),n!==null)return n;n=null}else if(r===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null)}}return pa=n,null}function dm(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Jv()){case vd:return 2;case _d:return 8;case ir:case Yv:return 32;case Sd:return 268435456;default:return 32}default:return 32}}var cc=!1,ai=null,li=null,ui=null,Gs=new Map,Hs=new Map,ci=[],aS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function fm(n,o){switch(n){case"focusin":case"focusout":ai=null;break;case"dragenter":case"dragleave":li=null;break;case"mouseover":case"mouseout":ui=null;break;case"pointerover":case"pointerout":Gs.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hs.delete(o.pointerId)}}function Vs(n,o,r,u,p,y){return n===null||n.nativeEvent!==y?(n={blockedOn:o,domEventName:r,eventSystemFlags:u,nativeEvent:y,targetContainers:[p]},o!==null&&(o=Ji(o),o!==null&&um(o)),n):(n.eventSystemFlags|=u,o=n.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),n)}function lS(n,o,r,u,p){switch(o){case"focusin":return ai=Vs(ai,n,o,r,u,p),!0;case"dragenter":return li=Vs(li,n,o,r,u,p),!0;case"mouseover":return ui=Vs(ui,n,o,r,u,p),!0;case"pointerover":var y=p.pointerId;return Gs.set(y,Vs(Gs.get(y)||null,n,o,r,u,p)),!0;case"gotpointercapture":return y=p.pointerId,Hs.set(y,Vs(Hs.get(y)||null,n,o,r,u,p)),!0}return!1}function hm(n){var o=$i(n.target);if(o!==null){var r=l(o);if(r!==null){if(o=r.tag,o===13){if(o=c(r),o!==null){n.blockedOn=o,Cd(n.priority,function(){cm(r)});return}}else if(o===31){if(o=h(r),o!==null){n.blockedOn=o,Cd(n.priority,function(){cm(r)});return}}else if(o===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ma(n){if(n.blockedOn!==null)return!1;for(var o=n.targetContainers;0<o.length;){var r=lc(n.nativeEvent);if(r===null){r=n.nativeEvent;var u=new r.constructor(r.type,r);ul=u,r.target.dispatchEvent(u),ul=null}else return o=Ji(r),o!==null&&um(o),n.blockedOn=r,!1;o.shift()}return!0}function pm(n,o,r){ma(n)&&r.delete(o)}function uS(){cc=!1,ai!==null&&ma(ai)&&(ai=null),li!==null&&ma(li)&&(li=null),ui!==null&&ma(ui)&&(ui=null),Gs.forEach(pm),Hs.forEach(pm)}function ga(n,o){n.blockedOn===o&&(n.blockedOn=null,cc||(cc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,uS)))}var ya=null;function mm(n){ya!==n&&(ya=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ya===n&&(ya=null);for(var o=0;o<n.length;o+=3){var r=n[o],u=n[o+1],p=n[o+2];if(typeof u!="function"){if(uc(u||r)===null)continue;break}var y=Ji(r);y!==null&&(n.splice(o,3),o-=3,lu(y,{pending:!0,data:p,method:r.method,action:u},u,p))}}))}function xo(n){function o(C){return ga(C,n)}ai!==null&&ga(ai,n),li!==null&&ga(li,n),ui!==null&&ga(ui,n),Gs.forEach(o),Hs.forEach(o);for(var r=0;r<ci.length;r++){var u=ci[r];u.blockedOn===n&&(u.blockedOn=null)}for(;0<ci.length&&(r=ci[0],r.blockedOn===null);)hm(r),r.blockedOn===null&&ci.shift();if(r=(n.ownerDocument||n).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var p=r[u],y=r[u+1],E=p[wt]||null;if(typeof y=="function")E||mm(r);else if(E){var T=null;if(y&&y.hasAttribute("formAction")){if(p=y,E=y[wt]||null)T=E.formAction;else if(uc(p)!==null)continue}else T=E.action;typeof T=="function"?r[u+1]=T:(r.splice(u,3),u-=3),mm(r)}}}function gm(){function n(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(E){return p=E})},focusReset:"manual",scroll:"manual"})}function o(){p!==null&&(p(),p=null),u||setTimeout(r,20)}function r(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(r,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),p!==null&&(p(),p=null)}}}function dc(n){this._internalRoot=n}va.prototype.render=dc.prototype.render=function(n){var o=this._internalRoot;if(o===null)throw Error(s(409));var r=o.current,u=Gt();am(r,u,n,o,null,null)},va.prototype.unmount=dc.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var o=n.containerInfo;am(n.current,2,null,n,null,null),Zr(),o[Fi]=null}};function va(n){this._internalRoot=n}va.prototype.unstable_scheduleHydration=function(n){if(n){var o=bd();n={blockedOn:null,target:n,priority:o};for(var r=0;r<ci.length&&o!==0&&o<ci[r].priority;r++);ci.splice(r,0,n),r===0&&hm(n)}};var ym=e.version;if(ym!=="19.2.3")throw Error(s(527,ym,"19.2.3"));Q.findDOMNode=function(n){var o=n._reactInternals;if(o===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=m(o),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var cS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _a=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_a.isDisabled&&_a.supportsFiber)try{Qo=_a.inject(cS),Mt=_a}catch{}}return zs.createRoot=function(n,o){if(!a(n))throw Error(s(299));var r=!1,u="",p=Ah,y=bh,E=Ch;return o!=null&&(o.unstable_strictMode===!0&&(r=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError)),o=sm(n,1,!1,null,null,r,u,null,p,y,E,gm),n[Fi]=o.current,Ju(n),new dc(o)},zs.hydrateRoot=function(n,o,r){if(!a(n))throw Error(s(299));var u=!1,p="",y=Ah,E=bh,T=Ch,C=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(E=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError),r.formState!==void 0&&(C=r.formState)),o=sm(n,1,!0,o,r??null,u,p,C,y,E,T,gm),o.context=rm(null),r=o.current,u=Gt(),u=tl(u),p=Xn(u),p.callback=null,Qn(r,p,u),r=u,o.current.lanes=r,Zo(o,r),gn(o),n[Fi]=o.current,Ju(n),new va(o)},zs.version="19.2.3",zs}var Rm;function ES(){if(Rm)return pc.exports;Rm=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),pc.exports=SS(),pc.exports}var TS=ES();const wS=Dy(TS);var Vi=(t=>(t.BOVINE="Bovine (Cattle)",t.EQUINE="Equine (Horse)",t.CANINE="Canine (Dog)",t.FELINE="Feline (Cat)",t.OVINE="Ovine (Sheep)",t.CAPRINE="Caprine (Goat)",t.PORCINE="Porcine (Pig)",t.AVIAN="Avian (Bird)",t.AQUATIC="Aquatic",t.OTHER="Other",t))(Vi||{}),un=(t=>(t.MEDICINE="Medicine",t.DRUG="Drug",t.VACCINE="Vaccine",t))(un||{});const AS=[{id:"1",name:"Foot and Mouth Disease",causalAgent:"Aphthovirus of the family Picornaviridae",createdAt:Date.now()-1e6,searchCount:150,hosts:[{animalName:Vi.BOVINE,cause:"Direct or indirect contact with infected animals or contaminated environments.",clinicalSigns:"Fever, blisters in the mouth and on feet, excessive salivation, lameness.",diagnosis:"Clinical inspection, ELISA for antigen detection, PCR.",treatments:[{id:"t1",type:un.MEDICINE,name:"Flunixin Meglumine",dose:"1.1 to 2.2 mg/kg",frequency:"Once daily",duration:"3-5 days",notes:"Supportive care to manage fever and pain."},{id:"t2",type:un.VACCINE,name:"Inactivated FMD Vaccine",dose:"2ml",frequency:"Every 6 months",duration:"Continuous",notes:"Essential for herd immunity in endemic areas."}],prevention:"Strict quarantine, movement controls, vaccination programs.",precaution:"Use protective clothing and disinfect equipment after contact with suspect animals.",epidemiology:"Global distribution with endemic regions in Africa, Asia, and South America."}]},{id:"2",name:"Rabies",causalAgent:"Rabies virus (Lyssavirus)",createdAt:Date.now()-5e6,searchCount:320,hosts:[{animalName:Vi.CANINE,cause:"Bite from an infected animal (saliva).",clinicalSigns:"Behavioral changes, aggression, hydrophobia, paralysis, death.",diagnosis:"Direct fluorescent antibody (DFA) test on brain tissue (post-mortem).",treatments:[],prevention:"Mandatory vaccination of pets, wildlife baiting.",precaution:"Avoid direct contact with saliva or brain tissue of suspect animals; report all bites immediately.",epidemiology:"Worldwide except for certain island nations like Australia and Japan."}]}],bS=[{label:"Newest",value:"newest"},{label:"Oldest",value:"oldest"},{label:"Most Searched",value:"most-searched"},{label:"Alphabetical",value:"alphabetical"}],CS=Object.values(Vi);function Ha(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(i[s[a]]=t[s[a]]);return i}function RS(t,e,i,s){function a(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function h(v){try{m(s.next(v))}catch(_){c(_)}}function g(v){try{m(s.throw(v))}catch(_){c(_)}}function m(v){v.done?l(v.value):a(v.value).then(h,g)}m((s=s.apply(t,e||[])).next())})}const xS=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class nd extends Error{constructor(e,i="FunctionsError",s){super(e),this.name=i,this.context=s}}class NS extends nd{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class xm extends nd{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Nm extends nd{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ic;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ic||(Ic={}));class IS{constructor(e,{headers:i={},customFetch:s,region:a=Ic.Any}={}){this.url=e,this.headers=i,this.region=a,this.fetch=xS(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return RS(this,arguments,void 0,function*(i,s={}){var a;let l,c;try{const{headers:h,method:g,body:m,signal:v,timeout:_}=s;let S={},{region:w}=s;w||(w=this.region);const b=new URL(`${this.url}/${i}`);w&&w!=="any"&&(S["x-region"]=w,b.searchParams.set("forceFunctionRegion",w));let R;m&&(h&&!Object.prototype.hasOwnProperty.call(h,"Content-Type")||!h)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(S["Content-Type"]="application/octet-stream",R=m):typeof m=="string"?(S["Content-Type"]="text/plain",R=m):typeof FormData<"u"&&m instanceof FormData?R=m:(S["Content-Type"]="application/json",R=JSON.stringify(m)):R=m;let x=v;_&&(c=new AbortController,l=setTimeout(()=>c.abort(),_),v?(x=c.signal,v.addEventListener("abort",()=>c.abort())):x=c.signal);const U=yield this.fetch(b.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},S),this.headers),h),body:R,signal:x}).catch(X=>{throw new NS(X)}),H=U.headers.get("x-relay-error");if(H&&H==="true")throw new xm(U);if(!U.ok)throw new Nm(U);let D=((a=U.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),Y;return D==="application/json"?Y=yield U.json():D==="application/octet-stream"||D==="application/pdf"?Y=yield U.blob():D==="text/event-stream"?Y=U:D==="multipart/form-data"?Y=yield U.formData():Y=yield U.text(),{data:Y,error:null,response:U}}catch(h){return{data:null,error:h,response:h instanceof Nm||h instanceof xm?h.context:void 0}}finally{l&&clearTimeout(l)}})}}var MS=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},DS=class{constructor(t){var e,i;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(i=t.isMaybeSingle)!==null&&i!==void 0?i:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var i=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{let c=null,h=null,g=null,m=l.status,v=l.statusText;if(l.ok){var _,S;if(i.method!=="HEAD"){var w;const U=await l.text();U===""||(i.headers.get("Accept")==="text/csv"||i.headers.get("Accept")&&(!((w=i.headers.get("Accept"))===null||w===void 0)&&w.includes("application/vnd.pgrst.plan+text"))?h=U:h=JSON.parse(U))}const R=(_=i.headers.get("Prefer"))===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),x=(S=l.headers.get("content-range"))===null||S===void 0?void 0:S.split("/");R&&x&&x.length>1&&(g=parseInt(x[1])),i.isMaybeSingle&&i.method==="GET"&&Array.isArray(h)&&(h.length>1?(c={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,g=null,m=406,v="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{var b;const R=await l.text();try{c=JSON.parse(R),Array.isArray(c)&&l.status===404&&(h=[],c=null,m=200,v="OK")}catch{l.status===404&&R===""?(m=204,v="No Content"):c={message:R}}if(c&&i.isMaybeSingle&&(!(c==null||(b=c.details)===null||b===void 0)&&b.includes("0 rows"))&&(c=null,m=200,v="OK"),c&&i.shouldThrowOnError)throw new MS(c)}return{error:c,data:h,count:g,status:m,statusText:v}});return this.shouldThrowOnError||(a=a.catch(l=>{var c;let h="";const g=l==null?void 0:l.cause;if(g){var m,v,_,S;const b=(m=g==null?void 0:g.message)!==null&&m!==void 0?m:"",R=(v=g==null?void 0:g.code)!==null&&v!==void 0?v:"";h=`${(_=l==null?void 0:l.name)!==null&&_!==void 0?_:"FetchError"}: ${l==null?void 0:l.message}`,h+=`

Caused by: ${(S=g==null?void 0:g.name)!==null&&S!==void 0?S:"Error"}: ${b}`,R&&(h+=` (${R})`),g!=null&&g.stack&&(h+=`
${g.stack}`)}else{var w;h=(w=l==null?void 0:l.stack)!==null&&w!==void 0?w:""}return{error:{message:`${(c=l==null?void 0:l.name)!==null&&c!==void 0?c:"FetchError"}: ${l==null?void 0:l.message}`,details:h,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(t,e)}returns(){return this}overrideTypes(){return this}},US=class extends DS{select(t){let e=!1;const i=(t??"*").split("").map(s=>/\s/.test(s)&&!e?"":(s==='"'&&(e=!e),s)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:i,foreignTable:s,referencedTable:a=s}={}){const l=a?`${a}.order`:"order",c=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${c?`${c},`:""}${t}.${e?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:i=e}={}){const s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,e,{foreignTable:i,referencedTable:s=i}={}){const a=typeof s>"u"?"offset":`${s}.offset`,l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(l,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:i=!1,buffers:s=!1,wal:a=!1,format:l="text"}={}){var c;const h=[t?"analyze":null,e?"verbose":null,i?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),g=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${g}"; options=${h};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Im=new RegExp("[,()]");var Po=class extends US{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const i=Array.from(new Set(e)).map(s=>typeof s=="string"&&Im.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${i})`),this}notIn(t,e){const i=Array.from(new Set(e)).map(s=>typeof s=="string"&&Im.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`not.in.(${i})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:i,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const l=i===void 0?"":`(${i})`;return this.url.searchParams.append(t,`${a}fts${l}.${e}`),this}match(t){return Object.entries(t).forEach(([e,i])=>{this.url.searchParams.append(e,`eq.${i}`)}),this}not(t,e,i){return this.url.searchParams.append(t,`not.${e}.${i}`),this}or(t,{foreignTable:e,referencedTable:i=e}={}){const s=i?`${i}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,e,i){return this.url.searchParams.append(t,`${e}.${i}`),this}},kS=class{constructor(t,{headers:e={},schema:i,fetch:s}){this.url=t,this.headers=new Headers(e),this.schema=i,this.fetch=s}select(t,e){const{head:i=!1,count:s}=e??{},a=i?"HEAD":"GET";let l=!1;const c=(t??"*").split("").map(h=>/\s/.test(h)&&!l?"":(h==='"'&&(l=!l),h)).join("");return this.url.searchParams.set("select",c),s&&this.headers.append("Prefer",`count=${s}`),new Po({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:i=!0}={}){var s;const a="POST";if(e&&this.headers.append("Prefer",`count=${e}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(l.length>0){const c=[...new Set(l)].map(h=>`"${h}"`);this.url.searchParams.set("columns",c.join(","))}}return new Po({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:i=!1,count:s,defaultToNull:a=!0}={}){var l;const c="POST";if(this.headers.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const h=t.reduce((g,m)=>g.concat(Object.keys(m)),[]);if(h.length>0){const g=[...new Set(h)].map(m=>`"${m}"`);this.url.searchParams.set("columns",g.join(","))}}return new Po({method:c,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(t,{count:e}={}){var i;const s="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Po({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:t}={}){var e;const i="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Po({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},OS=class Uy{constructor(e,{headers:i={},schema:s,fetch:a}={}){this.url=e,this.headers=new Headers(i),this.schemaName=s,this.fetch=a}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new kS(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Uy(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,i={},{head:s=!1,get:a=!1,count:l}={}){var c;let h;const g=new URL(`${this.url}/rpc/${e}`);let m;s||a?(h=s?"HEAD":"GET",Object.entries(i).filter(([_,S])=>S!==void 0).map(([_,S])=>[_,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([_,S])=>{g.searchParams.append(_,S)})):(h="POST",m=i);const v=new Headers(this.headers);return l&&v.set("Prefer",`count=${l}`),new Po({method:h,url:g,headers:v,schema:this.schemaName,body:m,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}};class LS{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const i=process.versions;if(i&&i.node){const s=i.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let i=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(i+=`

Suggested solution: ${e.workaround}`),new Error(i)}static createWebSocket(e,i){const s=this.getWebSocketConstructor();return new s(e,i)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const PS="2.89.0",qS=`realtime-js/${PS}`,ky="1.0.0",GS="2.0.0",Mm=ky,Mc=1e4,HS=1e3,VS=100;var fi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(fi||(fi={}));var ot;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ot||(ot={}));var ln;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ln||(ln={}));var Dc;(function(t){t.websocket="websocket"})(Dc||(Dc={}));var qi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(qi||(qi={}));class BS{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,i){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return i(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var i;return this._isArrayBuffer((i=e.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var i,s;const a=(s=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var i,s;const a=(s=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&s!==void 0?s:{},c=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,i,s){var a,l;const c=e.topic,h=(a=e.ref)!==null&&a!==void 0?a:"",g=(l=e.join_ref)!==null&&l!==void 0?l:"",m=e.payload.event,v=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},_=Object.keys(v).length===0?"":JSON.stringify(v);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`ref length ${h.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`userEvent length ${m.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const S=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+h.length+c.length+m.length+_.length,w=new ArrayBuffer(this.HEADER_LENGTH+S);let b=new DataView(w),R=0;b.setUint8(R++,this.KINDS.userBroadcastPush),b.setUint8(R++,g.length),b.setUint8(R++,h.length),b.setUint8(R++,c.length),b.setUint8(R++,m.length),b.setUint8(R++,_.length),b.setUint8(R++,i),Array.from(g,U=>b.setUint8(R++,U.charCodeAt(0))),Array.from(h,U=>b.setUint8(R++,U.charCodeAt(0))),Array.from(c,U=>b.setUint8(R++,U.charCodeAt(0))),Array.from(m,U=>b.setUint8(R++,U.charCodeAt(0))),Array.from(_,U=>b.setUint8(R++,U.charCodeAt(0)));var x=new Uint8Array(w.byteLength+s.byteLength);return x.set(new Uint8Array(w),0),x.set(new Uint8Array(s),w.byteLength),x.buffer}decode(e,i){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return i(s)}if(typeof e=="string"){const s=JSON.parse(e),[a,l,c,h,g]=s;return i({join_ref:a,ref:l,topic:c,event:h,payload:g})}return i({})}_binaryDecode(e){const i=new DataView(e),s=i.getUint8(0),a=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,i,a)}}_decodeUserBroadcast(e,i,s){const a=i.getUint8(1),l=i.getUint8(2),c=i.getUint8(3),h=i.getUint8(4);let g=this.HEADER_LENGTH+4;const m=s.decode(e.slice(g,g+a));g=g+a;const v=s.decode(e.slice(g,g+l));g=g+l;const _=s.decode(e.slice(g,g+c));g=g+c;const S=e.slice(g,e.byteLength),w=h===this.JSON_ENCODING?JSON.parse(s.decode(S)):S,b={type:this.BROADCAST_EVENT,event:v,payload:w};return c>0&&(b.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:b}}_isArrayBuffer(e){var i;return e instanceof ArrayBuffer||((i=e==null?void 0:e.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}_pick(e,i){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>i.includes(s)))}}class Oy{constructor(e,i){this.callback=e,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var He;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(He||(He={}));const Dm=(t,e,i={})=>{var s;const a=(s=i.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((l,c)=>(l[c]=zS(c,t,e,a),l),{}):{}},zS=(t,e,i,s)=>{const a=e.find(h=>h.name===t),l=a==null?void 0:a.type,c=i[t];return l&&!s.includes(l)?Ly(l,c):Uc(c)},Ly=(t,e)=>{if(t.charAt(0)==="_"){const i=t.slice(1,t.length);return YS(e,i)}switch(t){case He.bool:return FS(e);case He.float4:case He.float8:case He.int2:case He.int4:case He.int8:case He.numeric:case He.oid:return $S(e);case He.json:case He.jsonb:return JS(e);case He.timestamp:return KS(e);case He.abstime:case He.date:case He.daterange:case He.int4range:case He.int8range:case He.money:case He.reltime:case He.text:case He.time:case He.timestamptz:case He.timetz:case He.tsrange:case He.tstzrange:return Uc(e);default:return Uc(e)}},Uc=t=>t,FS=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},$S=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},JS=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},YS=(t,e)=>{if(typeof t!="string")return t;const i=t.length-1,s=t[i];if(t[0]==="{"&&s==="}"){let l;const c=t.slice(1,i);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(h=>Ly(e,h))}return t},KS=t=>typeof t=="string"?t.replace(" ","T"):t,Py=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class vc{constructor(e,i,s={},a=Mc){this.channel=e,this.event=i,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,i){var s;return this._hasReceived(e)&&i((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:i}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(i))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Um;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Um||(Um={}));class Ks{constructor(e,i){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(i==null?void 0:i.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:l,onLeave:c,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ks.syncState(this.state,a,l,c),this.pendingDiffs.forEach(g=>{this.state=Ks.syncDiff(this.state,g,l,c)}),this.pendingDiffs=[],h()}),this.channel._on(s.diff,{},a=>{const{onJoin:l,onLeave:c,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Ks.syncDiff(this.state,a,l,c),h())}),this.onJoin((a,l,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:c})}),this.onLeave((a,l,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,i,s,a){const l=this.cloneDeep(e),c=this.transformState(i),h={},g={};return this.map(l,(m,v)=>{c[m]||(g[m]=v)}),this.map(c,(m,v)=>{const _=l[m];if(_){const S=v.map(x=>x.presence_ref),w=_.map(x=>x.presence_ref),b=v.filter(x=>w.indexOf(x.presence_ref)<0),R=_.filter(x=>S.indexOf(x.presence_ref)<0);b.length>0&&(h[m]=b),R.length>0&&(g[m]=R)}else h[m]=v}),this.syncDiff(l,{joins:h,leaves:g},s,a)}static syncDiff(e,i,s,a){const{joins:l,leaves:c}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(l,(h,g)=>{var m;const v=(m=e[h])!==null&&m!==void 0?m:[];if(e[h]=this.cloneDeep(g),v.length>0){const _=e[h].map(w=>w.presence_ref),S=v.filter(w=>_.indexOf(w.presence_ref)<0);e[h].unshift(...S)}s(h,v,g)}),this.map(c,(h,g)=>{let m=e[h];if(!m)return;const v=g.map(_=>_.presence_ref);m=m.filter(_=>v.indexOf(_.presence_ref)<0),e[h]=m,a(h,m,g),m.length===0&&delete e[h]}),e}static map(e,i){return Object.getOwnPropertyNames(e).map(s=>i(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((i,s)=>{const a=e[s];return"metas"in a?i[s]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):i[s]=a,i},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var km;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(km||(km={}));var Xs;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Xs||(Xs={}));var Ln;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ln||(Ln={}));class Vo{constructor(e,i={config:{}},s){var a,l;if(this.topic=e,this.params=i,this.socket=s,this.bindings={},this.state=ot.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new vc(this,ln.join,this.params,this.timeout),this.rejoinTimer=new Oy(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ot.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ot.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=ot.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ot.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=ot.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ln.reply,{},(c,h)=>{this._trigger(this._replyEventName(h),c)}),this.presence=new Ks(this),this.broadcastEndpointURL=Py(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,i=this.timeout){var s,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==ot.closed){const{config:{broadcast:c,presence:h,private:g}}=this.params,m=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(w=>w.filter))!==null&&a!==void 0?a:[],v=!!this.bindings[Xs.PRESENCE]&&this.bindings[Xs.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,_={},S={broadcast:c,presence:Object.assign(Object.assign({},h),{enabled:v}),postgres_changes:m,private:g};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(w=>e==null?void 0:e(Ln.CHANNEL_ERROR,w)),this._onClose(()=>e==null?void 0:e(Ln.CLOSED)),this.updateJoinPayload(Object.assign({config:S},_)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:w})=>{var b;if(this.socket._isManualToken()||this.socket.setAuth(),w===void 0){e==null||e(Ln.SUBSCRIBED);return}else{const R=this.bindings.postgres_changes,x=(b=R==null?void 0:R.length)!==null&&b!==void 0?b:0,U=[];for(let H=0;H<x;H++){const D=R[H],{filter:{event:Y,schema:X,table:B,filter:z}}=D,ne=w&&w[H];if(ne&&ne.event===Y&&Vo.isFilterValueEqual(ne.schema,X)&&Vo.isFilterValueEqual(ne.table,B)&&Vo.isFilterValueEqual(ne.filter,z))U.push(Object.assign(Object.assign({},D),{id:ne.id}));else{this.unsubscribe(),this.state=ot.errored,e==null||e(Ln.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=U,e&&e(Ln.SUBSCRIBED);return}}).receive("error",w=>{this.state=ot.errored,e==null||e(Ln.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ln.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,i={}){return await this.send({type:"presence",event:"track",payload:e},i.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,i,s){return this.state===ot.joined&&e===Xs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,i,s)}async httpSend(e,i,s={}){var a;if(i==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:i,private:this.private}]})},h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(h.status===202)return{success:!0};let g=h.statusText;try{const m=await h.json();g=m.error||m.message||g}catch{}return Promise.reject(new Error(g))}async send(e,i={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=e,h={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(h.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:h,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(s=i.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=m.body)===null||a===void 0?void 0:a.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,h,g;const m=this._push(e.type,e,i.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(h=(c=this.params)===null||c===void 0?void 0:c.config)===null||h===void 0?void 0:h.broadcast)===null||g===void 0)&&g.ack)&&l("ok"),m.receive("ok",()=>l("ok")),m.receive("error",()=>l("error")),m.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ot.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ln.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new vc(this,ln.leave,{},e),s.receive("ok",()=>{i(),a("ok")}).receive("timeout",()=>{i(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ot.closed,this.bindings={}}async _fetchWithTimeout(e,i,s){const a=new AbortController,l=setTimeout(()=>a.abort(),s),c=await this.socket.fetch(e,Object.assign(Object.assign({},i),{signal:a.signal}));return clearTimeout(l),c}_push(e,i,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new vc(this,e,i,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>VS){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(e,i,s){return i}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,i,s){var a,l;const c=e.toLocaleLowerCase(),{close:h,error:g,leave:m,join:v}=ln;if(s&&[h,g,m,v].indexOf(c)>=0&&s!==this._joinRef())return;let S=this._onMessage(c,i,s);if(i&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(w=>{var b,R,x;return((b=w.filter)===null||b===void 0?void 0:b.event)==="*"||((x=(R=w.filter)===null||R===void 0?void 0:R.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===c}).map(w=>w.callback(S,s)):(l=this.bindings[c])===null||l===void 0||l.filter(w=>{var b,R,x,U,H,D;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in w){const Y=w.id,X=(b=w.filter)===null||b===void 0?void 0:b.event;return Y&&((R=i.ids)===null||R===void 0?void 0:R.includes(Y))&&(X==="*"||(X==null?void 0:X.toLocaleLowerCase())===((x=i.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const Y=(H=(U=w==null?void 0:w.filter)===null||U===void 0?void 0:U.event)===null||H===void 0?void 0:H.toLocaleLowerCase();return Y==="*"||Y===((D=i==null?void 0:i.event)===null||D===void 0?void 0:D.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===c}).map(w=>{if(typeof S=="object"&&"ids"in S){const b=S.data,{schema:R,table:x,commit_timestamp:U,type:H,errors:D}=b;S=Object.assign(Object.assign({},{schema:R,table:x,commit_timestamp:U,eventType:H,new:{},old:{},errors:D}),this._getPayloadRecords(b))}w.callback(S,s)})}_isClosed(){return this.state===ot.closed}_isJoined(){return this.state===ot.joined}_isJoining(){return this.state===ot.joining}_isLeaving(){return this.state===ot.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,i,s){const a=e.toLocaleLowerCase(),l={type:a,filter:i,callback:s};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,i){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&Vo.isEqual(a.filter,i))})),this}static isEqual(e,i){if(Object.keys(e).length!==Object.keys(i).length)return!1;for(const s in e)if(e[s]!==i[s])return!1;return!0}static isFilterValueEqual(e,i){return(e??void 0)===(i??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ln.close,{},e)}_onError(e){this._on(ln.error,{},i=>e(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ot.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const i={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(i.new=Dm(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(i.old=Dm(e.columns,e.old_record)),i}}const _c=()=>{},Sa={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},XS=[1e3,2e3,5e3,1e4],QS=1e4,WS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ZS{constructor(e,i){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Mc,this.transport=null,this.heartbeatIntervalMs=Sa.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=_c,this.ref=0,this.reconnectTimer=null,this.vsn=Mm,this.logger=_c,this.conn=null,this.sendBuffer=[],this.serializer=new BS,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...l)=>a(...l):(...l)=>fetch(...l),!(!((s=i==null?void 0:i.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${e}/${Dc.websocket}`,this.httpEndpoint=Py(e),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i==null?void 0:i.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=LS.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const i=e.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,i??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const i=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const e=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,i,s){this.logger(e,i,s)}connectionState(){switch(this.conn&&this.conn.readyState){case fi.connecting:return qi.Connecting;case fi.open:return qi.Open;case fi.closing:return qi.Closing;default:return qi.Closed}}isConnected(){return this.connectionState()===qi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,i={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===s);if(a)return a;{const l=new Vo(`realtime:${e}`,i,this);return this.channels.push(l),l}}push(e){const{topic:i,event:s,payload:a,ref:l}=e,c=()=>{this.encode(e,h=>{var g;(g=this.conn)===null||g===void 0||g.send(h)})};this.log("push",`${i} ${s} (${l})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(HS,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},Sa.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let i=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${e}"`),i.unsubscribe())}_remove(e){this.channels=this.channels.filter(i=>i.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply")try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}i.ref&&i.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:l,ref:c}=i,h=c?`(${c})`:"",g=l.status||"";this.log("receive",`${g} ${s} ${a} ${h}`.trim(),l),this.channels.filter(m=>m._isMember(s)).forEach(m=>m._trigger(a,l,c)),this._triggerStateCallbacks("message",i)})}_clearTimer(e){var i;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===fi.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===fi.open||this.conn.readyState===fi.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(i=>{this.log("error","error waiting for auth on connect",i),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this._terminateWorker()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var i;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ln.error))}_appendParams(e,i){if(Object.keys(i).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(i);return`${e}${s}${a}`}_workerObjectUrl(e){let i;if(e)i=e;else{const s=new Blob([WS],{type:"application/javascript"});i=URL.createObjectURL(s)}return i}_setConnectionState(e,i=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(e=null){let i,s=!1;if(e)i=e,s=!0;else if(this.accessToken)try{i=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),i=this.accessTokenValue}else i=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(a=>{const l={access_token:i,version:qS};i&&a.updateJoinPayload(l),a.joinedOnce&&a._isJoined()&&a._push(ln.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(i=>{this.log("error",`Error setting auth in ${e}`,i)})}_triggerStateCallbacks(e,i){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(i)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Oy(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Sa.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var i,s,a,l,c,h,g,m,v,_,S,w;switch(this.transport=(i=e==null?void 0:e.transport)!==null&&i!==void 0?i:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:Mc,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:Sa.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(h=e==null?void 0:e.heartbeatCallback)!==null&&h!==void 0?h:_c,this.vsn=(g=e==null?void 0:e.vsn)!==null&&g!==void 0?g:Mm,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=e==null?void 0:e.reconnectAfterMs)!==null&&m!==void 0?m:(b=>XS[b-1]||QS),this.vsn){case ky:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:((b,R)=>R(JSON.stringify(b))),this.decode=(_=e==null?void 0:e.decode)!==null&&_!==void 0?_:((b,R)=>R(JSON.parse(b)));break;case GS:this.encode=(S=e==null?void 0:e.encode)!==null&&S!==void 0?S:this.serializer.encode.bind(this.serializer),this.decode=(w=e==null?void 0:e.decode)!==null&&w!==void 0?w:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Qs=class extends Error{constructor(t,e){var i;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((i=e.icebergType)==null?void 0:i.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function jS(t,e,i){const s=new URL(e,t);if(i)for(const[a,l]of Object.entries(i))l!==void 0&&s.searchParams.set(a,l);return s.toString()}async function eE(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function tE(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:i,path:s,query:a,body:l,headers:c}){const h=jS(t.baseUrl,s,a),g=await eE(t.auth),m=await e(h,{method:i,headers:{...l?{"Content-Type":"application/json"}:{},...g,...c},body:l?JSON.stringify(l):void 0}),v=await m.text(),_=(m.headers.get("content-type")||"").includes("application/json"),S=_&&v?JSON.parse(v):v;if(!m.ok){const w=_?S:void 0,b=w==null?void 0:w.error;throw new Qs((b==null?void 0:b.message)??`Request failed with status ${m.status}`,{status:m.status,icebergType:b==null?void 0:b.type,icebergCode:b==null?void 0:b.code,details:w})}return{status:m.status,headers:m.headers,data:S}}}}function Ea(t){return t.join("")}var nE=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Ea(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(t,e){const i={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:i})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ea(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ea(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ea(t.namespace)}`}),!0}catch(e){if(e instanceof Qs&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(i){if(i instanceof Qs&&i.status===409)return;throw i}}};function No(t){return t.join("")}var iE=class{constructor(t,e="",i){this.client=t,this.prefix=e,this.accessDelegation=i}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${No(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${No(t.namespace)}/tables`,body:e,headers:i})).data.metadata}async updateTable(t,e){const i=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${No(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":i.data["metadata-location"],metadata:i.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${No(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${No(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${No(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(i){if(i instanceof Qs&&i.status===404)return!1;throw i}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(i){if(i instanceof Qs&&i.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw i}}},oE=class{constructor(t){var s;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const i=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=tE({baseUrl:i,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(s=t.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new nE(this.client,e),this.tableOps=new iE(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Va=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Fe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var sE=class extends Va{constructor(t,e,i){super(t),this.name="StorageApiError",this.status=e,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},kc=class extends Va{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const id=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),rE=()=>Response,Oc=t=>{if(Array.isArray(t))return t.map(i=>Oc(i));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([i,s])=>{const a=i.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=Oc(s)}),e},aE=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},lE=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Ws(t){"@babel/helpers - typeof";return Ws=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ws(t)}function uE(t,e){if(Ws(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var s=i.call(t,e);if(Ws(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cE(t){var e=uE(t,"string");return Ws(e)=="symbol"?e:e+""}function dE(t,e,i){return(e=cE(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Om(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),i.push.apply(i,s)}return i}function de(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Om(Object(i),!0).forEach(function(s){dE(t,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Om(Object(i)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(i,s))})}return t}const Sc=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},fE=async(t,e,i)=>{t instanceof await rE()&&!(i!=null&&i.noResolveJson)?t.json().then(s=>{const a=t.status||500,l=(s==null?void 0:s.statusCode)||a+"";e(new sE(Sc(s),a,l))}).catch(s=>{e(new kc(Sc(s),s))}):e(new kc(Sc(t),t))},hE=(t,e,i,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!s?a:(aE(s)?(a.headers=de({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,e!=null&&e.duplex&&(a.duplex=e.duplex),de(de({},a),i))};async function nr(t,e,i,s,a,l){return new Promise((c,h)=>{t(i,hE(e,s,a,l)).then(g=>{if(!g.ok)throw g;return s!=null&&s.noResolveJson?g:g.json()}).then(g=>c(g)).catch(g=>fE(g,h,s))})}async function Zs(t,e,i,s){return nr(t,"GET",e,i,s)}async function an(t,e,i,s,a){return nr(t,"POST",e,s,a,i)}async function Lc(t,e,i,s,a){return nr(t,"PUT",e,s,a,i)}async function pE(t,e,i,s){return nr(t,"HEAD",e,de(de({},i),{},{noResolveJson:!0}),s)}async function od(t,e,i,s,a){return nr(t,"DELETE",e,s,a,i)}var mE=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Fe(e))return{data:null,error:e};throw e}}};let qy;qy=Symbol.toStringTag;var gE=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[qy]="BlobDownloadBuilder",this.promise=null}asStream(){return new mE(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Fe(e))return{data:null,error:e};throw e}}};const yE={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Lm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var vE=class{constructor(t,e={},i,s){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=i,this.fetch=id(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,i,s){var a=this;try{let l;const c=de(de({},Lm),s);let h=de(de({},a.headers),t==="POST"&&{"x-upsert":String(c.upsert)});const g=c.metadata;typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),g&&l.append("metadata",a.encodeMetadata(g)),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),g&&!l.has("metadata")&&l.append("metadata",a.encodeMetadata(g))):(l=i,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType,g&&(h["x-metadata"]=a.toBase64(a.encodeMetadata(g))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),s!=null&&s.headers&&(h=de(de({},h),s.headers));const m=a._removeEmptyFolders(e),v=a._getFinalPath(m),_=await(t=="PUT"?Lc:an)(a.fetch,`${a.url}/object/${v}`,l,de({headers:h},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:m,id:_.Id,fullPath:_.Key},error:null}}catch(l){if(a.shouldThrowOnError)throw l;if(Fe(l))return{data:null,error:l};throw l}}async upload(t,e,i){return this.uploadOrUpdate("POST",t,e,i)}async uploadToSignedUrl(t,e,i,s){var a=this;const l=a._removeEmptyFolders(t),c=a._getFinalPath(l),h=new URL(a.url+`/object/upload/sign/${c}`);h.searchParams.set("token",e);try{let g;const m=de({upsert:Lm.upsert},s),v=de(de({},a.headers),{"x-upsert":String(m.upsert)});return typeof Blob<"u"&&i instanceof Blob?(g=new FormData,g.append("cacheControl",m.cacheControl),g.append("",i)):typeof FormData<"u"&&i instanceof FormData?(g=i,g.append("cacheControl",m.cacheControl)):(g=i,v["cache-control"]=`max-age=${m.cacheControl}`,v["content-type"]=m.contentType),{data:{path:l,fullPath:(await Lc(a.fetch,h.toString(),g,{headers:v})).Key},error:null}}catch(g){if(a.shouldThrowOnError)throw g;if(Fe(g))return{data:null,error:g};throw g}}async createSignedUploadUrl(t,e){var i=this;try{let s=i._getFinalPath(t);const a=de({},i.headers);e!=null&&e.upsert&&(a["x-upsert"]="true");const l=await an(i.fetch,`${i.url}/object/upload/sign/${s}`,{},{headers:a}),c=new URL(i.url+l.url),h=c.searchParams.get("token");if(!h)throw new Va("No token returned by API");return{data:{signedUrl:c.toString(),path:t,token:h},error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}}async update(t,e,i){return this.uploadOrUpdate("PUT",t,e,i)}async move(t,e,i){var s=this;try{return{data:await an(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:t,destinationKey:e,destinationBucket:i==null?void 0:i.destinationBucket},{headers:s.headers}),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Fe(a))return{data:null,error:a};throw a}}async copy(t,e,i){var s=this;try{return{data:{path:(await an(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:t,destinationKey:e,destinationBucket:i==null?void 0:i.destinationBucket},{headers:s.headers})).Key},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Fe(a))return{data:null,error:a};throw a}}async createSignedUrl(t,e,i){var s=this;try{let a=s._getFinalPath(t),l=await an(s.fetch,`${s.url}/object/sign/${a}`,de({expiresIn:e},i!=null&&i.transform?{transform:i.transform}:{}),{headers:s.headers});const c=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return l={signedUrl:encodeURI(`${s.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Fe(a))return{data:null,error:a};throw a}}async createSignedUrls(t,e,i){var s=this;try{const a=await an(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:e,paths:t},{headers:s.headers}),l=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:a.map(c=>de(de({},c),{},{signedUrl:c.signedURL?encodeURI(`${s.url}${c.signedURL}${l}`):null})),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Fe(a))return{data:null,error:a};throw a}}download(t,e){const i=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),a=s?`?${s}`:"",l=this._getFinalPath(t),c=()=>Zs(this.fetch,`${this.url}/${i}/${l}${a}`,{headers:this.headers,noResolveJson:!0});return new gE(c,this.shouldThrowOnError)}async info(t){var e=this;const i=e._getFinalPath(t);try{return{data:Oc(await Zs(e.fetch,`${e.url}/object/info/${i}`,{headers:e.headers})),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}}async exists(t){var e=this;const i=e._getFinalPath(t);try{return await pE(e.fetch,`${e.url}/object/${i}`,{headers:e.headers}),{data:!0,error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Fe(s)&&s instanceof kc){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}}getPublicUrl(t,e){const i=this._getFinalPath(t),s=[],a=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";a!==""&&s.push(a);const l=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});c!==""&&s.push(c);let h=s.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${i}${h}`)}}}async remove(t){var e=this;try{return{data:await od(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Fe(i))return{data:null,error:i};throw i}}async list(t,e,i){var s=this;try{const a=de(de(de({},yE),e),{},{prefix:t||""});return{data:await an(s.fetch,`${s.url}/object/list/${s.bucketId}`,a,{headers:s.headers},i),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Fe(a))return{data:null,error:a};throw a}}async listV2(t,e){var i=this;try{const s=de({},t);return{data:await an(i.fetch,`${i.url}/object/list-v2/${i.bucketId}`,s,{headers:i.headers},e),error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const Gy="2.89.0",Hy={"X-Client-Info":`storage-js/${Gy}`};var _E=class{constructor(t,e={},i,s){this.shouldThrowOnError=!1;const a=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=de(de({},Hy),e),this.fetch=id(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const i=e.listBucketOptionsToQueryString(t);return{data:await Zs(e.fetch,`${e.url}/bucket${i}`,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Fe(i))return{data:null,error:i};throw i}}async getBucket(t){var e=this;try{return{data:await Zs(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Fe(i))return{data:null,error:i};throw i}}async createBucket(t,e={public:!1}){var i=this;try{return{data:await an(i.fetch,`${i.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:i.headers}),error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}}async updateBucket(t,e){var i=this;try{return{data:await Lc(i.fetch,`${i.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:i.headers}),error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}}async emptyBucket(t){var e=this;try{return{data:await an(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Fe(i))return{data:null,error:i};throw i}}async deleteBucket(t){var e=this;try{return{data:await od(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Fe(i))return{data:null,error:i};throw i}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},SE=class{constructor(t,e={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=de(de({},Hy),e),this.fetch=id(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await an(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Fe(i))return{data:null,error:i};throw i}}async listBuckets(t){var e=this;try{const i=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&i.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&i.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&i.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&i.set("sortOrder",t.sortOrder),t!=null&&t.search&&i.set("search",t.search);const s=i.toString(),a=s?`${e.url}/bucket?${s}`:`${e.url}/bucket`;return{data:await Zs(e.fetch,a,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Fe(i))return{data:null,error:i};throw i}}async deleteBucket(t){var e=this;try{return{data:await od(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Fe(i))return{data:null,error:i};throw i}}from(t){var e=this;if(!lE(t))throw new Va("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const i=new oE({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(i,{get(a,l){const c=a[l];return typeof c!="function"?c:async(...h)=>{try{return{data:await c.apply(a,h),error:null}}catch(g){if(s)throw g;return{data:null,error:g}}}}})}};const sd={"X-Client-Info":`storage-js/${Gy}`,"Content-Type":"application/json"};var Vy=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Vt(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var Ec=class extends Vy{constructor(t,e,i){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},EE=class extends Vy{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const rd=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),TE=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Pm=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),wE=async(t,e,i)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(i!=null&&i.noResolveJson)){const s=t.status||500,a=t;if(typeof a.json=="function")a.json().then(l=>{const c=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||s+"";e(new Ec(Pm(l),s,c))}).catch(()=>{const l=s+"";e(new Ec(a.statusText||`HTTP ${s} error`,s,l))});else{const l=s+"";e(new Ec(a.statusText||`HTTP ${s} error`,s,l))}}else e(new EE(Pm(t),t))},AE=(t,e,i,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return s?(TE(s)?(a.headers=de({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,de(de({},a),i)):a};async function bE(t,e,i,s,a,l){return new Promise((c,h)=>{t(i,AE(e,s,a,l)).then(g=>{if(!g.ok)throw g;if(s!=null&&s.noResolveJson)return g;const m=g.headers.get("content-type");return!m||!m.includes("application/json")?{}:g.json()}).then(g=>c(g)).catch(g=>wE(g,h,s))})}async function Bt(t,e,i,s,a){return bE(t,"POST",e,s,a,i)}var CE=class{constructor(t,e={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=de(de({},sd),e),this.fetch=rd(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await Bt(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Vt(i))return{data:null,error:i};throw i}}async getIndex(t,e){var i=this;try{return{data:await Bt(i.fetch,`${i.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:i.headers}),error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}}async listIndexes(t){var e=this;try{return{data:await Bt(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Vt(i))return{data:null,error:i};throw i}}async deleteIndex(t,e){var i=this;try{return{data:await Bt(i.fetch,`${i.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:i.headers})||{},error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}}},RE=class{constructor(t,e={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=de(de({},sd),e),this.fetch=rd(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Bt(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Vt(i))return{data:null,error:i};throw i}}async getVectors(t){var e=this;try{return{data:await Bt(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Vt(i))return{data:null,error:i};throw i}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await Bt(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Vt(i))return{data:null,error:i};throw i}}async queryVectors(t){var e=this;try{return{data:await Bt(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Vt(i))return{data:null,error:i};throw i}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Bt(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Vt(i))return{data:null,error:i};throw i}}},xE=class{constructor(t,e={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=de(de({},sd),e),this.fetch=rd(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Bt(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Vt(i))return{data:null,error:i};throw i}}async getBucket(t){var e=this;try{return{data:await Bt(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Vt(i))return{data:null,error:i};throw i}}async listBuckets(t={}){var e=this;try{return{data:await Bt(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Vt(i))return{data:null,error:i};throw i}}async deleteBucket(t){var e=this;try{return{data:await Bt(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Vt(i))return{data:null,error:i};throw i}}},NE=class extends xE{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new IE(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,i=this;return e().call(i,t)}async getBucket(t){var e=()=>super.getBucket,i=this;return e().call(i,t)}async listBuckets(t={}){var e=()=>super.listBuckets,i=this;return e().call(i,t)}async deleteBucket(t){var e=()=>super.deleteBucket,i=this;return e().call(i,t)}},IE=class extends CE{constructor(t,e,i,s){super(t,e,s),this.vectorBucketName=i}async createIndex(t){var e=()=>super.createIndex,i=this;return e().call(i,de(de({},t),{},{vectorBucketName:i.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,i=this;return e().call(i,de(de({},t),{},{vectorBucketName:i.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,i=this;return e().call(i,i.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,i=this;return e().call(i,i.vectorBucketName,t)}index(t){return new ME(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},ME=class extends RE{constructor(t,e,i,s,a){super(t,e,a),this.vectorBucketName=i,this.indexName=s}async putVectors(t){var e=()=>super.putVectors,i=this;return e().call(i,de(de({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async getVectors(t){var e=()=>super.getVectors,i=this;return e().call(i,de(de({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,i=this;return e().call(i,de(de({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,i=this;return e().call(i,de(de({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,i=this;return e().call(i,de(de({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}},DE=class extends _E{constructor(t,e={},i,s){super(t,e,i,s)}from(t){return new vE(this.url,this.headers,t,this.fetch)}get vectors(){return new NE(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new SE(this.url+"/iceberg",this.headers,this.fetch)}};const By="2.89.0",qo=30*1e3,Pc=3,Tc=Pc*qo,UE="http://localhost:9999",kE="supabase.auth.token",OE={"X-Client-Info":`gotrue-js/${By}`},qc="X-Supabase-Api-Version",zy={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},LE=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,PE=600*1e3;class js extends Error{constructor(e,i,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=s}}function se(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class qE extends js{constructor(e,i,s){super(e,i,s),this.name="AuthApiError",this.status=i,this.code=s}}function GE(t){return se(t)&&t.name==="AuthApiError"}class Gi extends js{constructor(e,i){super(e),this.name="AuthUnknownError",this.originalError=i}}class qn extends js{constructor(e,i,s,a){super(e,s,a),this.name=i,this.status=s}}class Ht extends qn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function HE(t){return se(t)&&t.name==="AuthSessionMissingError"}class Io extends qn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ta extends qn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class wa extends qn{constructor(e,i=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function VE(t){return se(t)&&t.name==="AuthImplicitGrantRedirectError"}class qm extends qn{constructor(e,i=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class BE extends qn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Gc extends qn{constructor(e,i){super(e,"AuthRetryableFetchError",i,void 0)}}function wc(t){return se(t)&&t.name==="AuthRetryableFetchError"}class Gm extends qn{constructor(e,i,s){super(e,"AuthWeakPasswordError",i,"weak_password"),this.reasons=s}}class Hc extends qn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ma="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Hm=` 	
\r=`.split(""),zE=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Hm.length;e+=1)t[Hm[e].charCodeAt(0)]=-2;for(let e=0;e<Ma.length;e+=1)t[Ma[e].charCodeAt(0)]=e;return t})();function Vm(t,e,i){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;i(Ma[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;i(Ma[s]),e.queuedBits-=6}}function Fy(t,e,i){const s=zE[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)i(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Bm(t){const e=[],i=c=>{e.push(String.fromCodePoint(c))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=c=>{JE(c,s,i)};for(let c=0;c<t.length;c+=1)Fy(t.charCodeAt(c),a,l);return e.join("")}function FE(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function $E(t,e){for(let i=0;i<t.length;i+=1){let s=t.charCodeAt(i);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(t.charCodeAt(i+1)-56320&65535|a)+65536,i+=1}FE(s,e)}}function JE(t,e,i){if(e.utf8seq===0){if(t<=127){i(t);return}for(let s=1;s<6;s+=1)if((t>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&i(e.codepoint)}}function Fo(t){const e=[],i={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)Fy(t.charCodeAt(a),i,s);return new Uint8Array(e)}function YE(t){const e=[];return $E(t,i=>e.push(i)),new Uint8Array(e)}function Hi(t){const e=[],i={queue:0,queuedBits:0},s=a=>{e.push(a)};return t.forEach(a=>Vm(a,i,s)),Vm(null,i,s),e.join("")}function KE(t){return Math.round(Date.now()/1e3)+t}function XE(){return Symbol("auth-callback")}const mt=()=>typeof window<"u"&&typeof document<"u",ki={tested:!1,writable:!1},$y=()=>{if(!mt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ki.tested)return ki.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ki.tested=!0,ki.writable=!0}catch{ki.tested=!0,ki.writable=!1}return ki.writable};function QE(t){const e={},i=new URL(t);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return i.searchParams.forEach((s,a)=>{e[a]=s}),e}const Jy=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),WE=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Go=async(t,e,i)=>{await t.setItem(e,JSON.stringify(i))},Oi=async(t,e)=>{const i=await t.getItem(e);if(!i)return null;try{return JSON.parse(i)}catch{return i}},pt=async(t,e)=>{await t.removeItem(e)};class Ba{constructor(){this.promise=new Ba.promiseConstructor((e,i)=>{this.resolve=e,this.reject=i})}}Ba.promiseConstructor=Promise;function Ac(t){const e=t.split(".");if(e.length!==3)throw new Hc("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!LE.test(e[s]))throw new Hc("JWT not in base64url format");return{header:JSON.parse(Bm(e[0])),payload:JSON.parse(Bm(e[1])),signature:Fo(e[2]),raw:{header:e[0],payload:e[1]}}}async function ZE(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function jE(t,e){return new Promise((s,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await t(l);if(!e(l,null,c)){s(c);return}}catch(c){if(!e(l,c)){a(c);return}}})()})}function eT(t){return("0"+t.toString(16)).substr(-2)}function tT(){const e=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=i.length;let a="";for(let l=0;l<56;l++)a+=i.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,eT).join("")}async function nT(t){const i=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",i),a=new Uint8Array(s);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function iT(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const i=await nT(t);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Mo(t,e,i=!1){const s=tT();let a=s;i&&(a+="/PASSWORD_RECOVERY"),await Go(t,`${e}-code-verifier`,a);const l=await iT(s);return[l,s===l?"plain":"s256"]}const oT=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function sT(t){const e=t.headers.get(qc);if(!e||!e.match(oT))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function rT(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function aT(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const lT=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Do(t){if(!lT.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function bc(){const t={};return new Proxy(t,{get:(e,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const s=i.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function uT(t,e){return new Proxy(t,{get:(i,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,s,a)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(i,s,a)}})}function zm(t){return JSON.parse(JSON.stringify(t))}const Li=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),cT=[502,503,504];async function Fm(t){var e;if(!WE(t))throw new Gc(Li(t),0);if(cT.includes(t.status))throw new Gc(Li(t),t.status);let i;try{i=await t.json()}catch(l){throw new Gi(Li(l),l)}let s;const a=sT(t);if(a&&a.getTime()>=zy["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?s=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(s=i.error_code),s){if(s==="weak_password")throw new Gm(Li(i),t.status,((e=i.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Ht}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new Gm(Li(i),t.status,i.weak_password.reasons);throw new qE(Li(i),t.status||500,s)}const dT=(t,e,i,s)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),i))};async function ce(t,e,i,s){var a;const l=Object.assign({},s==null?void 0:s.headers);l[qc]||(l[qc]=zy["2024-01-01"].name),s!=null&&s.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const c=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(c.redirect_to=s.redirectTo);const h=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",g=await fT(t,e,i+h,{headers:l,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(g):{data:Object.assign({},g),error:null}}async function fT(t,e,i,s,a,l){const c=dT(e,s,a,l);let h;try{h=await t(i,Object.assign({},c))}catch(g){throw console.error(g),new Gc(Li(g),0)}if(h.ok||await Fm(h),s!=null&&s.noResolveJson)return h;try{return await h.json()}catch(g){await Fm(g)}}function rn(t){var e;let i=null;mT(t)&&(i=Object.assign({},t),t.expires_at||(i.expires_at=KE(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:i,user:s},error:null}}function $m(t){const e=rn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((i,s)=>i&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function hi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function hT(t){return{data:t,error:null}}function pT(t){const{action_link:e,email_otp:i,hashed_token:s,redirect_to:a,verification_type:l}=t,c=Ha(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:i,hashed_token:s,redirect_to:a,verification_type:l},g=Object.assign({},c);return{data:{properties:h,user:g},error:null}}function Jm(t){return t}function mT(t){return t.access_token&&t.refresh_token&&t.expires_in}const Cc=["global","local","others"];class gT{constructor({url:e="",headers:i={},fetch:s}){this.url=e,this.headers=i,this.fetch=Jy(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,i=Cc[0]){if(Cc.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Cc.join(", ")}`);try{return await ce(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(se(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,i={}){try{return await ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:hi})}catch(s){if(se(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:i}=e,s=Ha(e,["options"]),a=Object.assign(Object.assign({},s),i);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:pT,redirectTo:i==null?void 0:i.redirectTo})}catch(i){if(se(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(e){try{return await ce(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:hi})}catch(i){if(se(i))return{data:{user:null},error:i};throw i}}async listUsers(e){var i,s,a,l,c,h,g;try{const m={nextPage:null,lastPage:0,total:0},v=await ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(i=e==null?void 0:e.page)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:Jm});if(v.error)throw v.error;const _=await v.json(),S=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,w=(g=(h=v.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return w.length>0&&(w.forEach(b=>{const R=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(b.split(";")[1].split("=")[1]);m[`${x}Page`]=R}),m.total=parseInt(S)),{data:Object.assign(Object.assign({},_),m),error:null}}catch(m){if(se(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){Do(e);try{return await ce(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:hi})}catch(i){if(se(i))return{data:{user:null},error:i};throw i}}async updateUserById(e,i){Do(e);try{return await ce(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:i,headers:this.headers,xform:hi})}catch(s){if(se(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,i=!1){Do(e);try{return await ce(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:i},xform:hi})}catch(s){if(se(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Do(e.userId);try{const{data:i,error:s}=await ce(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:i,error:s}}catch(i){if(se(i))return{data:null,error:i};throw i}}async _deleteFactor(e){Do(e.userId),Do(e.id);try{return{data:await ce(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(i){if(se(i))return{data:null,error:i};throw i}}async _listOAuthClients(e){var i,s,a,l,c,h,g;try{const m={nextPage:null,lastPage:0,total:0},v=await ce(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(i=e==null?void 0:e.page)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:Jm});if(v.error)throw v.error;const _=await v.json(),S=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,w=(g=(h=v.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return w.length>0&&(w.forEach(b=>{const R=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(b.split(";")[1].split("=")[1]);m[`${x}Page`]=R}),m.total=parseInt(S)),{data:Object.assign(Object.assign({},_),m),error:null}}catch(m){if(se(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(e){try{return await ce(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(se(i))return{data:null,error:i};throw i}}async _getOAuthClient(e){try{return await ce(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(se(i))return{data:null,error:i};throw i}}async _updateOAuthClient(e,i){try{return await ce(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:i,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(se(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await ce(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(se(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(e){try{return await ce(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(se(i))return{data:null,error:i};throw i}}}function Ym(t={}){return{getItem:e=>t[e]||null,setItem:(e,i)=>{t[e]=i},removeItem:e=>{delete t[e]}}}const Uo={debug:!!(globalThis&&$y()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Yy extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class yT extends Yy{}async function vT(t,e,i){Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await i()}finally{Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw Uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new yT(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Uo.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}function _T(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Ky(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function ST(t){return parseInt(t,16)}function ET(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function TT(t){var e;const{chainId:i,domain:s,expirationTime:a,issuedAt:l=new Date,nonce:c,notBefore:h,requestId:g,resources:m,scheme:v,uri:_,version:S}=t;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const w=Ky(t.address),b=v?`${v}://${s}`:s,R=t.statement?`${t.statement}
`:"",x=`${b} wants you to sign in with your Ethereum account:
${w}

${R}`;let U=`URI: ${_}
Version: ${S}
Chain ID: ${i}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(a&&(U+=`
Expiration Time: ${a.toISOString()}`),h&&(U+=`
Not Before: ${h.toISOString()}`),g&&(U+=`
Request ID: ${g}`),m){let H=`
Resources:`;for(const D of m){if(!D||typeof D!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${D}`);H+=`
- ${D}`}U+=H}return`${x}
${U}`}class tt extends Error{constructor({message:e,code:i,cause:s,name:a}){var l;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=a??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=i}}class Da extends tt{constructor(e,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:e}),this.name="WebAuthnUnknownError",this.originalError=i}}function wT({error:t,options:e}){var i,s,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new tt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((i=l.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new tt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new tt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new tt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new tt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new tt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return l.pubKeyCredParams.filter(h=>h.type==="public-key").length===0?new tt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new tt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const c=window.location.hostname;if(Xy(c)){if(l.rp.id!==c)return new tt({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new tt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new tt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new tt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new tt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function AT({error:t,options:e}){const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new tt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new tt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(Xy(s)){if(i.rpId!==s)return new tt({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new tt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new tt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new tt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class bT{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const CT=new bT;function RT(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:i,excludeCredentials:s}=t,a=Ha(t,["challenge","user","excludeCredentials"]),l=Fo(e).buffer,c=Object.assign(Object.assign({},i),{id:Fo(i.id).buffer}),h=Object.assign(Object.assign({},a),{challenge:l,user:c});if(s&&s.length>0){h.excludeCredentials=new Array(s.length);for(let g=0;g<s.length;g++){const m=s[g];h.excludeCredentials[g]=Object.assign(Object.assign({},m),{id:Fo(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return h}function xT(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:i}=t,s=Ha(t,["challenge","allowCredentials"]),a=Fo(e).buffer,l=Object.assign(Object.assign({},s),{challenge:a});if(i&&i.length>0){l.allowCredentials=new Array(i.length);for(let c=0;c<i.length;c++){const h=i[c];l.allowCredentials[c]=Object.assign(Object.assign({},h),{id:Fo(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return l}function NT(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const i=t;return{id:t.id,rawId:t.id,response:{attestationObject:Hi(new Uint8Array(t.response.attestationObject)),clientDataJSON:Hi(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function IT(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const i=t,s=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Hi(new Uint8Array(a.authenticatorData)),clientDataJSON:Hi(new Uint8Array(a.clientDataJSON)),signature:Hi(new Uint8Array(a.signature)),userHandle:a.userHandle?Hi(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Xy(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Km(){var t,e;return!!(mt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function MT(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Da("Browser returned unexpected credential type",e)}:{data:null,error:new Da("Empty credential response",e)}}catch(e){return{data:null,error:wT({error:e,options:t})}}}async function DT(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Da("Browser returned unexpected credential type",e)}:{data:null,error:new Da("Empty credential response",e)}}catch(e){return{data:null,error:AT({error:e,options:t})}}}const UT={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},kT={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ua(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),i=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of t)if(a)for(const l in a){const c=a[l];if(c!==void 0)if(Array.isArray(c))s[l]=c;else if(i(c))s[l]=c;else if(e(c)){const h=s[l];e(h)?s[l]=Ua(h,c):s[l]=Ua(c)}else s[l]=c}return s}function OT(t,e){return Ua(UT,t,e||{})}function LT(t,e){return Ua(kT,t,e||{})}class PT{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:i,friendlyName:s,signal:a},l){try{const{data:c,error:h}=await this.client.mfa.challenge({factorId:e,webauthn:i});if(!c)return{data:null,error:h};const g=a??CT.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:m}=c.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${s}`),m.displayName||(m.displayName=m.name)}switch(c.webauthn.type){case"create":{const m=OT(c.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:v,error:_}=await MT({publicKey:m,signal:g});return v?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:v}},error:null}:{data:null,error:_}}case"request":{const m=LT(c.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:v,error:_}=await DT(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:m,signal:g}));return v?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:v}},error:null}:{data:null,error:_}}}}catch(c){return se(c)?{data:null,error:c}:{data:null,error:new Gi("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:i,webauthn:s}){return this.client.mfa.verify({factorId:i,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!i)return{data:null,error:new js("rpId is required for WebAuthn authentication")};try{if(!Km())return{data:null,error:new Gi("Browser does not support WebAuthn",null)};const{data:c,error:h}=await this.challenge({factorId:e,webauthn:{rpId:i,rpOrigins:s},signal:a},{request:l});if(!c)return{data:null,error:h};const{webauthn:g}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:g.type,rpId:i,rpOrigins:s,credential_response:g.credential_response}})}catch(c){return se(c)?{data:null,error:c}:{data:null,error:new Gi("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!i)return{data:null,error:new js("rpId is required for WebAuthn registration")};try{if(!Km())return{data:null,error:new Gi("Browser does not support WebAuthn",null)};const{data:c,error:h}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(v=>{var _;return(_=v.data)===null||_===void 0?void 0:_.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===e&&S.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:h};const{data:g,error:m}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:i,rpOrigins:s},signal:a},{create:l});return g?this._verify({factorId:c.id,challengeId:g.challengeId,webauthn:{rpId:i,rpOrigins:s,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:m}}catch(c){return se(c)?{data:null,error:c}:{data:null,error:new Gi("Unexpected error in register",c)}}}}_T();const qT={url:UE,storageKey:kE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:OE,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Xm(t,e,i){return await i()}const ko={};class er{get jwks(){var e,i;return(i=(e=ko[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(e){ko[this.storageKey]=Object.assign(Object.assign({},ko[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,i;return(i=(e=ko[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ko[this.storageKey]=Object.assign(Object.assign({},ko[this.storageKey]),{cachedAt:e})}constructor(e){var i,s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},qT),e);if(this.storageKey=l.storageKey,this.instanceID=(i=er.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,er.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&mt()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new gT({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Jy(l.fetch),this.lock=l.lock||Xm,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:this.persistSession&&mt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=vT:this.lock=Xm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new PT(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:$y()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ym(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Ym(this.memoryStorage)),mt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${By}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let i={},s="none";if(mt()&&(i=QE(window.location.href),this._isImplicitGrantCallback(i)?s="implicit":await this._isPKCECallback(i)&&(s="pkce")),mt()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:l}=await this._getSessionFromURL(i,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),VE(l)){const g=(e=l.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:h}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",h),await this._saveSession(c),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return se(i)?this._returnResult({error:i}):this._returnResult({error:new Gi("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var i,s,a;try{const l=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:rn}),{data:c,error:h}=l;if(h||!c)return this._returnResult({data:{user:null,session:null},error:h});const g=c.session,m=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:m,session:g},error:null})}catch(l){if(se(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var i,s,a;try{let l;if("email"in e){const{email:v,password:_,options:S}=e;let w=null,b=null;this.flowType==="pkce"&&([w,b]=await Mo(this.storage,this.storageKey)),l=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S==null?void 0:S.emailRedirectTo,body:{email:v,password:_,data:(i=S==null?void 0:S.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken},code_challenge:w,code_challenge_method:b},xform:rn})}else if("phone"in e){const{phone:v,password:_,options:S}=e;l=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:_,data:(s=S==null?void 0:S.data)!==null&&s!==void 0?s:{},channel:(a=S==null?void 0:S.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},xform:rn})}else throw new Ta("You must provide either an email or phone number and a password");const{data:c,error:h}=l;if(h||!c)return await pt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:h});const g=c.session,m=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:m,session:g},error:null})}catch(l){if(await pt(this.storage,`${this.storageKey}-code-verifier`),se(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let i;if("email"in e){const{email:l,password:c,options:h}=e;i=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:$m})}else if("phone"in e){const{phone:l,password:c,options:h}=e;i=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:$m})}else throw new Ta("You must provide either an email or phone number and a password");const{data:s,error:a}=i;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const l=new Io;return this._returnResult({data:{user:null,session:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(i){if(se(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(e){var i,s,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:i}=e;switch(i){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(e){var i,s,a,l,c,h,g,m,v,_,S;let w,b;if("message"in e)w=e.message,b=e.signature;else{const{chain:R,wallet:x,statement:U,options:H}=e;let D;if(mt())if(typeof x=="object")D=x;else{const K=window;if("ethereum"in K&&typeof K.ethereum=="object"&&"request"in K.ethereum&&typeof K.ethereum.request=="function")D=K.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(H!=null&&H.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=x}const Y=new URL((i=H==null?void 0:H.url)!==null&&i!==void 0?i:window.location.href),X=await D.request({method:"eth_requestAccounts"}).then(K=>K).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!X||X.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const B=Ky(X[0]);let z=(s=H==null?void 0:H.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!z){const K=await D.request({method:"eth_chainId"});z=ST(K)}const ne={domain:Y.host,address:B,statement:U,uri:Y.href,version:"1",chainId:z,nonce:(a=H==null?void 0:H.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(l=H==null?void 0:H.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(h=H==null?void 0:H.signInWithEthereum)===null||h===void 0?void 0:h.expirationTime,notBefore:(g=H==null?void 0:H.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(m=H==null?void 0:H.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(v=H==null?void 0:H.signInWithEthereum)===null||v===void 0?void 0:v.resources};w=TT(ne),b=await D.request({method:"personal_sign",params:[ET(w),B]})}try{const{data:R,error:x}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:b},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(S=e.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:rn});if(x)throw x;if(!R||!R.session||!R.user){const U=new Io;return this._returnResult({data:{user:null,session:null},error:U})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:x})}catch(R){if(se(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async signInWithSolana(e){var i,s,a,l,c,h,g,m,v,_,S,w;let b,R;if("message"in e)b=e.message,R=e.signature;else{const{chain:x,wallet:U,statement:H,options:D}=e;let Y;if(mt())if(typeof U=="object")Y=U;else{const B=window;if("solana"in B&&typeof B.solana=="object"&&("signIn"in B.solana&&typeof B.solana.signIn=="function"||"signMessage"in B.solana&&typeof B.solana.signMessage=="function"))Y=B.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof U!="object"||!(D!=null&&D.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Y=U}const X=new URL((i=D==null?void 0:D.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in Y&&Y.signIn){const B=await Y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},D==null?void 0:D.signInWithSolana),{version:"1",domain:X.host,uri:X.href}),H?{statement:H}:null));let z;if(Array.isArray(B)&&B[0]&&typeof B[0]=="object")z=B[0];else if(B&&typeof B=="object"&&"signedMessage"in B&&"signature"in B)z=B;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in z&&"signature"in z&&(typeof z.signedMessage=="string"||z.signedMessage instanceof Uint8Array)&&z.signature instanceof Uint8Array)b=typeof z.signedMessage=="string"?z.signedMessage:new TextDecoder().decode(z.signedMessage),R=z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Y)||typeof Y.signMessage!="function"||!("publicKey"in Y)||typeof Y!="object"||!Y.publicKey||!("toBase58"in Y.publicKey)||typeof Y.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${X.host} wants you to sign in with your Solana account:`,Y.publicKey.toBase58(),...H?["",H,""]:[""],"Version: 1",`URI: ${X.href}`,`Issued At: ${(a=(s=D==null?void 0:D.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=D==null?void 0:D.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${D.signInWithSolana.notBefore}`]:[],...!((c=D==null?void 0:D.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${D.signInWithSolana.expirationTime}`]:[],...!((h=D==null?void 0:D.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${D.signInWithSolana.chainId}`]:[],...!((g=D==null?void 0:D.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${D.signInWithSolana.nonce}`]:[],...!((m=D==null?void 0:D.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${D.signInWithSolana.requestId}`]:[],...!((_=(v=D==null?void 0:D.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||_===void 0)&&_.length?["Resources",...D.signInWithSolana.resources.map(z=>`- ${z}`)]:[]].join(`
`);const B=await Y.signMessage(new TextEncoder().encode(b),"utf8");if(!B||!(B instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");R=B}}try{const{data:x,error:U}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:Hi(R)},!((S=e.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:rn});if(U)throw U;if(!x||!x.session||!x.user){const H=new Io;return this._returnResult({data:{user:null,session:null},error:H})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:U})}catch(x){if(se(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(e){const i=await Oi(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(i??"").split("/");try{if(!s&&this.flowType==="pkce")throw new BE;const{data:l,error:c}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:rn});if(await pt(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const h=new Io;return this._returnResult({data:{user:null,session:null,redirectType:null},error:h})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:c})}catch(l){if(await pt(this.storage,`${this.storageKey}-code-verifier`),se(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:i,provider:s,token:a,access_token:l,nonce:c}=e,h=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:rn}),{data:g,error:m}=h;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!g||!g.session||!g.user){const v=new Io;return this._returnResult({data:{user:null,session:null},error:v})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:m})}catch(i){if(se(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(e){var i,s,a,l,c;try{if("email"in e){const{email:h,options:g}=e;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await Mo(this.storage,this.storageKey));const{error:_}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(i=g==null?void 0:g.data)!==null&&i!==void 0?i:{},create_user:(s=g==null?void 0:g.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:m,code_challenge_method:v},redirectTo:g==null?void 0:g.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in e){const{phone:h,options:g}=e,{data:m,error:v}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(a=g==null?void 0:g.data)!==null&&a!==void 0?a:{},create_user:(l=g==null?void 0:g.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(c=g==null?void 0:g.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:v})}throw new Ta("You must provide either an email or phone number.")}catch(h){if(await pt(this.storage,`${this.storageKey}-code-verifier`),se(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async verifyOtp(e){var i,s;try{let a,l;"options"in e&&(a=(i=e.options)===null||i===void 0?void 0:i.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:c,error:h}=await ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:rn});if(h)throw h;if(!c)throw new Error("An error occurred on token verification.");const g=c.session,m=c.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:m,session:g},error:null})}catch(a){if(se(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var i,s,a,l,c;try{let h=null,g=null;this.flowType==="pkce"&&([h,g]=await Mo(this.storage,this.storageKey));const m=await ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(i=e.options)===null||i===void 0?void 0:i.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:h,code_challenge_method:g}),headers:this.headers,xform:hT});return!((l=m.data)===null||l===void 0)&&l.url&&mt()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(h){if(await pt(this.storage,`${this.storageKey}-code-verifier`),se(h))return this._returnResult({data:null,error:h});throw h}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:i},error:s}=e;if(s)throw s;if(!i)throw new Ht;const{error:a}=await ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(se(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const i=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:l}=e,{error:c}=await ce(this.fetch,"POST",i,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:s,type:a,options:l}=e,{data:c,error:h}=await ce(this.fetch,"POST",i,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h})}throw new Ta("You must provide either an email or phone number and a type")}catch(i){if(se(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async i=>i))}async _acquireLock(e,i){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await i()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=i();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await e(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const i=await Oi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Tc:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const c=await Oi(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=bc()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=uT(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const i=await this._acquireLock(-1,async()=>await this._getUser());return i.data.user&&(this.suppressGetSessionWarning=!0),i}async _getUser(e){try{return e?await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:hi}):await this._useSession(async i=>{var s,a,l;const{data:c,error:h}=i;if(h)throw h;return!(!((s=c.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ht}:await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:hi})})}catch(i){if(se(i))return HE(i)&&(await this._removeSession(),await pt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(e,i={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,i))}async _updateUser(e,i={}){try{return await this._useSession(async s=>{const{data:a,error:l}=s;if(l)throw l;if(!a.session)throw new Ht;const c=a.session;let h=null,g=null;this.flowType==="pkce"&&e.email!=null&&([h,g]=await Mo(this.storage,this.storageKey));const{data:m,error:v}=await ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i==null?void 0:i.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:g}),jwt:c.access_token,xform:hi});if(v)throw v;return c.user=m.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(s){if(await pt(this.storage,`${this.storageKey}-code-verifier`),se(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ht;const i=Date.now()/1e3;let s=i,a=!0,l=null;const{payload:c}=Ac(e.access_token);if(c.exp&&(s=c.exp,a=s<=i),a){const{data:h,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!h)return{data:{user:null,session:null},error:null};l=h}else{const{data:h,error:g}=await this._getUser(e.access_token);if(g)throw g;l={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:s-i,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(i){if(se(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async i=>{var s;if(!e){const{data:c,error:h}=i;if(h)throw h;e=(s=c.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Ht;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(se(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(e,i){try{if(!mt())throw new wa("No browser detected.");if(e.error||e.error_description||e.error_code)throw new wa(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new qm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new wa("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new qm("No code detected.");const{data:H,error:D}=await this._exchangeCodeForSession(e.code);if(D)throw D;const Y=new URL(window.location.href);return Y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Y.toString()),{data:{session:H.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:l,refresh_token:c,expires_in:h,expires_at:g,token_type:m}=e;if(!l||!h||!c||!m)throw new wa("No session defined in URL");const v=Math.round(Date.now()/1e3),_=parseInt(h);let S=v+_;g&&(S=parseInt(g));const w=S-v;w*1e3<=qo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${_}s`);const b=S-_;v-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,S,v):v-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,S,v);const{data:R,error:x}=await this._getUser(l);if(x)throw x;const U={provider_token:s,provider_refresh_token:a,access_token:l,expires_in:_,expires_at:S,refresh_token:c,token_type:m,user:R.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:U,redirectType:e.type},error:null})}catch(s){if(se(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const i=await Oi(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&i)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async i=>{var s;const{data:a,error:l}=i;if(l)return this._returnResult({error:l});const c=(s=a.session)===null||s===void 0?void 0:s.access_token;if(c){const{error:h}=await this.admin.signOut(c,e);if(h&&!(GE(h)&&(h.status===404||h.status===401||h.status===403)))return this._returnResult({error:h})}return e!=="others"&&(await this._removeSession(),await pt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const i=XE(),s={id:i,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async i=>{var s,a;try{const{data:{session:l},error:c}=i;if(c)throw c;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,i={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await Mo(this.storage,this.storageKey,!0));try{return await ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(l){if(await pt(this.storage,`${this.storageKey}-code-verifier`),se(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:i,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=i.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(i){if(se(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var i;try{const{data:s,error:a}=await this._useSession(async l=>{var c,h,g,m,v;const{data:_,error:S}=l;if(S)throw S;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await ce(this.fetch,"GET",w,{headers:this.headers,jwt:(v=(m=_.session)===null||m===void 0?void 0:m.access_token)!==null&&v!==void 0?v:void 0})});if(a)throw a;return mt()&&!(!((i=e.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(se(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async i=>{var s;try{const{error:a,data:{session:l}}=i;if(a)throw a;const{options:c,provider:h,token:g,access_token:m,nonce:v}=e,_=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l==null?void 0:l.access_token)!==null&&s!==void 0?s:void 0,body:{provider:h,id_token:g,access_token:m,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:rn}),{data:S,error:w}=_;return w?this._returnResult({data:{user:null,session:null},error:w}):!S||!S.session||!S.user?this._returnResult({data:{user:null,session:null},error:new Io}):(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),this._returnResult({data:S,error:w}))}catch(a){if(await pt(this.storage,`${this.storageKey}-code-verifier`),se(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async i=>{var s,a;const{data:l,error:c}=i;if(c)throw c;return await ce(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(i){if(se(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(e){const i=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{const s=Date.now();return await jE(async a=>(a>0&&await ZE(200*Math.pow(2,a-1)),this._debug(i,"refreshing attempt",a),await ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:rn})),(a,l)=>{const c=200*Math.pow(2,a);return l&&wc(l)&&Date.now()+c-s<qo})}catch(s){if(this._debug(i,"error",s),se(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(i,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,i){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",i,"url",s),mt()&&!i.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,i;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await Oi(this.storage,this.storageKey);if(a&&this.userStorage){let c=await Oi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await Go(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:bc()}else if(a&&!a.user&&!a.user){const c=await Oi(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(a.user=c.user,await pt(this.storage,this.storageKey+"-user"),await Go(this.storage,this.storageKey,a)):a.user=bc()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const l=((i=a.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<Tc;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${Tc}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),wc(c)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:h}=await this._getUser(a.access_token);!h&&(c!=null&&c.user)?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(s,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var i,s;if(!e)throw new Ht;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Ba;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new Ht;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const h={data:l.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(l){if(this._debug(a,"error",l),se(l)){const c={data:null,error:l};return wc(l)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(c),c}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,i,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",i,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:i});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,i)}catch(g){l.push(g)}});if(await Promise.all(c),l.length>0){for(let h=0;h<l.length;h+=1)console.error(l[h]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await pt(this.storage,`${this.storageKey}-code-verifier`);const i=Object.assign({},e),s=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&i.user&&await Go(this.userStorage,this.storageKey+"-user",{user:i.user});const a=Object.assign({},i);delete a.user;const l=zm(a);await Go(this.storage,this.storageKey,l)}else{const a=zm(i);await Go(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await pt(this.storage,this.storageKey),await pt(this.storage,this.storageKey+"-code-verifier"),await pt(this.storage,this.storageKey+"-user"),this.userStorage&&await pt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&mt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),qo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async i=>{const{data:{session:s}}=i;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/qo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${qo}ms, refresh threshold is ${Pc} ticks`),a<=Pc&&await this._callRefreshToken(s.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Yy)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!mt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const i=`#_onVisibilityChanged(${e})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,i,s){const a=[`provider=${encodeURIComponent(i)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,c]=await Mo(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(h.toString())}if(s!=null&&s.queryParams){const l=new URLSearchParams(s.queryParams);a.push(l.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async i=>{var s;const{data:a,error:l}=i;return l?this._returnResult({data:null,error:l}):await ce(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(i){if(se(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(e){try{return await this._useSession(async i=>{var s,a;const{data:l,error:c}=i;if(c)return this._returnResult({data:null,error:c});const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:g,error:m}=await ce(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(s=l==null?void 0:l.session)===null||s===void 0?void 0:s.access_token});return m?this._returnResult({data:null,error:m}):(e.factorType==="totp"&&g.type==="totp"&&(!((a=g==null?void 0:g.totp)===null||a===void 0)&&a.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(i){if(se(i))return this._returnResult({data:null,error:i});throw i}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var s;const{data:a,error:l}=i;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?NT(e.webauthn.credential_response):IT(e.webauthn.credential_response)})}:{code:e.code}),{data:h,error:g}=await ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),this._returnResult({data:h,error:g}))})}catch(i){if(se(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var s;const{data:a,error:l}=i;if(l)return this._returnResult({data:null,error:l});const c=await ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});if(c.error)return c;const{data:h}=c;if(h.type!=="webauthn")return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:RT(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:xT(h.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(se(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(e){const{data:i,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:i.id,code:e.code})}async _listFactors(){var e;const{data:{user:i},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=i==null?void 0:i.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,i;const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Ac(s.access_token);let c=null;l.aal&&(c=l.aal);let h=c;((i=(e=s.user.factors)===null||e===void 0?void 0:e.filter(v=>v.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(h="aal2");const m=l.amr||[];return{data:{currentLevel:c,nextLevel:h,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async i=>{const{data:{session:s},error:a}=i;return a?this._returnResult({data:null,error:a}):s?await ce(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Ht})})}catch(i){if(se(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(e,i){try{return await this._useSession(async s=>{const{data:{session:a},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Ht});const c=await ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:h=>({data:h,error:null})});return c.data&&c.data.redirect_url&&mt()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(s){if(se(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,i){try{return await this._useSession(async s=>{const{data:{session:a},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Ht});const c=await ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:h=>({data:h,error:null})});return c.data&&c.data.redirect_url&&mt()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(s){if(se(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:i},error:s}=e;return s?this._returnResult({data:null,error:s}):i?await ce(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Ht})})}catch(e){if(se(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async i=>{const{data:{session:s},error:a}=i;return a?this._returnResult({data:null,error:a}):s?(await ce(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ht})})}catch(i){if(se(i))return this._returnResult({data:null,error:i});throw i}}async fetchJwk(e,i={keys:[]}){let s=i.keys.find(h=>h.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(h=>h.kid===e),s&&this.jwks_cached_at+PE>a)return s;const{data:l,error:c}=await ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,s=l.keys.find(h=>h.kid===e),!s)?null:s}async getClaims(e,i={}){try{let s=e;if(!s){const{data:w,error:b}=await this.getSession();if(b||!w.session)return this._returnResult({data:null,error:b});s=w.session.access_token}const{header:a,payload:l,signature:c,raw:{header:h,payload:g}}=Ac(s);i!=null&&i.allowExpired||rT(l.exp);const m=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,i!=null&&i.keys?{keys:i.keys}:i==null?void 0:i.jwks);if(!m){const{error:w}=await this.getUser(s);if(w)throw w;return{data:{claims:l,header:a,signature:c},error:null}}const v=aT(a.alg),_=await crypto.subtle.importKey("jwk",m,v,!0,["verify"]);if(!await crypto.subtle.verify(v,_,c,YE(`${h}.${g}`)))throw new Hc("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(s){if(se(s))return this._returnResult({data:null,error:s});throw s}}}er.nextInstanceID={};const GT=er,HT="2.89.0";let Js="";typeof Deno<"u"?Js="deno":typeof document<"u"?Js="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Js="react-native":Js="node";const VT={"X-Client-Info":`supabase-js-${Js}/${HT}`},BT={headers:VT},zT={schema:"public"},FT={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},$T={};function tr(t){"@babel/helpers - typeof";return tr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tr(t)}function JT(t,e){if(tr(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var s=i.call(t,e);if(tr(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YT(t){var e=JT(t,"string");return tr(e)=="symbol"?e:e+""}function KT(t,e,i){return(e=YT(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Qm(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),i.push.apply(i,s)}return i}function Ke(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Qm(Object(i),!0).forEach(function(s){KT(t,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Qm(Object(i)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(i,s))})}return t}const XT=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),QT=()=>Headers,WT=(t,e,i)=>{const s=XT(i),a=QT();return async(l,c)=>{var h;const g=(h=await e())!==null&&h!==void 0?h:t;let m=new a(c==null?void 0:c.headers);return m.has("apikey")||m.set("apikey",t),m.has("Authorization")||m.set("Authorization",`Bearer ${g}`),s(l,Ke(Ke({},c),{},{headers:m}))}};function ZT(t){return t.endsWith("/")?t:t+"/"}function jT(t,e){var i,s;const{db:a,auth:l,realtime:c,global:h}=t,{db:g,auth:m,realtime:v,global:_}=e,S={db:Ke(Ke({},g),a),auth:Ke(Ke({},m),l),realtime:Ke(Ke({},v),c),storage:{},global:Ke(Ke(Ke({},_),h),{},{headers:Ke(Ke({},(i=_==null?void 0:_.headers)!==null&&i!==void 0?i:{}),(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return t.accessToken?S.accessToken=t.accessToken:delete S.accessToken,S}function ew(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ZT(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var tw=class extends GT{constructor(t){super(t)}},nw=class{constructor(t,e,i){var s,a;this.supabaseUrl=t,this.supabaseKey=e;const l=ew(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,h={db:zT,realtime:$T,auth:Ke(Ke({},FT),{},{storageKey:c}),global:BT},g=jT(i??{},h);if(this.storageKey=(s=g.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=g.global.headers)!==null&&a!==void 0?a:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(v,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}});else{var m;this.auth=this._initSupabaseAuthClient((m=g.auth)!==null&&m!==void 0?m:{},this.headers,g.global.fetch)}this.fetch=WT(e,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Ke({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&this.accessToken().then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new OS(new URL("rest/v1",l).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new DE(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new IS(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,i)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,i;if(t.accessToken)return await t.accessToken();const{data:s}=await t.auth.getSession();return(e=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:i,storage:s,userStorage:a,storageKey:l,flowType:c,lock:h,debug:g,throwOnError:m},v,_){const S={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new tw({url:this.authUrl.href,headers:Ke(Ke({},S),v),storageKey:l,autoRefreshToken:t,persistSession:e,detectSessionInUrl:i,storage:s,userStorage:a,flowType:c,lock:h,debug:g,throwOnError:m,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new ZS(this.realtimeUrl.href,Ke(Ke({},t),{},{params:Ke(Ke({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,i){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const iw=(t,e,i)=>new nw(t,e,i);function ow(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}ow()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const sw="https://czbcnqzuhlrgjrbtcqor.supabase.co",rw="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN6YmNucXp1aGxyZ2pyYnRjcW9yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYxNTUzMDQsImV4cCI6MjA4MTczMTMwNH0.5JMaSyiO9fLr-9KaRZKQrR0jU5F0GT70nfej-4neff8",jt=iw(sw,rw),aw=({isDarkMode:t,toggleTheme:e,currentPage:i,setCurrentPage:s,user:a,onLogout:l,fontScale:c,setFontScale:h})=>{const[g,m]=Ae.useState(!1);return A.jsxs("nav",{className:"sticky top-0 z-50 bg-white/90 dark:bg-slate-900/90 backdrop-blur-lg border-b border-slate-200 dark:border-slate-800 px-4 h-16 flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-2 cursor-pointer group",onClick:()=>s("home"),role:"button","aria-label":"Go to Home",children:[A.jsx("div",{className:"w-10 h-10 bg-teal-600 rounded-xl flex items-center justify-center text-white font-bold text-xl group-hover:scale-105 transition-transform duration-300",children:"V"}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx("span",{className:"font-black text-xl tracking-tighter dark:text-white",children:"VetPath"}),A.jsx("span",{className:"text-[9px] uppercase tracking-[0.2em] text-teal-600 dark:text-teal-400 font-black -mt-1",children:"DVM Intelligence"})]})]}),A.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[A.jsxs("div",{className:"relative",children:[A.jsx("button",{onClick:()=>m(!g),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors text-slate-600 dark:text-slate-400",title:"Accessibility Settings","aria-label":"Accessibility Settings",children:A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[A.jsx("circle",{cx:"12",cy:"12",r:"10"}),A.jsx("path",{d:"M12 8v8"}),A.jsx("path",{d:"M8 12h8"})]})}),g&&A.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-slate-800 rounded-xl shadow-2xl border border-slate-200 dark:border-slate-700 p-2 z-[70] animate-in fade-in zoom-in-95",children:[A.jsx("p",{className:"text-[10px] font-black uppercase text-slate-400 px-2 py-1 mb-1",children:"Text Scaling"}),["normal","large","extra-large"].map(v=>A.jsx("button",{onClick:()=>{h(v),m(!1)},className:`w-full text-left px-3 py-2 rounded-lg text-xs font-bold capitalize transition-colors ${c===v?"bg-teal-600 text-white":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:v.replace("-"," ")},v))]})]}),A.jsx("button",{onClick:e,className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors text-slate-600 dark:text-slate-400",title:"Toggle Dark Mode","aria-label":"Toggle Dark Mode",children:t?A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[A.jsx("circle",{cx:"12",cy:"12",r:"5"}),A.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),A.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),A.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),A.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),A.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),A.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),A.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),A.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}):A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:A.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),a?A.jsxs("div",{className:"flex items-center gap-2 pl-2 border-l border-slate-200 dark:border-slate-800",children:[A.jsx("button",{onClick:()=>s("admin"),className:`hidden md:block px-4 py-2 rounded-lg text-xs font-black transition-all ${i==="admin"?"bg-teal-600 text-white":"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 hover:bg-teal-600 hover:text-white"}`,children:"ADMIN PORTAL"}),A.jsx("button",{onClick:l,className:"p-2 text-slate-400 hover:text-red-500 transition-colors",title:"Sign Out",children:A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[A.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),A.jsx("polyline",{points:"16 17 21 12 16 7"}),A.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]}):A.jsx("button",{onClick:()=>s("login"),className:`px-4 py-2 rounded-xl text-xs font-black transition-all ${i==="login"?"bg-teal-600 text-white":"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 hover:bg-teal-600 hover:text-white"}`,children:"SIGN IN"})]})]})},lw=({disease:t,onClick:e})=>A.jsxs("div",{onClick:e,className:"group bg-white dark:bg-slate-800 rounded-xl border border-slate-100 dark:border-slate-700 p-5 shadow-sm hover:shadow-md hover:border-teal-400 transition-all cursor-pointer flex flex-col h-full",children:[A.jsxs("div",{className:"flex justify-between items-start mb-3",children:[A.jsxs("span",{className:"px-2 py-0.5 bg-teal-50 dark:bg-teal-900/20 text-teal-600 dark:text-teal-400 text-[9px] font-bold rounded uppercase tracking-wider",children:[t.searchCount," Views"]}),A.jsxs("span",{className:"text-[9px] font-bold text-slate-300 uppercase",children:["ID: ",t.id.slice(0,4)]})]}),A.jsx("h3",{className:"text-base font-bold mb-1 text-slate-700 dark:text-white group-hover:text-teal-600 transition-colors",children:t.name}),A.jsx("p",{className:"text-xs text-slate-400 mb-4 italic line-clamp-1",children:t.causalAgent}),A.jsxs("div",{className:"mt-auto pt-3 border-t border-slate-50 dark:border-slate-700 flex flex-wrap gap-1.5",children:[t.hosts.slice(0,3).map((i,s)=>A.jsx("span",{className:"px-2 py-0.5 bg-slate-50 dark:bg-slate-900 text-slate-500 dark:text-slate-400 text-[9px] font-bold rounded border border-slate-100 dark:border-slate-800 uppercase",children:i.animalName},s)),t.hosts.length>3&&A.jsxs("span",{className:"text-[9px] font-bold text-slate-400 pt-1",children:["+",t.hosts.length-3," more"]})]})]}),uw={[un.MEDICINE]:"bg-blue-500 text-white",[un.DRUG]:"bg-purple-500 text-white",[un.VACCINE]:"bg-amber-500 text-white"},cw=({disease:t,onClose:e})=>{const[i,s]=Ae.useState(0),a=t.hosts[i];return A.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-2 md:p-6 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:A.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-5xl max-h-[95vh] rounded-2xl shadow-2xl overflow-hidden flex flex-col border border-slate-100 dark:border-slate-800 animate-in zoom-in-95 duration-200",role:"dialog","aria-modal":"true",children:[A.jsxs("header",{className:"px-6 py-5 border-b border-slate-50 dark:border-slate-800 flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-10 h-10 bg-teal-600 rounded-xl flex items-center justify-center text-white font-bold text-lg",children:t.name.charAt(0)}),A.jsxs("div",{children:[A.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-white leading-none",children:t.name}),A.jsx("p",{className:"text-teal-600 dark:text-teal-400 font-bold text-[10px] mt-1 uppercase tracking-wider",children:t.causalAgent})]})]}),A.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg transition-colors text-slate-400",children:A.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),A.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[A.jsxs("aside",{className:"w-full md:w-56 border-b md:border-b-0 md:border-r border-slate-50 dark:border-slate-800 p-4 space-y-2 bg-slate-50/30 dark:bg-slate-900/50 overflow-y-auto",children:[A.jsx("h4",{className:"text-[10px] uppercase tracking-widest font-bold text-slate-400 px-2 mb-2",children:"Host Selection"}),t.hosts.map((l,c)=>A.jsx("button",{onClick:()=>s(c),className:`w-full text-left px-4 py-3 rounded-xl text-xs font-bold transition-all ${i===c?"bg-teal-600 text-white shadow-sm":"text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:l.animalName},c))]}),A.jsx("div",{className:"flex-1 p-6 md:p-8 space-y-8 overflow-y-auto custom-scrollbar bg-white dark:bg-slate-900",children:A.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-10",children:[A.jsxs("div",{className:"space-y-8",children:[A.jsx(Oo,{label:"Cause",value:a.cause}),A.jsx(Oo,{label:"Clinical Signs",value:a.clinicalSigns,color:"text-red-500 font-semibold"}),A.jsx(Oo,{label:"Verification",value:a.diagnosis})]}),A.jsxs("div",{className:"space-y-8",children:[A.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/40 p-6 rounded-2xl border border-slate-100 dark:border-slate-800",children:[A.jsx("h4",{className:"text-teal-600 text-[10px] font-bold uppercase tracking-widest mb-4 flex items-center gap-2",children:"Therapeutics"}),A.jsxs("div",{className:"space-y-5",children:[a.treatments.map(l=>A.jsxs("div",{className:"border-l-2 border-teal-500/30 pl-4 py-1",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[A.jsx("span",{className:`px-1.5 py-0.5 rounded text-[8px] font-bold uppercase ${uw[l.type]}`,children:l.type}),A.jsx("h5",{className:"text-xs font-bold text-slate-700 dark:text-white",children:l.name})]}),A.jsxs("p",{className:"text-[10px] text-slate-500 font-medium",children:[l.dose,"  ",l.frequency,"  ",l.duration]}),l.notes&&A.jsx("p",{className:"mt-1 text-[10px] italic text-slate-400",children:l.notes})]},l.id)),a.treatments.length===0&&A.jsx("p",{className:"text-xs text-slate-400",children:"No protocol recorded."})]})]}),A.jsx(Oo,{label:"Prevention",value:a.prevention}),A.jsx(Oo,{label:"Precautions",value:a.precaution}),A.jsx(Oo,{label:"Epidemiology",value:a.epidemiology})]})]})})]})]})})},Oo=({label:t,value:e,color:i})=>A.jsxs("div",{className:"space-y-1.5",children:[A.jsx("h5",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-400",children:t}),A.jsx("div",{className:`text-sm leading-relaxed ${i||"text-slate-600 dark:text-slate-300"}`,children:e||"Not specified."})]}),dw=({diseases:t,onViewDetails:e})=>{const[i,s]=Ae.useState(""),[a,l]=Ae.useState("newest"),[c,h]=Ae.useState(null),g=Ae.useMemo(()=>{let v=t.filter(_=>_.name.toLowerCase().includes(i.toLowerCase())||_.causalAgent.toLowerCase().includes(i.toLowerCase())||_.hosts.some(S=>S.animalName.toLowerCase().includes(i.toLowerCase())));switch(a){case"newest":v.sort((_,S)=>S.createdAt-_.createdAt);break;case"oldest":v.sort((_,S)=>_.createdAt-S.createdAt);break;case"most-searched":v.sort((_,S)=>S.searchCount-_.searchCount);break;case"alphabetical":v.sort((_,S)=>_.name.localeCompare(S.name));break}return v},[t,i,a]),m=v=>{e(v.id),h(v)};return A.jsxs("div",{className:"space-y-8 animate-in fade-in duration-300",children:[A.jsxs("section",{className:"text-center py-6 md:py-10 space-y-4",children:[A.jsx("h1",{className:"text-2xl md:text-4xl font-extrabold tracking-tight text-slate-700 dark:text-white",children:"DVM Clinical Disease Registry"}),A.jsx("p",{className:"text-slate-500 text-sm md:text-base max-w-xl mx-auto",children:"Evidence-based medical protocols and epidemiological insights for veterinary professionals."}),A.jsx("div",{className:"relative max-w-xl mx-auto mt-6",children:A.jsx("input",{type:"text",placeholder:"Search pathology or host...",className:"w-full px-5 py-3.5 bg-white dark:bg-slate-800 border-0 ring-1 ring-slate-200 dark:ring-slate-700 focus:ring-2 focus:ring-teal-500 rounded-xl shadow-sm transition-all dark:text-white text-sm",value:i,onChange:v=>s(v.target.value)})})]}),A.jsxs("div",{className:"flex items-center justify-between border-b border-slate-50 dark:border-slate-800 pb-4",children:[A.jsxs("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:[g.length," Records"]}),A.jsx("select",{value:a,onChange:v=>l(v.target.value),className:"bg-transparent text-xs font-bold text-slate-500 focus:outline-none cursor-pointer uppercase",children:bS.map(v=>A.jsx("option",{value:v.value,children:v.label},v.value))})]}),A.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:g.map(v=>A.jsx(lw,{disease:v,onClick:()=>m(v)},v.id))}),c&&A.jsx(cw,{disease:c,onClose:()=>h(null)})]})},Wm=({initialMode:t="login",onSuccess:e})=>{const[i,s]=Ae.useState(t),[a,l]=Ae.useState(""),[c,h]=Ae.useState(""),[g,m]=Ae.useState(!1),[v,_]=Ae.useState(""),[S,w]=Ae.useState(""),b=async R=>{R.preventDefault(),m(!0),_(""),w("");try{if(i==="login"){const{error:x}=await jt.auth.signInWithPassword({email:a,password:c});if(x)throw x;e()}else if(i==="forgot"){const{error:x}=await jt.auth.resetPasswordForEmail(a,{redirectTo:window.location.origin+"#recovery"});if(x)throw x;w("Check your email for the recovery link!")}else if(i==="update"){const{error:x}=await jt.auth.updateUser({password:c});if(x)throw x;w("Password updated! You can now access the portal."),setTimeout(()=>s("login"),2e3)}}catch(x){_(x.message||"An error occurred during authentication.")}finally{m(!1)}};return A.jsx("div",{className:"min-h-[70vh] flex items-center justify-center animate-in slide-in-from-bottom-4 duration-500 px-4",children:A.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-slate-800 p-8 md:p-10 rounded-3xl shadow-xl border border-slate-100 dark:border-slate-700",children:[A.jsxs("div",{className:"text-center mb-8",children:[A.jsx("div",{className:"w-12 h-12 bg-teal-600 rounded-xl flex items-center justify-center text-white text-xl font-black mx-auto mb-4",children:"V"}),A.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-white",children:i==="login"?"DVM Secure Login":i==="forgot"?"Recover Password":"Set New Password"}),A.jsx("p",{className:"text-slate-400 text-xs mt-1",children:"Professional Veterinary Registry Access"})]}),A.jsxs("form",{onSubmit:b,className:"space-y-5",children:[v&&A.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-[11px] font-semibold rounded-lg border border-red-100 dark:border-red-800",children:v}),S&&A.jsx("div",{className:"p-3 bg-teal-50 dark:bg-teal-900/30 text-teal-600 dark:text-teal-400 text-[11px] font-semibold rounded-lg border border-teal-100 dark:border-teal-800",children:S}),(i==="login"||i==="forgot")&&A.jsxs("div",{className:"space-y-1.5",children:[A.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest ml-1",children:"Email Address"}),A.jsx("input",{type:"email",required:!0,value:a,onChange:R=>l(R.target.value),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-900 border-0 ring-1 ring-slate-200 dark:ring-slate-700 rounded-xl focus:ring-2 focus:ring-teal-500 transition-all dark:text-white",placeholder:"dvm@clinic.com"})]}),(i==="login"||i==="update")&&A.jsxs("div",{className:"space-y-1.5",children:[A.jsxs("div",{className:"flex justify-between items-center px-1",children:[A.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:i==="update"?"New Password":"Password"}),i==="login"&&A.jsx("button",{type:"button",onClick:()=>s("forgot"),className:"text-[10px] font-bold text-teal-600 hover:text-teal-700 uppercase",children:"Forgot?"})]}),A.jsx("input",{type:"password",required:!0,value:c,onChange:R=>h(R.target.value),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-900 border-0 ring-1 ring-slate-200 dark:ring-slate-700 rounded-xl focus:ring-2 focus:ring-teal-500 transition-all dark:text-white",placeholder:""})]}),A.jsx("button",{type:"submit",disabled:g,className:"w-full py-3.5 bg-teal-600 hover:bg-teal-700 text-white font-bold rounded-xl shadow-md transition-all active:scale-95 disabled:opacity-50",children:g?"Processing...":i==="login"?"Authenticate":i==="forgot"?"Send Recovery Link":"Update Password"}),i!=="login"&&A.jsx("button",{type:"button",onClick:()=>s("login"),className:"w-full text-xs font-bold text-slate-400 hover:text-slate-600 transition-colors uppercase tracking-widest",children:"Back to Sign In"})]}),A.jsxs("p",{className:"mt-8 text-center text-[9px] text-slate-400 uppercase tracking-widest leading-relaxed",children:["Authorized Personnel Only.",A.jsx("br",{}),"Account management via Supabase."]})]})})};var fw={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let hw,pw;function mw(){return{geminiUrl:hw,vertexUrl:pw}}function gw(t,e,i,s){var a,l;if(!(t!=null&&t.baseUrl)){const c=mw();return e?(a=c.vertexUrl)!==null&&a!==void 0?a:i:(l=c.geminiUrl)!==null&&l!==void 0?l:s}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gn{}function j(t,e){const i=/\{([^}]+)\}/g;return t.replace(i,(s,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const l=e[a];return l!=null?String(l):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function f(t,e,i){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in t))if(Array.isArray(i))t[h]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[h])){const g=t[h];if(Array.isArray(i))for(let m=0;m<g.length;m++){const v=g[m];f(v,e.slice(l+1),i[m])}else for(const m of g)f(m,e.slice(l+1),i)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in t||(t[h]=[{}]);const g=t[h];f(g[0],e.slice(l+1),i);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const s=e[e.length-1],a=t[s];if(a!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===a)return;if(typeof a=="object"&&typeof i=="object"&&a!==null&&i!==null)Object.assign(a,i);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(t,i):t[s]=i}function d(t,e,i=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let s=0;s<e.length;s++){if(typeof t!="object"||t===null)return i;const a=e[s];if(a.endsWith("[]")){const l=a.slice(0,-2);if(l in t){const c=t[l];return Array.isArray(c)?c.map(h=>d(h,e.slice(s+1),i)):i}else return i}else t=t[a]}return t}catch(s){if(s instanceof TypeError)return i;throw s}}function yw(t,e){for(const[i,s]of Object.entries(e)){const a=i.split("."),l=s.split("."),c=new Set;let h=-1;for(let g=0;g<a.length;g++)if(a[g]==="*"){h=g;break}if(h!==-1&&l.length>h)for(let g=h;g<l.length;g++){const m=l[g];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&c.add(m)}Vc(t,a,l,0,c)}}function Vc(t,e,i,s,a){if(s>=e.length||typeof t!="object"||t===null)return;const l=e[s];if(l.endsWith("[]")){const c=l.slice(0,-2),h=t;if(c in h&&Array.isArray(h[c]))for(const g of h[c])Vc(g,e,i,s+1,a)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const c=t,h=Object.keys(c).filter(m=>!m.startsWith("_")&&!a.has(m)),g={};for(const m of h)g[m]=c[m];for(const[m,v]of Object.entries(g)){const _=[];for(const S of i.slice(s))S==="*"?_.push(m):_.push(S);f(c,_,v)}for(const m of h)delete c[m]}}else{const c=t;l in c&&Vc(c[l],e,i,s+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ad(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vw(t){const e={},i=d(t,["operationName"]);i!=null&&f(e,["operationName"],i);const s=d(t,["resourceName"]);return s!=null&&f(e,["_url","resourceName"],s),e}function _w(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],Ew(c)),e}function Sw(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response"]);return c!=null&&f(e,["response"],Tw(c)),e}function Ew(t){const e={},i=d(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>ww(c))),f(e,["generatedVideos"],l)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const a=d(t,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function Tw(t){const e={},i=d(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>Aw(c))),f(e,["generatedVideos"],l)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const a=d(t,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function ww(t){const e={},i=d(t,["video"]);return i!=null&&f(e,["video"],Iw(i)),e}function Aw(t){const e={},i=d(t,["_self"]);return i!=null&&f(e,["video"],Mw(i)),e}function bw(t){const e={},i=d(t,["operationName"]);return i!=null&&f(e,["_url","operationName"],i),e}function Cw(t){const e={},i=d(t,["operationName"]);return i!=null&&f(e,["_url","operationName"],i),e}function Rw(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response"]);return c!=null&&f(e,["response"],xw(c)),e}function xw(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["parent"]);s!=null&&f(e,["parent"],s);const a=d(t,["documentName"]);return a!=null&&f(e,["documentName"],a),e}function Qy(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response"]);return c!=null&&f(e,["response"],Nw(c)),e}function Nw(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["parent"]);s!=null&&f(e,["parent"],s);const a=d(t,["documentName"]);return a!=null&&f(e,["documentName"],a),e}function Iw(t){const e={},i=d(t,["uri"]);i!=null&&f(e,["uri"],i);const s=d(t,["encodedVideo"]);s!=null&&f(e,["videoBytes"],ad(s));const a=d(t,["encoding"]);return a!=null&&f(e,["mimeType"],a),e}function Mw(t){const e={},i=d(t,["gcsUri"]);i!=null&&f(e,["uri"],i);const s=d(t,["bytesBase64Encoded"]);s!=null&&f(e,["videoBytes"],ad(s));const a=d(t,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Zm;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Zm||(Zm={}));var jm;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(jm||(jm={}));var eg;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(eg||(eg={}));var nt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(nt||(nt={}));var tg;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(tg||(tg={}));var ng;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(ng||(ng={}));var ig;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(ig||(ig={}));var og;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(og||(og={}));var sg;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(sg||(sg={}));var rg;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(rg||(rg={}));var ag;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(ag||(ag={}));var lg;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(lg||(lg={}));var ug;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(ug||(ug={}));var cg;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(cg||(cg={}));var dg;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(dg||(dg={}));var fg;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(fg||(fg={}));var hg;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(hg||(hg={}));var pg;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(pg||(pg={}));var mg;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(mg||(mg={}));var ka;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ka||(ka={}));var gg;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(gg||(gg={}));var yg;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(yg||(yg={}));var vg;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(vg||(vg={}));var Bc;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Bc||(Bc={}));var _g;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(_g||(_g={}));var Sg;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Sg||(Sg={}));var Eg;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Eg||(Eg={}));var Tg;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Tg||(Tg={}));var wg;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(wg||(wg={}));var Ag;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Ag||(Ag={}));var bg;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(bg||(bg={}));var Cg;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Cg||(Cg={}));var Rg;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Rg||(Rg={}));var xg;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(xg||(xg={}));var Ng;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Ng||(Ng={}));var Ig;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Ig||(Ig={}));var Mg;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Mg||(Mg={}));var Dg;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Dg||(Dg={}));var Ug;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Ug||(Ug={}));var kg;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(kg||(kg={}));var Og;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Og||(Og={}));var Lg;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Lg||(Lg={}));var Pg;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Pg||(Pg={}));var qg;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(qg||(qg={}));var Gg;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Gg||(Gg={}));var Hg;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Hg||(Hg={}));var Vg;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Vg||(Vg={}));var Bg;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Bg||(Bg={}));var zg;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(zg||(zg={}));var Fg;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Fg||(Fg={}));var $g;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})($g||($g={}));var Jg;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Jg||(Jg={}));var Yg;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Yg||(Yg={}));var Kg;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Kg||(Kg={}));var Xg;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Xg||(Xg={}));var Bo;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Bo||(Bo={}));class zc{constructor(e){const i={};for(const s of e.headers.entries())i[s[0]]=s[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class Fs{get text(){var e,i,s,a,l,c,h,g;if(((a=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const _=[];for(const S of(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[w,b]of Object.entries(S))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(b!==null||b!==void 0)&&_.push(w);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,m+=S.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,i,s,a,l,c,h,g;if(((a=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const _ of(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[S,w]of Object.entries(_))S!=="inlineData"&&(w!==null||w!==void 0)&&v.push(S);_.inlineData&&typeof _.inlineData.data=="string"&&(m+=atob(_.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,i,s,a,l,c,h,g;if(((a=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,i,s,a,l,c,h,g,m;if(((a=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,i,s,a,l,c,h,g,m;if(((a=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class Qg{}class Wg{}class Dw{}class Uw{}class kw{}class Ow{}class Zg{}class jg{}class ey{}class Lw{}class Oa{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new Oa;let a;const l=e;return i?a=Sw(l):a=_w(l),Object.assign(s,a),s}}class ty{}class ny{}class iy{}class oy{}class Pw{}class qw{}class Gw{}class ld{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new ld,l=Rw(e);return Object.assign(s,l),s}}class Hw{}class Vw{}class Bw{}class sy{}class zw{get text(){var e,i,s;let a="",l=!1;const c=[];for(const h of(s=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&s!==void 0?s:[]){for(const[g,m]of Object.entries(h))g!=="text"&&g!=="thought"&&m!==null&&c.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;l=!0,a+=h.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?a:void 0}get data(){var e,i,s;let a="";const l=[];for(const c of(s=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&s!==void 0?s:[]){for(const[h,g]of Object.entries(c))h!=="inlineData"&&g!==null&&l.push(h);c.inlineData&&typeof c.inlineData.data=="string"&&(a+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class Fw{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class ud{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new ud,l=Qy(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ne(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Wy(t,e){const i=Ne(t,e);return i?i.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}`:i.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${i}`:i:""}function Zy(t){return Array.isArray(t)?t.map(e=>La(e)):[La(t)]}function La(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function jy(t){const e=La(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ev(t){const e=La(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ry(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function tv(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>ry(e)):[ry(t)]}function Fc(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function ay(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function ly(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function vt(t){if(t==null)throw new Error("ContentUnion is required");return Fc(t)?t:{role:"user",parts:tv(t)}}function cd(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const s=vt(i);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(t.isVertexAI()){const i=vt(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>vt(i)):[vt(e)]}function en(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(ay(t)||ly(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[vt(t)]}const e=[],i=[],s=Fc(t[0]);for(const a of t){const l=Fc(a);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(a);else{if(ay(a)||ly(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(a)}}return s||e.push({role:"user",parts:tv(i)}),e}function $w(t,e){t.includes("null")&&(e.nullable=!0);const i=t.filter(s=>s!=="null");if(i.length===1)e.type=Object.values(nt).includes(i[0].toUpperCase())?i[0].toUpperCase():nt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of i)e.anyOf.push({type:Object.values(nt).includes(s.toUpperCase())?s.toUpperCase():nt.TYPE_UNSPECIFIED})}}function $o(t){const e={},i=["items"],s=["anyOf"],a=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&$w(t.type,e);for(const[c,h]of Object.entries(t))if(h!=null)if(c=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(nt).includes(h.toUpperCase())?h.toUpperCase():nt.TYPE_UNSPECIFIED}else if(i.includes(c))e[c]=$o(h);else if(s.includes(c)){const g=[];for(const m of h){if(m.type=="null"){e.nullable=!0;continue}g.push($o(m))}e[c]=g}else if(a.includes(c)){const g={};for(const[m,v]of Object.entries(h))g[m]=$o(v);e[c]=g}else{if(c==="additionalProperties")continue;e[c]=h}return e}function dd(t){return $o(t)}function fd(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function hd(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Yo(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=$o(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=$o(e.response));return t}function Ko(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of t)e.push(i);return e}function Jw(t,e,i,s=1){const a=!e.startsWith(`${i}/`)&&e.split("/").length===s;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:a?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}/${e}`:e:a?`${i}/${e}`:e}function Hn(t,e){if(typeof e!="string")throw new Error("name must be a string");return Jw(t,e,"cachedContents")}function nv(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function pi(t){return ad(t)}function Yw(t){return t!=null&&typeof t=="object"&&"name"in t}function Kw(t){return t!=null&&typeof t=="object"&&"video"in t}function Xw(t){return t!=null&&typeof t=="object"&&"uri"in t}function iv(t){var e;let i;if(Yw(t)&&(i=t.name),!(Xw(t)&&(i=t.uri,i===void 0))&&!(Kw(t)&&(i=(e=t.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof t=="string"&&(i=t),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const a=i.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${i}`);i=a[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function ov(t,e){let i;return t.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function sv(t){for(const e of["models","tunedModels","publisherModels"])if(Qw(t,e))return t[e];return[]}function Qw(t,e){return t!==null&&typeof t=="object"&&e in t}function Ww(t,e={}){const i=t,s={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(s.responseJsonSchema=i.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function Zw(t,e={}){const i=[],s=new Set;for(const a of t){const l=a.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const c=Ww(a,e);c.functionDeclarations&&i.push(...c.functionDeclarations)}return{functionDeclarations:i}}function rv(t,e){let i;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const s=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,a=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(t.isVertexAI()){if(a>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function jw(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function av(t){if(typeof t!="object"||t===null)return{};const e=t,i=e.inlinedResponses;if(typeof i!="object"||i===null)return t;const a=i.inlinedResponses;if(!Array.isArray(a)||a.length===0)return t;let l=!1;for(const c of a){if(typeof c!="object"||c===null)continue;const g=c.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Xo(t,e){const i=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function lv(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eA(t){const e={},i=d(t,["responsesFile"]);i!=null&&f(e,["fileName"],i);const s=d(t,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>kA(c))),f(e,["inlinedResponses"],l)}const a=d(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["inlinedEmbedContentResponses"],l)}return e}function tA(t){const e={},i=d(t,["predictionsFormat"]);i!=null&&f(e,["format"],i);const s=d(t,["gcsDestination","outputUriPrefix"]);s!=null&&f(e,["gcsUri"],s);const a=d(t,["bigqueryDestination","outputUri"]);return a!=null&&f(e,["bigqueryUri"],a),e}function nA(t){const e={},i=d(t,["format"]);i!=null&&f(e,["predictionsFormat"],i);const s=d(t,["gcsUri"]);s!=null&&f(e,["gcsDestination","outputUriPrefix"],s);const a=d(t,["bigqueryUri"]);if(a!=null&&f(e,["bigqueryDestination","outputUri"],a),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Na(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const s=d(t,["metadata","displayName"]);s!=null&&f(e,["displayName"],s);const a=d(t,["metadata","state"]);a!=null&&f(e,["state"],lv(a));const l=d(t,["metadata","createTime"]);l!=null&&f(e,["createTime"],l);const c=d(t,["metadata","endTime"]);c!=null&&f(e,["endTime"],c);const h=d(t,["metadata","updateTime"]);h!=null&&f(e,["updateTime"],h);const g=d(t,["metadata","model"]);g!=null&&f(e,["model"],g);const m=d(t,["metadata","output"]);return m!=null&&f(e,["dest"],eA(av(m))),e}function $c(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const s=d(t,["displayName"]);s!=null&&f(e,["displayName"],s);const a=d(t,["state"]);a!=null&&f(e,["state"],lv(a));const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["createTime"]);c!=null&&f(e,["createTime"],c);const h=d(t,["startTime"]);h!=null&&f(e,["startTime"],h);const g=d(t,["endTime"]);g!=null&&f(e,["endTime"],g);const m=d(t,["updateTime"]);m!=null&&f(e,["updateTime"],m);const v=d(t,["model"]);v!=null&&f(e,["model"],v);const _=d(t,["inputConfig"]);_!=null&&f(e,["src"],iA(_));const S=d(t,["outputConfig"]);S!=null&&f(e,["dest"],tA(av(S)));const w=d(t,["completionStats"]);return w!=null&&f(e,["completionStats"],w),e}function iA(t){const e={},i=d(t,["instancesFormat"]);i!=null&&f(e,["format"],i);const s=d(t,["gcsSource","uris"]);s!=null&&f(e,["gcsUri"],s);const a=d(t,["bigquerySource","inputUri"]);return a!=null&&f(e,["bigqueryUri"],a),e}function oA(t,e){const i={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=d(e,["fileName"]);s!=null&&f(i,["fileName"],s);const a=d(e,["inlinedRequests"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>UA(t,c))),f(i,["requests","requests"],l)}return i}function sA(t){const e={},i=d(t,["format"]);i!=null&&f(e,["instancesFormat"],i);const s=d(t,["gcsUri"]);s!=null&&f(e,["gcsSource","uris"],s);const a=d(t,["bigqueryUri"]);if(a!=null&&f(e,["bigquerySource","inputUri"],a),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function rA(t){const e={},i=d(t,["data"]);if(i!=null&&f(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function aA(t,e){const i={},s=d(e,["name"]);return s!=null&&f(i,["_url","name"],Xo(t,s)),i}function lA(t,e){const i={},s=d(e,["name"]);return s!=null&&f(i,["_url","name"],Xo(t,s)),i}function uA(t){const e={},i=d(t,["content"]);i!=null&&f(e,["content"],i);const s=d(t,["citationMetadata"]);s!=null&&f(e,["citationMetadata"],cA(s));const a=d(t,["tokenCount"]);a!=null&&f(e,["tokenCount"],a);const l=d(t,["finishReason"]);l!=null&&f(e,["finishReason"],l);const c=d(t,["avgLogprobs"]);c!=null&&f(e,["avgLogprobs"],c);const h=d(t,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const g=d(t,["index"]);g!=null&&f(e,["index"],g);const m=d(t,["logprobsResult"]);m!=null&&f(e,["logprobsResult"],m);const v=d(t,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(w=>w)),f(e,["safetyRatings"],S)}const _=d(t,["urlContextMetadata"]);return _!=null&&f(e,["urlContextMetadata"],_),e}function cA(t){const e={},i=d(t,["citationSources"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),f(e,["citations"],s)}return e}function uv(t){const e={},i=d(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>VA(l))),f(e,["parts"],a)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function dA(t,e){const i={},s=d(t,["displayName"]);if(e!==void 0&&s!=null&&f(e,["batch","displayName"],s),d(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function fA(t,e){const i={},s=d(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const a=d(t,["dest"]);return e!==void 0&&a!=null&&f(e,["outputConfig"],nA(jw(a))),i}function uy(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ne(t,s));const a=d(e,["src"]);a!=null&&f(i,["batch","inputConfig"],oA(t,rv(t,a)));const l=d(e,["config"]);return l!=null&&dA(l,i),i}function hA(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["model"],Ne(t,s));const a=d(e,["src"]);a!=null&&f(i,["inputConfig"],sA(rv(t,a)));const l=d(e,["config"]);return l!=null&&fA(l,i),i}function pA(t,e){const i={},s=d(t,["displayName"]);return e!==void 0&&s!=null&&f(e,["batch","displayName"],s),i}function mA(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ne(t,s));const a=d(e,["src"]);a!=null&&f(i,["batch","inputConfig"],TA(t,a));const l=d(e,["config"]);return l!=null&&pA(l,i),i}function gA(t,e){const i={},s=d(e,["name"]);return s!=null&&f(i,["_url","name"],Xo(t,s)),i}function yA(t,e){const i={},s=d(e,["name"]);return s!=null&&f(i,["_url","name"],Xo(t,s)),i}function vA(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);return l!=null&&f(e,["error"],l),e}function _A(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);return l!=null&&f(e,["error"],l),e}function SA(t,e){const i={},s=d(e,["contents"]);if(s!=null){let l=cd(t,s);Array.isArray(l)&&(l=l.map(c=>c)),f(i,["requests[]","request","content"],l)}const a=d(e,["config"]);return a!=null&&(f(i,["_self"],EA(a,i)),yw(i,{"requests[].*":"requests[].request.*"})),i}function EA(t,e){const i={},s=d(t,["taskType"]);e!==void 0&&s!=null&&f(e,["requests[]","taskType"],s);const a=d(t,["title"]);e!==void 0&&a!=null&&f(e,["requests[]","title"],a);const l=d(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&f(e,["requests[]","outputDimensionality"],l),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function TA(t,e){const i={},s=d(e,["fileName"]);s!=null&&f(i,["file_name"],s);const a=d(e,["inlinedRequests"]);return a!=null&&f(i,["requests"],SA(t,a)),i}function wA(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function AA(t){const e={},i=d(t,["id"]);i!=null&&f(e,["id"],i);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const a=d(t,["name"]);if(a!=null&&f(e,["name"],a),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function bA(t){const e={},i=d(t,["mode"]);i!=null&&f(e,["mode"],i);const s=d(t,["allowedFunctionNames"]);if(s!=null&&f(e,["allowedFunctionNames"],s),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function CA(t,e,i){const s={},a=d(e,["systemInstruction"]);i!==void 0&&a!=null&&f(i,["systemInstruction"],uv(vt(a)));const l=d(e,["temperature"]);l!=null&&f(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&f(s,["topP"],c);const h=d(e,["topK"]);h!=null&&f(s,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(s,["candidateCount"],g);const m=d(e,["maxOutputTokens"]);m!=null&&f(s,["maxOutputTokens"],m);const v=d(e,["stopSequences"]);v!=null&&f(s,["stopSequences"],v);const _=d(e,["responseLogprobs"]);_!=null&&f(s,["responseLogprobs"],_);const S=d(e,["logprobs"]);S!=null&&f(s,["logprobs"],S);const w=d(e,["presencePenalty"]);w!=null&&f(s,["presencePenalty"],w);const b=d(e,["frequencyPenalty"]);b!=null&&f(s,["frequencyPenalty"],b);const R=d(e,["seed"]);R!=null&&f(s,["seed"],R);const x=d(e,["responseMimeType"]);x!=null&&f(s,["responseMimeType"],x);const U=d(e,["responseSchema"]);U!=null&&f(s,["responseSchema"],dd(U));const H=d(e,["responseJsonSchema"]);if(H!=null&&f(s,["responseJsonSchema"],H),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const D=d(e,["safetySettings"]);if(i!==void 0&&D!=null){let Ce=D;Array.isArray(Ce)&&(Ce=Ce.map($e=>BA($e))),f(i,["safetySettings"],Ce)}const Y=d(e,["tools"]);if(i!==void 0&&Y!=null){let Ce=Ko(Y);Array.isArray(Ce)&&(Ce=Ce.map($e=>FA(Yo($e)))),f(i,["tools"],Ce)}const X=d(e,["toolConfig"]);if(i!==void 0&&X!=null&&f(i,["toolConfig"],zA(X)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const B=d(e,["cachedContent"]);i!==void 0&&B!=null&&f(i,["cachedContent"],Hn(t,B));const z=d(e,["responseModalities"]);z!=null&&f(s,["responseModalities"],z);const ne=d(e,["mediaResolution"]);ne!=null&&f(s,["mediaResolution"],ne);const K=d(e,["speechConfig"]);if(K!=null&&f(s,["speechConfig"],fd(K)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const le=d(e,["thinkingConfig"]);le!=null&&f(s,["thinkingConfig"],le);const ye=d(e,["imageConfig"]);ye!=null&&f(s,["imageConfig"],DA(ye));const ke=d(e,["enableEnhancedCivicAnswers"]);return ke!=null&&f(s,["enableEnhancedCivicAnswers"],ke),s}function RA(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(m=>uA(m))),f(e,["candidates"],g)}const a=d(t,["modelVersion"]);a!=null&&f(e,["modelVersion"],a);const l=d(t,["promptFeedback"]);l!=null&&f(e,["promptFeedback"],l);const c=d(t,["responseId"]);c!=null&&f(e,["responseId"],c);const h=d(t,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function xA(t,e){const i={},s=d(e,["name"]);return s!=null&&f(i,["_url","name"],Xo(t,s)),i}function NA(t,e){const i={},s=d(e,["name"]);return s!=null&&f(i,["_url","name"],Xo(t,s)),i}function IA(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function MA(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function DA(t){const e={},i=d(t,["aspectRatio"]);i!=null&&f(e,["aspectRatio"],i);const s=d(t,["imageSize"]);if(s!=null&&f(e,["imageSize"],s),d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function UA(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["request","model"],Ne(t,s));const a=d(e,["contents"]);if(a!=null){let h=en(a);Array.isArray(h)&&(h=h.map(g=>uv(g))),f(i,["request","contents"],h)}const l=d(e,["metadata"]);l!=null&&f(i,["metadata"],l);const c=d(e,["config"]);return c!=null&&f(i,["request","generationConfig"],CA(t,c,d(i,["request"],{}))),i}function kA(t){const e={},i=d(t,["response"]);i!=null&&f(e,["response"],RA(i));const s=d(t,["error"]);return s!=null&&f(e,["error"],s),e}function OA(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=d(t,["pageToken"]);if(e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),d(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function LA(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=d(t,["pageToken"]);e!==void 0&&a!=null&&f(e,["_query","pageToken"],a);const l=d(t,["filter"]);return e!==void 0&&l!=null&&f(e,["_query","filter"],l),i}function PA(t){const e={},i=d(t,["config"]);return i!=null&&OA(i,e),e}function qA(t){const e={},i=d(t,["config"]);return i!=null&&LA(i,e),e}function GA(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=d(t,["operations"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Na(c))),f(e,["batchJobs"],l)}return e}function HA(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=d(t,["batchPredictionJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>$c(c))),f(e,["batchJobs"],l)}return e}function VA(t){const e={},i=d(t,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const a=d(t,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(t,["fileData"]);l!=null&&f(e,["fileData"],wA(l));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],AA(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],rA(g));const m=d(t,["text"]);m!=null&&f(e,["text"],m);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function BA(t){const e={},i=d(t,["category"]);if(i!=null&&f(e,["category"],i),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(t,["threshold"]);return s!=null&&f(e,["threshold"],s),e}function zA(t){const e={},i=d(t,["functionCallingConfig"]);i!=null&&f(e,["functionCallingConfig"],bA(i));const s=d(t,["retrievalConfig"]);return s!=null&&f(e,["retrievalConfig"],s),e}function FA(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(t,["googleSearchRetrieval"]);s!=null&&f(e,["googleSearchRetrieval"],s);const a=d(t,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=d(t,["fileSearch"]);l!=null&&f(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],IA(h));const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],MA(g));const m=d(t,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Pn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Pn||(Pn={}));class Bi{constructor(e,i,s,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,s,a)}init(e,i,s){var a,l;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i==null?void 0:i.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=i.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(a=c.config)===null||a===void 0?void 0:a.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $A extends Gn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Bi(Pn.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(i),i),this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)}}createInlinedGenerateContentRequest(e){const i=uy(this.apiClient,e),s=i._url,a=j("{model}:batchGenerateContent",s),h=i.batch.inputConfig.requests,g=h.requests,m=[];for(const v of g){const _=Object.assign({},v);if(_.systemInstruction){const S=_.systemInstruction;delete _.systemInstruction;const w=_.request;w.systemInstruction=S,_.request=w}m.push(_)}return h.requests=m,delete i.config,delete i._url,delete i._query,{path:a,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const s=i?Object.assign({},i):{},a=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${a}`),s.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${a}`;else if(c)s.dest=`${c}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=hA(this.apiClient,e);return h=j("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>$c(v))}else{const m=uy(this.apiClient,e);return h=j("{model}:batchGenerateContent",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Na(v))}}async createEmbeddingsInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=mA(this.apiClient,e);return l=j("{model}:asyncBatchEmbedContent",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>Na(g))}}async get(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=NA(this.apiClient,e);return h=j("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>$c(v))}else{const m=xA(this.apiClient,e);return h=j("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Na(v))}}async cancel(e){var i,s,a,l;let c="",h={};if(this.apiClient.isVertexAI()){const g=lA(this.apiClient,e);c=j("batchPredictionJobs/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const g=aA(this.apiClient,e);c=j("batches/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=qA(e);return h=j("batchPredictionJobs",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=HA(v),S=new sy;return Object.assign(S,_),S})}else{const m=PA(e);return h=j("batches",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=GA(v),S=new sy;return Object.assign(S,_),S})}}async delete(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=yA(this.apiClient,e);return h=j("batchPredictionJobs/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>_A(v))}else{const m=gA(this.apiClient,e);return h=j("batches/{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>vA(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JA(t){const e={},i=d(t,["data"]);if(i!=null&&f(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function cy(t){const e={},i=d(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>mb(l))),f(e,["parts"],a)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function YA(t,e){const i={},s=d(t,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const a=d(t,["expireTime"]);e!==void 0&&a!=null&&f(e,["expireTime"],a);const l=d(t,["displayName"]);e!==void 0&&l!=null&&f(e,["displayName"],l);const c=d(t,["contents"]);if(e!==void 0&&c!=null){let v=en(c);Array.isArray(v)&&(v=v.map(_=>cy(_))),f(e,["contents"],v)}const h=d(t,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],cy(vt(h)));const g=d(t,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(_=>yb(_))),f(e,["tools"],v)}const m=d(t,["toolConfig"]);if(e!==void 0&&m!=null&&f(e,["toolConfig"],gb(m)),d(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function KA(t,e){const i={},s=d(t,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const a=d(t,["expireTime"]);e!==void 0&&a!=null&&f(e,["expireTime"],a);const l=d(t,["displayName"]);e!==void 0&&l!=null&&f(e,["displayName"],l);const c=d(t,["contents"]);if(e!==void 0&&c!=null){let _=en(c);Array.isArray(_)&&(_=_.map(S=>S)),f(e,["contents"],_)}const h=d(t,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],vt(h));const g=d(t,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(S=>vb(S))),f(e,["tools"],_)}const m=d(t,["toolConfig"]);e!==void 0&&m!=null&&f(e,["toolConfig"],m);const v=d(t,["kmsKeyName"]);return e!==void 0&&v!=null&&f(e,["encryption_spec","kmsKeyName"],v),i}function XA(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["model"],Wy(t,s));const a=d(e,["config"]);return a!=null&&YA(a,i),i}function QA(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["model"],Wy(t,s));const a=d(e,["config"]);return a!=null&&KA(a,i),i}function WA(t,e){const i={},s=d(e,["name"]);return s!=null&&f(i,["_url","name"],Hn(t,s)),i}function ZA(t,e){const i={},s=d(e,["name"]);return s!=null&&f(i,["_url","name"],Hn(t,s)),i}function jA(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function eb(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function tb(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function nb(t){const e={},i=d(t,["id"]);i!=null&&f(e,["id"],i);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const a=d(t,["name"]);if(a!=null&&f(e,["name"],a),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ib(t){const e={},i=d(t,["mode"]);i!=null&&f(e,["mode"],i);const s=d(t,["allowedFunctionNames"]);if(s!=null&&f(e,["allowedFunctionNames"],s),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ob(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(t,["description"]);i!=null&&f(e,["description"],i);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const a=d(t,["parameters"]);a!=null&&f(e,["parameters"],a);const l=d(t,["parametersJsonSchema"]);l!=null&&f(e,["parametersJsonSchema"],l);const c=d(t,["response"]);c!=null&&f(e,["response"],c);const h=d(t,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function sb(t,e){const i={},s=d(e,["name"]);return s!=null&&f(i,["_url","name"],Hn(t,s)),i}function rb(t,e){const i={},s=d(e,["name"]);return s!=null&&f(i,["_url","name"],Hn(t,s)),i}function ab(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function lb(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function ub(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=d(t,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function cb(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=d(t,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function db(t){const e={},i=d(t,["config"]);return i!=null&&ub(i,e),e}function fb(t){const e={},i=d(t,["config"]);return i!=null&&cb(i,e),e}function hb(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=d(t,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["cachedContents"],l)}return e}function pb(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=d(t,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["cachedContents"],l)}return e}function mb(t){const e={},i=d(t,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const a=d(t,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(t,["fileData"]);l!=null&&f(e,["fileData"],tb(l));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],nb(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],JA(g));const m=d(t,["text"]);m!=null&&f(e,["text"],m);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function gb(t){const e={},i=d(t,["functionCallingConfig"]);i!=null&&f(e,["functionCallingConfig"],ib(i));const s=d(t,["retrievalConfig"]);return s!=null&&f(e,["retrievalConfig"],s),e}function yb(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(t,["googleSearchRetrieval"]);s!=null&&f(e,["googleSearchRetrieval"],s);const a=d(t,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=d(t,["fileSearch"]);l!=null&&f(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],ab(h));const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],lb(g));const m=d(t,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}function vb(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(S=>ob(S))),f(e,["functionDeclarations"],_)}const s=d(t,["retrieval"]);s!=null&&f(e,["retrieval"],s);const a=d(t,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],a);const l=d(t,["computerUse"]);if(l!=null&&f(e,["computerUse"],l),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=d(t,["enterpriseWebSearch"]);h!=null&&f(e,["enterpriseWebSearch"],h);const g=d(t,["googleMaps"]);g!=null&&f(e,["googleMaps"],g);const m=d(t,["googleSearch"]);m!=null&&f(e,["googleSearch"],m);const v=d(t,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function _b(t,e){const i={},s=d(t,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const a=d(t,["expireTime"]);return e!==void 0&&a!=null&&f(e,["expireTime"],a),i}function Sb(t,e){const i={},s=d(t,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const a=d(t,["expireTime"]);return e!==void 0&&a!=null&&f(e,["expireTime"],a),i}function Eb(t,e){const i={},s=d(e,["name"]);s!=null&&f(i,["_url","name"],Hn(t,s));const a=d(e,["config"]);return a!=null&&_b(a,i),i}function Tb(t,e){const i={},s=d(e,["name"]);s!=null&&f(i,["_url","name"],Hn(t,s));const a=d(e,["config"]);return a!=null&&Sb(a,i),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wb extends Gn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Bi(Pn.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(i),i)}async create(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=QA(this.apiClient,e);return h=j("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=XA(this.apiClient,e);return h=j("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=rb(this.apiClient,e);return h=j("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=sb(this.apiClient,e);return h=j("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=ZA(this.apiClient,e);return h=j("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=eb(v),S=new iy;return Object.assign(S,_),S})}else{const m=WA(this.apiClient,e);return h=j("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=jA(v),S=new iy;return Object.assign(S,_),S})}}async update(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=Tb(this.apiClient,e);return h=j("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=Eb(this.apiClient,e);return h=j("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=fb(e);return h=j("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=pb(v),S=new oy;return Object.assign(S,_),S})}else{const m=db(e);return h=j("cachedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=hb(v),S=new oy;return Object.assign(S,_),S})}}}function Pa(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(i[s[a]]=t[s[a]]);return i}function dy(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],s=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function fe(t){return this instanceof fe?(this.v=t,this):new fe(t)}function cn(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(t,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(w){return function(b){return Promise.resolve(b).then(w,_)}}function h(w,b){s[w]&&(a[w]=function(R){return new Promise(function(x,U){l.push([w,R,x,U])>1||g(w,R)})},b&&(a[w]=b(a[w])))}function g(w,b){try{m(s[w](b))}catch(R){S(l[0][3],R)}}function m(w){w.value instanceof fe?Promise.resolve(w.value.v).then(v,_):S(l[0][2],w)}function v(w){g("next",w)}function _(w){g("throw",w)}function S(w,b){w(b),l.shift(),l.length&&g(l[0][0],l[0][1])}}function dn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof dy=="function"?dy(t):t[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(l){i[l]=t[l]&&function(c){return new Promise(function(h,g){c=t[l](c),a(h,g,c.done,c.value)})}}function a(l,c,h,g){Promise.resolve(g).then(function(m){l({value:m,done:h})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ab(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const i=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:cv(i)}function cv(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function bb(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function fy(t){if(t===void 0||t.length===0)return[];const e=[],i=t.length;let s=0;for(;s<i;)if(t[s].role==="user")e.push(t[s]),s++;else{const a=[];let l=!0;for(;s<i&&t[s].role==="model";)a.push(t[s]),l&&!cv(t[s])&&(l=!1),s++;l?e.push(...a):e.pop()}return e}class Cb{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new Rb(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Rb{constructor(e,i,s,a={},l=[]){this.apiClient=e,this.modelsModule=i,this.model=s,this.config=a,this.history=l,this.sendPromise=Promise.resolve(),bb(l)}async sendMessage(e){var i;await this.sendPromise;const s=vt(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var l,c,h;const g=await a,m=(c=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,v=g.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let S=[];v!=null&&(S=(h=v.slice(_))!==null&&h!==void 0?h:[]);const w=m?[m]:[];this.recordHistory(s,w,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var i;await this.sendPromise;const s=vt(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const l=await a;return this.processStreamResponse(l,s)}getHistory(e=!1){const i=e?fy(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){return cn(this,arguments,function*(){var a,l,c,h,g,m;const v=[];try{for(var _=!0,S=dn(e),w;w=yield fe(S.next()),a=w.done,!a;_=!0){h=w.value,_=!1;const b=h;if(Ab(b)){const R=(m=(g=b.candidates)===null||g===void 0?void 0:g[0])===null||m===void 0?void 0:m.content;R!==void 0&&v.push(R)}yield yield fe(b)}}catch(b){l={error:b}}finally{try{!_&&!a&&(c=S.return)&&(yield fe(c.call(S)))}finally{if(l)throw l.error}}this.recordHistory(i,v)})}recordHistory(e,i,s){let a=[];i.length>0&&i.every(l=>l.role!==void 0)?a=i:a.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...fy(s)):this.history.push(e),this.history.push(...a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class za extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,za.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xb(t){const e={},i=d(t,["file"]);return i!=null&&f(e,["file"],i),e}function Nb(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function Ib(t){const e={},i=d(t,["name"]);return i!=null&&f(e,["_url","file"],iv(i)),e}function Mb(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function Db(t){const e={},i=d(t,["name"]);return i!=null&&f(e,["_url","file"],iv(i)),e}function Ub(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=d(t,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function kb(t){const e={},i=d(t,["config"]);return i!=null&&Ub(i,e),e}function Ob(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=d(t,["files"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lb extends Gn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Bi(Pn.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>i)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=kb(e);return l=j("files",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const m=Ob(g),v=new Hw;return Object.assign(v,m),v})}}async createInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=xb(e);return l=j("upload/v1beta/files",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>{const m=Nb(g),v=new Vw;return Object.assign(v,m),v})}}async get(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Db(e);return l=j("files/{file}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Ib(e);return l=j("files/{file}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const m=Mb(g),v=new Bw;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ia(t){const e={},i=d(t,["data"]);if(i!=null&&f(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Pb(t){const e={},i=d(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>jb(l))),f(e,["parts"],a)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function qb(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Gb(t){const e={},i=d(t,["id"]);i!=null&&f(e,["id"],i);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const a=d(t,["name"]);if(a!=null&&f(e,["name"],a),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Hb(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(t,["description"]);i!=null&&f(e,["description"],i);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const a=d(t,["parameters"]);a!=null&&f(e,["parameters"],a);const l=d(t,["parametersJsonSchema"]);l!=null&&f(e,["parametersJsonSchema"],l);const c=d(t,["response"]);c!=null&&f(e,["response"],c);const h=d(t,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function Vb(t){const e={},i=d(t,["modelSelectionConfig"]);i!=null&&f(e,["modelConfig"],i);const s=d(t,["responseJsonSchema"]);s!=null&&f(e,["responseJsonSchema"],s);const a=d(t,["audioTimestamp"]);a!=null&&f(e,["audioTimestamp"],a);const l=d(t,["candidateCount"]);l!=null&&f(e,["candidateCount"],l);const c=d(t,["enableAffectiveDialog"]);c!=null&&f(e,["enableAffectiveDialog"],c);const h=d(t,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const g=d(t,["logprobs"]);g!=null&&f(e,["logprobs"],g);const m=d(t,["maxOutputTokens"]);m!=null&&f(e,["maxOutputTokens"],m);const v=d(t,["mediaResolution"]);v!=null&&f(e,["mediaResolution"],v);const _=d(t,["presencePenalty"]);_!=null&&f(e,["presencePenalty"],_);const S=d(t,["responseLogprobs"]);S!=null&&f(e,["responseLogprobs"],S);const w=d(t,["responseMimeType"]);w!=null&&f(e,["responseMimeType"],w);const b=d(t,["responseModalities"]);b!=null&&f(e,["responseModalities"],b);const R=d(t,["responseSchema"]);R!=null&&f(e,["responseSchema"],R);const x=d(t,["routingConfig"]);x!=null&&f(e,["routingConfig"],x);const U=d(t,["seed"]);U!=null&&f(e,["seed"],U);const H=d(t,["speechConfig"]);H!=null&&f(e,["speechConfig"],H);const D=d(t,["stopSequences"]);D!=null&&f(e,["stopSequences"],D);const Y=d(t,["temperature"]);Y!=null&&f(e,["temperature"],Y);const X=d(t,["thinkingConfig"]);X!=null&&f(e,["thinkingConfig"],X);const B=d(t,["topK"]);B!=null&&f(e,["topK"],B);const z=d(t,["topP"]);if(z!=null&&f(e,["topP"],z),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Bb(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function zb(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function Fb(t,e){const i={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],s);const a=d(t,["responseModalities"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","responseModalities"],a);const l=d(t,["temperature"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const m=d(t,["mediaResolution"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","mediaResolution"],m);const v=d(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=d(t,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],hd(_));const S=d(t,["thinkingConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","thinkingConfig"],S);const w=d(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],w);const b=d(t,["systemInstruction"]);e!==void 0&&b!=null&&f(e,["setup","systemInstruction"],Pb(vt(b)));const R=d(t,["tools"]);if(e!==void 0&&R!=null){let B=Ko(R);Array.isArray(B)&&(B=B.map(z=>tC(Yo(z)))),f(e,["setup","tools"],B)}const x=d(t,["sessionResumption"]);e!==void 0&&x!=null&&f(e,["setup","sessionResumption"],eC(x));const U=d(t,["inputAudioTranscription"]);e!==void 0&&U!=null&&f(e,["setup","inputAudioTranscription"],U);const H=d(t,["outputAudioTranscription"]);e!==void 0&&H!=null&&f(e,["setup","outputAudioTranscription"],H);const D=d(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&f(e,["setup","realtimeInputConfig"],D);const Y=d(t,["contextWindowCompression"]);e!==void 0&&Y!=null&&f(e,["setup","contextWindowCompression"],Y);const X=d(t,["proactivity"]);if(e!==void 0&&X!=null&&f(e,["setup","proactivity"],X),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function $b(t,e){const i={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],Vb(s));const a=d(t,["responseModalities"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","responseModalities"],a);const l=d(t,["temperature"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const m=d(t,["mediaResolution"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","mediaResolution"],m);const v=d(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=d(t,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],hd(_));const S=d(t,["thinkingConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","thinkingConfig"],S);const w=d(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],w);const b=d(t,["systemInstruction"]);e!==void 0&&b!=null&&f(e,["setup","systemInstruction"],vt(b));const R=d(t,["tools"]);if(e!==void 0&&R!=null){let z=Ko(R);Array.isArray(z)&&(z=z.map(ne=>nC(Yo(ne)))),f(e,["setup","tools"],z)}const x=d(t,["sessionResumption"]);e!==void 0&&x!=null&&f(e,["setup","sessionResumption"],x);const U=d(t,["inputAudioTranscription"]);e!==void 0&&U!=null&&f(e,["setup","inputAudioTranscription"],U);const H=d(t,["outputAudioTranscription"]);e!==void 0&&H!=null&&f(e,["setup","outputAudioTranscription"],H);const D=d(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&f(e,["setup","realtimeInputConfig"],D);const Y=d(t,["contextWindowCompression"]);e!==void 0&&Y!=null&&f(e,["setup","contextWindowCompression"],Y);const X=d(t,["proactivity"]);e!==void 0&&X!=null&&f(e,["setup","proactivity"],X);const B=d(t,["explicitVadSignal"]);return e!==void 0&&B!=null&&f(e,["setup","explicitVadSignal"],B),i}function Jb(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["setup","model"],Ne(t,s));const a=d(e,["config"]);return a!=null&&f(i,["config"],Fb(a,i)),i}function Yb(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["setup","model"],Ne(t,s));const a=d(e,["config"]);return a!=null&&f(i,["config"],$b(a,i)),i}function Kb(t){const e={},i=d(t,["musicGenerationConfig"]);return i!=null&&f(e,["musicGenerationConfig"],i),e}function Xb(t){const e={},i=d(t,["weightedPrompts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),f(e,["weightedPrompts"],s)}return e}function Qb(t){const e={},i=d(t,["media"]);if(i!=null){let m=Zy(i);Array.isArray(m)&&(m=m.map(v=>Ia(v))),f(e,["mediaChunks"],m)}const s=d(t,["audio"]);s!=null&&f(e,["audio"],Ia(ev(s)));const a=d(t,["audioStreamEnd"]);a!=null&&f(e,["audioStreamEnd"],a);const l=d(t,["video"]);l!=null&&f(e,["video"],Ia(jy(l)));const c=d(t,["text"]);c!=null&&f(e,["text"],c);const h=d(t,["activityStart"]);h!=null&&f(e,["activityStart"],h);const g=d(t,["activityEnd"]);return g!=null&&f(e,["activityEnd"],g),e}function Wb(t){const e={},i=d(t,["media"]);if(i!=null){let m=Zy(i);Array.isArray(m)&&(m=m.map(v=>v)),f(e,["mediaChunks"],m)}const s=d(t,["audio"]);s!=null&&f(e,["audio"],ev(s));const a=d(t,["audioStreamEnd"]);a!=null&&f(e,["audioStreamEnd"],a);const l=d(t,["video"]);l!=null&&f(e,["video"],jy(l));const c=d(t,["text"]);c!=null&&f(e,["text"],c);const h=d(t,["activityStart"]);h!=null&&f(e,["activityStart"],h);const g=d(t,["activityEnd"]);return g!=null&&f(e,["activityEnd"],g),e}function Zb(t){const e={},i=d(t,["setupComplete"]);i!=null&&f(e,["setupComplete"],i);const s=d(t,["serverContent"]);s!=null&&f(e,["serverContent"],s);const a=d(t,["toolCall"]);a!=null&&f(e,["toolCall"],a);const l=d(t,["toolCallCancellation"]);l!=null&&f(e,["toolCallCancellation"],l);const c=d(t,["usageMetadata"]);c!=null&&f(e,["usageMetadata"],iC(c));const h=d(t,["goAway"]);h!=null&&f(e,["goAway"],h);const g=d(t,["sessionResumptionUpdate"]);g!=null&&f(e,["sessionResumptionUpdate"],g);const m=d(t,["voiceActivityDetectionSignal"]);return m!=null&&f(e,["voiceActivityDetectionSignal"],m),e}function jb(t){const e={},i=d(t,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const a=d(t,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(t,["fileData"]);l!=null&&f(e,["fileData"],qb(l));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],Gb(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],Ia(g));const m=d(t,["text"]);m!=null&&f(e,["text"],m);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function eC(t){const e={},i=d(t,["handle"]);if(i!=null&&f(e,["handle"],i),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function tC(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(t,["googleSearchRetrieval"]);s!=null&&f(e,["googleSearchRetrieval"],s);const a=d(t,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=d(t,["fileSearch"]);l!=null&&f(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],Bb(h));const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],zb(g));const m=d(t,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}function nC(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(S=>Hb(S))),f(e,["functionDeclarations"],_)}const s=d(t,["retrieval"]);s!=null&&f(e,["retrieval"],s);const a=d(t,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],a);const l=d(t,["computerUse"]);if(l!=null&&f(e,["computerUse"],l),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=d(t,["enterpriseWebSearch"]);h!=null&&f(e,["enterpriseWebSearch"],h);const g=d(t,["googleMaps"]);g!=null&&f(e,["googleMaps"],g);const m=d(t,["googleSearch"]);m!=null&&f(e,["googleSearch"],m);const v=d(t,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function iC(t){const e={},i=d(t,["promptTokenCount"]);i!=null&&f(e,["promptTokenCount"],i);const s=d(t,["cachedContentTokenCount"]);s!=null&&f(e,["cachedContentTokenCount"],s);const a=d(t,["candidatesTokenCount"]);a!=null&&f(e,["responseTokenCount"],a);const l=d(t,["toolUsePromptTokenCount"]);l!=null&&f(e,["toolUsePromptTokenCount"],l);const c=d(t,["thoughtsTokenCount"]);c!=null&&f(e,["thoughtsTokenCount"],c);const h=d(t,["totalTokenCount"]);h!=null&&f(e,["totalTokenCount"],h);const g=d(t,["promptTokensDetails"]);if(g!=null){let w=g;Array.isArray(w)&&(w=w.map(b=>b)),f(e,["promptTokensDetails"],w)}const m=d(t,["cacheTokensDetails"]);if(m!=null){let w=m;Array.isArray(w)&&(w=w.map(b=>b)),f(e,["cacheTokensDetails"],w)}const v=d(t,["candidatesTokensDetails"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(b=>b)),f(e,["responseTokensDetails"],w)}const _=d(t,["toolUsePromptTokensDetails"]);if(_!=null){let w=_;Array.isArray(w)&&(w=w.map(b=>b)),f(e,["toolUsePromptTokensDetails"],w)}const S=d(t,["trafficType"]);return S!=null&&f(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oC(t){const e={},i=d(t,["data"]);if(i!=null&&f(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function sC(t){const e={},i=d(t,["content"]);i!=null&&f(e,["content"],i);const s=d(t,["citationMetadata"]);s!=null&&f(e,["citationMetadata"],rC(s));const a=d(t,["tokenCount"]);a!=null&&f(e,["tokenCount"],a);const l=d(t,["finishReason"]);l!=null&&f(e,["finishReason"],l);const c=d(t,["avgLogprobs"]);c!=null&&f(e,["avgLogprobs"],c);const h=d(t,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const g=d(t,["index"]);g!=null&&f(e,["index"],g);const m=d(t,["logprobsResult"]);m!=null&&f(e,["logprobsResult"],m);const v=d(t,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(w=>w)),f(e,["safetyRatings"],S)}const _=d(t,["urlContextMetadata"]);return _!=null&&f(e,["urlContextMetadata"],_),e}function rC(t){const e={},i=d(t,["citationSources"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),f(e,["citations"],s)}return e}function aC(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ne(t,s));const a=d(e,["contents"]);if(a!=null){let l=en(a);Array.isArray(l)&&(l=l.map(c=>c)),f(i,["contents"],l)}return i}function lC(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["tokensInfo"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),f(e,["tokensInfo"],a)}return e}function uC(t){const e={},i=d(t,["values"]);i!=null&&f(e,["values"],i);const s=d(t,["statistics"]);return s!=null&&f(e,["statistics"],cC(s)),e}function cC(t){const e={},i=d(t,["truncated"]);i!=null&&f(e,["truncated"],i);const s=d(t,["token_count"]);return s!=null&&f(e,["tokenCount"],s),e}function Fa(t){const e={},i=d(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>_R(l))),f(e,["parts"],a)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function dC(t){const e={},i=d(t,["controlType"]);i!=null&&f(e,["controlType"],i);const s=d(t,["enableControlImageComputation"]);return s!=null&&f(e,["computeControl"],s),e}function fC(t){const e={};if(d(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function hC(t,e){const i={},s=d(t,["systemInstruction"]);e!==void 0&&s!=null&&f(e,["systemInstruction"],vt(s));const a=d(t,["tools"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>pv(h))),f(e,["tools"],c)}const l=d(t,["generationConfig"]);return e!==void 0&&l!=null&&f(e,["generationConfig"],oR(l)),i}function pC(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ne(t,s));const a=d(e,["contents"]);if(a!=null){let c=en(a);Array.isArray(c)&&(c=c.map(h=>Fa(h))),f(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&fC(l),i}function mC(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ne(t,s));const a=d(e,["contents"]);if(a!=null){let c=en(a);Array.isArray(c)&&(c=c.map(h=>h)),f(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&hC(l,i),i}function gC(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["totalTokens"]);s!=null&&f(e,["totalTokens"],s);const a=d(t,["cachedContentTokenCount"]);return a!=null&&f(e,["cachedContentTokenCount"],a),e}function yC(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["totalTokens"]);return s!=null&&f(e,["totalTokens"],s),e}function vC(t,e){const i={},s=d(e,["model"]);return s!=null&&f(i,["_url","name"],Ne(t,s)),i}function _C(t,e){const i={},s=d(e,["model"]);return s!=null&&f(i,["_url","name"],Ne(t,s)),i}function SC(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function EC(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function TC(t,e){const i={},s=d(t,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const a=d(t,["negativePrompt"]);e!==void 0&&a!=null&&f(e,["parameters","negativePrompt"],a);const l=d(t,["numberOfImages"]);e!==void 0&&l!=null&&f(e,["parameters","sampleCount"],l);const c=d(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=d(t,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const g=d(t,["seed"]);e!==void 0&&g!=null&&f(e,["parameters","seed"],g);const m=d(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&f(e,["parameters","safetySetting"],m);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const _=d(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&f(e,["parameters","includeSafetyAttributes"],_);const S=d(t,["includeRaiReason"]);e!==void 0&&S!=null&&f(e,["parameters","includeRaiReason"],S);const w=d(t,["language"]);e!==void 0&&w!=null&&f(e,["parameters","language"],w);const b=d(t,["outputMimeType"]);e!==void 0&&b!=null&&f(e,["parameters","outputOptions","mimeType"],b);const R=d(t,["outputCompressionQuality"]);e!==void 0&&R!=null&&f(e,["parameters","outputOptions","compressionQuality"],R);const x=d(t,["addWatermark"]);e!==void 0&&x!=null&&f(e,["parameters","addWatermark"],x);const U=d(t,["labels"]);e!==void 0&&U!=null&&f(e,["labels"],U);const H=d(t,["editMode"]);e!==void 0&&H!=null&&f(e,["parameters","editMode"],H);const D=d(t,["baseSteps"]);return e!==void 0&&D!=null&&f(e,["parameters","editConfig","baseSteps"],D),i}function wC(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ne(t,s));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(g=>bR(g))),f(i,["instances[0]","referenceImages"],h)}const c=d(e,["config"]);return c!=null&&TC(c,i),i}function AC(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>$a(l))),f(e,["generatedImages"],a)}return e}function bC(t,e){const i={},s=d(t,["taskType"]);e!==void 0&&s!=null&&f(e,["requests[]","taskType"],s);const a=d(t,["title"]);e!==void 0&&a!=null&&f(e,["requests[]","title"],a);const l=d(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&f(e,["requests[]","outputDimensionality"],l),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function CC(t,e){const i={},s=d(t,["taskType"]);e!==void 0&&s!=null&&f(e,["instances[]","task_type"],s);const a=d(t,["title"]);e!==void 0&&a!=null&&f(e,["instances[]","title"],a);const l=d(t,["outputDimensionality"]);e!==void 0&&l!=null&&f(e,["parameters","outputDimensionality"],l);const c=d(t,["mimeType"]);e!==void 0&&c!=null&&f(e,["instances[]","mimeType"],c);const h=d(t,["autoTruncate"]);return e!==void 0&&h!=null&&f(e,["parameters","autoTruncate"],h),i}function RC(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ne(t,s));const a=d(e,["contents"]);if(a!=null){let h=cd(t,a);Array.isArray(h)&&(h=h.map(g=>g)),f(i,["requests[]","content"],h)}const l=d(e,["config"]);l!=null&&bC(l,i);const c=d(e,["model"]);return c!==void 0&&f(i,["requests[]","model"],Ne(t,c)),i}function xC(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ne(t,s));const a=d(e,["contents"]);if(a!=null){let c=cd(t,a);Array.isArray(c)&&(c=c.map(h=>h)),f(i,["instances[]","content"],c)}const l=d(e,["config"]);return l!=null&&CC(l,i),i}function NC(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["embeddings"],l)}const a=d(t,["metadata"]);return a!=null&&f(e,["metadata"],a),e}function IC(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>uC(c))),f(e,["embeddings"],l)}const a=d(t,["metadata"]);return a!=null&&f(e,["metadata"],a),e}function MC(t){const e={},i=d(t,["endpoint"]);i!=null&&f(e,["name"],i);const s=d(t,["deployedModelId"]);return s!=null&&f(e,["deployedModelId"],s),e}function DC(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function UC(t){const e={},i=d(t,["id"]);i!=null&&f(e,["id"],i);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const a=d(t,["name"]);if(a!=null&&f(e,["name"],a),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function kC(t){const e={},i=d(t,["mode"]);i!=null&&f(e,["mode"],i);const s=d(t,["allowedFunctionNames"]);if(s!=null&&f(e,["allowedFunctionNames"],s),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function OC(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(t,["description"]);i!=null&&f(e,["description"],i);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const a=d(t,["parameters"]);a!=null&&f(e,["parameters"],a);const l=d(t,["parametersJsonSchema"]);l!=null&&f(e,["parametersJsonSchema"],l);const c=d(t,["response"]);c!=null&&f(e,["response"],c);const h=d(t,["responseJsonSchema"]);return h!=null&&f(e,["responseJsonSchema"],h),e}function LC(t,e,i){const s={},a=d(e,["systemInstruction"]);i!==void 0&&a!=null&&f(i,["systemInstruction"],Fa(vt(a)));const l=d(e,["temperature"]);l!=null&&f(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&f(s,["topP"],c);const h=d(e,["topK"]);h!=null&&f(s,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(s,["candidateCount"],g);const m=d(e,["maxOutputTokens"]);m!=null&&f(s,["maxOutputTokens"],m);const v=d(e,["stopSequences"]);v!=null&&f(s,["stopSequences"],v);const _=d(e,["responseLogprobs"]);_!=null&&f(s,["responseLogprobs"],_);const S=d(e,["logprobs"]);S!=null&&f(s,["logprobs"],S);const w=d(e,["presencePenalty"]);w!=null&&f(s,["presencePenalty"],w);const b=d(e,["frequencyPenalty"]);b!=null&&f(s,["frequencyPenalty"],b);const R=d(e,["seed"]);R!=null&&f(s,["seed"],R);const x=d(e,["responseMimeType"]);x!=null&&f(s,["responseMimeType"],x);const U=d(e,["responseSchema"]);U!=null&&f(s,["responseSchema"],dd(U));const H=d(e,["responseJsonSchema"]);if(H!=null&&f(s,["responseJsonSchema"],H),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const D=d(e,["safetySettings"]);if(i!==void 0&&D!=null){let Ce=D;Array.isArray(Ce)&&(Ce=Ce.map($e=>CR($e))),f(i,["safetySettings"],Ce)}const Y=d(e,["tools"]);if(i!==void 0&&Y!=null){let Ce=Ko(Y);Array.isArray(Ce)&&(Ce=Ce.map($e=>UR(Yo($e)))),f(i,["tools"],Ce)}const X=d(e,["toolConfig"]);if(i!==void 0&&X!=null&&f(i,["toolConfig"],DR(X)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const B=d(e,["cachedContent"]);i!==void 0&&B!=null&&f(i,["cachedContent"],Hn(t,B));const z=d(e,["responseModalities"]);z!=null&&f(s,["responseModalities"],z);const ne=d(e,["mediaResolution"]);ne!=null&&f(s,["mediaResolution"],ne);const K=d(e,["speechConfig"]);if(K!=null&&f(s,["speechConfig"],fd(K)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const le=d(e,["thinkingConfig"]);le!=null&&f(s,["thinkingConfig"],le);const ye=d(e,["imageConfig"]);ye!=null&&f(s,["imageConfig"],uR(ye));const ke=d(e,["enableEnhancedCivicAnswers"]);return ke!=null&&f(s,["enableEnhancedCivicAnswers"],ke),s}function PC(t,e,i){const s={},a=d(e,["systemInstruction"]);i!==void 0&&a!=null&&f(i,["systemInstruction"],vt(a));const l=d(e,["temperature"]);l!=null&&f(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&f(s,["topP"],c);const h=d(e,["topK"]);h!=null&&f(s,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(s,["candidateCount"],g);const m=d(e,["maxOutputTokens"]);m!=null&&f(s,["maxOutputTokens"],m);const v=d(e,["stopSequences"]);v!=null&&f(s,["stopSequences"],v);const _=d(e,["responseLogprobs"]);_!=null&&f(s,["responseLogprobs"],_);const S=d(e,["logprobs"]);S!=null&&f(s,["logprobs"],S);const w=d(e,["presencePenalty"]);w!=null&&f(s,["presencePenalty"],w);const b=d(e,["frequencyPenalty"]);b!=null&&f(s,["frequencyPenalty"],b);const R=d(e,["seed"]);R!=null&&f(s,["seed"],R);const x=d(e,["responseMimeType"]);x!=null&&f(s,["responseMimeType"],x);const U=d(e,["responseSchema"]);U!=null&&f(s,["responseSchema"],dd(U));const H=d(e,["responseJsonSchema"]);H!=null&&f(s,["responseJsonSchema"],H);const D=d(e,["routingConfig"]);D!=null&&f(s,["routingConfig"],D);const Y=d(e,["modelSelectionConfig"]);Y!=null&&f(s,["modelConfig"],Y);const X=d(e,["safetySettings"]);if(i!==void 0&&X!=null){let G=X;Array.isArray(G)&&(G=G.map(Q=>Q)),f(i,["safetySettings"],G)}const B=d(e,["tools"]);if(i!==void 0&&B!=null){let G=Ko(B);Array.isArray(G)&&(G=G.map(Q=>pv(Yo(Q)))),f(i,["tools"],G)}const z=d(e,["toolConfig"]);i!==void 0&&z!=null&&f(i,["toolConfig"],z);const ne=d(e,["labels"]);i!==void 0&&ne!=null&&f(i,["labels"],ne);const K=d(e,["cachedContent"]);i!==void 0&&K!=null&&f(i,["cachedContent"],Hn(t,K));const le=d(e,["responseModalities"]);le!=null&&f(s,["responseModalities"],le);const ye=d(e,["mediaResolution"]);ye!=null&&f(s,["mediaResolution"],ye);const ke=d(e,["speechConfig"]);ke!=null&&f(s,["speechConfig"],fd(ke));const Ce=d(e,["audioTimestamp"]);Ce!=null&&f(s,["audioTimestamp"],Ce);const $e=d(e,["thinkingConfig"]);$e!=null&&f(s,["thinkingConfig"],$e);const st=d(e,["imageConfig"]);if(st!=null&&f(s,["imageConfig"],cR(st)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function hy(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ne(t,s));const a=d(e,["contents"]);if(a!=null){let c=en(a);Array.isArray(c)&&(c=c.map(h=>Fa(h))),f(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&f(i,["generationConfig"],LC(t,l,i)),i}function py(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ne(t,s));const a=d(e,["contents"]);if(a!=null){let c=en(a);Array.isArray(c)&&(c=c.map(h=>h)),f(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&f(i,["generationConfig"],PC(t,l,i)),i}function my(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(m=>sC(m))),f(e,["candidates"],g)}const a=d(t,["modelVersion"]);a!=null&&f(e,["modelVersion"],a);const l=d(t,["promptFeedback"]);l!=null&&f(e,["promptFeedback"],l);const c=d(t,["responseId"]);c!=null&&f(e,["responseId"],c);const h=d(t,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function gy(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>v)),f(e,["candidates"],m)}const a=d(t,["createTime"]);a!=null&&f(e,["createTime"],a);const l=d(t,["modelVersion"]);l!=null&&f(e,["modelVersion"],l);const c=d(t,["promptFeedback"]);c!=null&&f(e,["promptFeedback"],c);const h=d(t,["responseId"]);h!=null&&f(e,["responseId"],h);const g=d(t,["usageMetadata"]);return g!=null&&f(e,["usageMetadata"],g),e}function qC(t,e){const i={};if(d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=d(t,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const a=d(t,["aspectRatio"]);e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a);const l=d(t,["guidanceScale"]);if(e!==void 0&&l!=null&&f(e,["parameters","guidanceScale"],l),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=d(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const h=d(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const g=d(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&f(e,["parameters","includeSafetyAttributes"],g);const m=d(t,["includeRaiReason"]);e!==void 0&&m!=null&&f(e,["parameters","includeRaiReason"],m);const v=d(t,["language"]);e!==void 0&&v!=null&&f(e,["parameters","language"],v);const _=d(t,["outputMimeType"]);e!==void 0&&_!=null&&f(e,["parameters","outputOptions","mimeType"],_);const S=d(t,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&f(e,["parameters","outputOptions","compressionQuality"],S),d(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=d(t,["imageSize"]);if(e!==void 0&&w!=null&&f(e,["parameters","sampleImageSize"],w),d(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function GC(t,e){const i={},s=d(t,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const a=d(t,["negativePrompt"]);e!==void 0&&a!=null&&f(e,["parameters","negativePrompt"],a);const l=d(t,["numberOfImages"]);e!==void 0&&l!=null&&f(e,["parameters","sampleCount"],l);const c=d(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=d(t,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const g=d(t,["seed"]);e!==void 0&&g!=null&&f(e,["parameters","seed"],g);const m=d(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&f(e,["parameters","safetySetting"],m);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const _=d(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&f(e,["parameters","includeSafetyAttributes"],_);const S=d(t,["includeRaiReason"]);e!==void 0&&S!=null&&f(e,["parameters","includeRaiReason"],S);const w=d(t,["language"]);e!==void 0&&w!=null&&f(e,["parameters","language"],w);const b=d(t,["outputMimeType"]);e!==void 0&&b!=null&&f(e,["parameters","outputOptions","mimeType"],b);const R=d(t,["outputCompressionQuality"]);e!==void 0&&R!=null&&f(e,["parameters","outputOptions","compressionQuality"],R);const x=d(t,["addWatermark"]);e!==void 0&&x!=null&&f(e,["parameters","addWatermark"],x);const U=d(t,["labels"]);e!==void 0&&U!=null&&f(e,["labels"],U);const H=d(t,["imageSize"]);e!==void 0&&H!=null&&f(e,["parameters","sampleImageSize"],H);const D=d(t,["enhancePrompt"]);return e!==void 0&&D!=null&&f(e,["parameters","enhancePrompt"],D),i}function HC(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ne(t,s));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["config"]);return l!=null&&qC(l,i),i}function VC(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ne(t,s));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["config"]);return l!=null&&GC(l,i),i}function BC(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>eR(c))),f(e,["generatedImages"],l)}const a=d(t,["positivePromptSafetyAttributes"]);return a!=null&&f(e,["positivePromptSafetyAttributes"],fv(a)),e}function zC(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>$a(c))),f(e,["generatedImages"],l)}const a=d(t,["positivePromptSafetyAttributes"]);return a!=null&&f(e,["positivePromptSafetyAttributes"],hv(a)),e}function FC(t,e){const i={},s=d(t,["numberOfVideos"]);if(e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s),d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=d(t,["durationSeconds"]);if(e!==void 0&&a!=null&&f(e,["parameters","durationSeconds"],a),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=d(t,["aspectRatio"]);e!==void 0&&l!=null&&f(e,["parameters","aspectRatio"],l);const c=d(t,["resolution"]);e!==void 0&&c!=null&&f(e,["parameters","resolution"],c);const h=d(t,["personGeneration"]);if(e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h),d(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=d(t,["negativePrompt"]);e!==void 0&&g!=null&&f(e,["parameters","negativePrompt"],g);const m=d(t,["enhancePrompt"]);if(e!==void 0&&m!=null&&f(e,["parameters","enhancePrompt"],m),d(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=d(t,["lastFrame"]);e!==void 0&&v!=null&&f(e,["instances[0]","lastFrame"],Ja(v));const _=d(t,["referenceImages"]);if(e!==void 0&&_!=null){let S=_;Array.isArray(S)&&(S=S.map(w=>JR(w))),f(e,["instances[0]","referenceImages"],S)}if(d(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function $C(t,e){const i={},s=d(t,["numberOfVideos"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const a=d(t,["outputGcsUri"]);e!==void 0&&a!=null&&f(e,["parameters","storageUri"],a);const l=d(t,["fps"]);e!==void 0&&l!=null&&f(e,["parameters","fps"],l);const c=d(t,["durationSeconds"]);e!==void 0&&c!=null&&f(e,["parameters","durationSeconds"],c);const h=d(t,["seed"]);e!==void 0&&h!=null&&f(e,["parameters","seed"],h);const g=d(t,["aspectRatio"]);e!==void 0&&g!=null&&f(e,["parameters","aspectRatio"],g);const m=d(t,["resolution"]);e!==void 0&&m!=null&&f(e,["parameters","resolution"],m);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const _=d(t,["pubsubTopic"]);e!==void 0&&_!=null&&f(e,["parameters","pubsubTopic"],_);const S=d(t,["negativePrompt"]);e!==void 0&&S!=null&&f(e,["parameters","negativePrompt"],S);const w=d(t,["enhancePrompt"]);e!==void 0&&w!=null&&f(e,["parameters","enhancePrompt"],w);const b=d(t,["generateAudio"]);e!==void 0&&b!=null&&f(e,["parameters","generateAudio"],b);const R=d(t,["lastFrame"]);e!==void 0&&R!=null&&f(e,["instances[0]","lastFrame"],fn(R));const x=d(t,["referenceImages"]);if(e!==void 0&&x!=null){let D=x;Array.isArray(D)&&(D=D.map(Y=>YR(Y))),f(e,["instances[0]","referenceImages"],D)}const U=d(t,["mask"]);e!==void 0&&U!=null&&f(e,["instances[0]","mask"],$R(U));const H=d(t,["compressionQuality"]);return e!==void 0&&H!=null&&f(e,["parameters","compressionQuality"],H),i}function JC(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],QC(c)),e}function YC(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response"]);return c!=null&&f(e,["response"],WC(c)),e}function KC(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ne(t,s));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["image"]);l!=null&&f(i,["instances[0]","image"],Ja(l));const c=d(e,["video"]);c!=null&&f(i,["instances[0]","video"],mv(c));const h=d(e,["source"]);h!=null&&ZC(h,i);const g=d(e,["config"]);return g!=null&&FC(g,i),i}function XC(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ne(t,s));const a=d(e,["prompt"]);a!=null&&f(i,["instances[0]","prompt"],a);const l=d(e,["image"]);l!=null&&f(i,["instances[0]","image"],fn(l));const c=d(e,["video"]);c!=null&&f(i,["instances[0]","video"],gv(c));const h=d(e,["source"]);h!=null&&jC(h,i);const g=d(e,["config"]);return g!=null&&$C(g,i),i}function QC(t){const e={},i=d(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>nR(c))),f(e,["generatedVideos"],l)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const a=d(t,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function WC(t){const e={},i=d(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>iR(c))),f(e,["generatedVideos"],l)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const a=d(t,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function ZC(t,e){const i={},s=d(t,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const a=d(t,["image"]);e!==void 0&&a!=null&&f(e,["instances[0]","image"],Ja(a));const l=d(t,["video"]);return e!==void 0&&l!=null&&f(e,["instances[0]","video"],mv(l)),i}function jC(t,e){const i={},s=d(t,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const a=d(t,["image"]);e!==void 0&&a!=null&&f(e,["instances[0]","image"],fn(a));const l=d(t,["video"]);return e!==void 0&&l!=null&&f(e,["instances[0]","video"],gv(l)),i}function eR(t){const e={},i=d(t,["_self"]);i!=null&&f(e,["image"],dR(i));const s=d(t,["raiFilteredReason"]);s!=null&&f(e,["raiFilteredReason"],s);const a=d(t,["_self"]);return a!=null&&f(e,["safetyAttributes"],fv(a)),e}function $a(t){const e={},i=d(t,["_self"]);i!=null&&f(e,["image"],dv(i));const s=d(t,["raiFilteredReason"]);s!=null&&f(e,["raiFilteredReason"],s);const a=d(t,["_self"]);a!=null&&f(e,["safetyAttributes"],hv(a));const l=d(t,["prompt"]);return l!=null&&f(e,["enhancedPrompt"],l),e}function tR(t){const e={},i=d(t,["_self"]);i!=null&&f(e,["mask"],dv(i));const s=d(t,["labels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),f(e,["labels"],a)}return e}function nR(t){const e={},i=d(t,["video"]);return i!=null&&f(e,["video"],zR(i)),e}function iR(t){const e={},i=d(t,["_self"]);return i!=null&&f(e,["video"],FR(i)),e}function oR(t){const e={},i=d(t,["modelSelectionConfig"]);i!=null&&f(e,["modelConfig"],i);const s=d(t,["responseJsonSchema"]);s!=null&&f(e,["responseJsonSchema"],s);const a=d(t,["audioTimestamp"]);a!=null&&f(e,["audioTimestamp"],a);const l=d(t,["candidateCount"]);l!=null&&f(e,["candidateCount"],l);const c=d(t,["enableAffectiveDialog"]);c!=null&&f(e,["enableAffectiveDialog"],c);const h=d(t,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const g=d(t,["logprobs"]);g!=null&&f(e,["logprobs"],g);const m=d(t,["maxOutputTokens"]);m!=null&&f(e,["maxOutputTokens"],m);const v=d(t,["mediaResolution"]);v!=null&&f(e,["mediaResolution"],v);const _=d(t,["presencePenalty"]);_!=null&&f(e,["presencePenalty"],_);const S=d(t,["responseLogprobs"]);S!=null&&f(e,["responseLogprobs"],S);const w=d(t,["responseMimeType"]);w!=null&&f(e,["responseMimeType"],w);const b=d(t,["responseModalities"]);b!=null&&f(e,["responseModalities"],b);const R=d(t,["responseSchema"]);R!=null&&f(e,["responseSchema"],R);const x=d(t,["routingConfig"]);x!=null&&f(e,["routingConfig"],x);const U=d(t,["seed"]);U!=null&&f(e,["seed"],U);const H=d(t,["speechConfig"]);H!=null&&f(e,["speechConfig"],H);const D=d(t,["stopSequences"]);D!=null&&f(e,["stopSequences"],D);const Y=d(t,["temperature"]);Y!=null&&f(e,["temperature"],Y);const X=d(t,["thinkingConfig"]);X!=null&&f(e,["thinkingConfig"],X);const B=d(t,["topK"]);B!=null&&f(e,["topK"],B);const z=d(t,["topP"]);if(z!=null&&f(e,["topP"],z),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function sR(t,e){const i={},s=d(e,["model"]);return s!=null&&f(i,["_url","name"],Ne(t,s)),i}function rR(t,e){const i={},s=d(e,["model"]);return s!=null&&f(i,["_url","name"],Ne(t,s)),i}function aR(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function lR(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function uR(t){const e={},i=d(t,["aspectRatio"]);i!=null&&f(e,["aspectRatio"],i);const s=d(t,["imageSize"]);if(s!=null&&f(e,["imageSize"],s),d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function cR(t){const e={},i=d(t,["aspectRatio"]);i!=null&&f(e,["aspectRatio"],i);const s=d(t,["imageSize"]);s!=null&&f(e,["imageSize"],s);const a=d(t,["outputMimeType"]);a!=null&&f(e,["imageOutputOptions","mimeType"],a);const l=d(t,["outputCompressionQuality"]);return l!=null&&f(e,["imageOutputOptions","compressionQuality"],l),e}function dR(t){const e={},i=d(t,["bytesBase64Encoded"]);i!=null&&f(e,["imageBytes"],pi(i));const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function dv(t){const e={},i=d(t,["gcsUri"]);i!=null&&f(e,["gcsUri"],i);const s=d(t,["bytesBase64Encoded"]);s!=null&&f(e,["imageBytes"],pi(s));const a=d(t,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function Ja(t){const e={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=d(t,["imageBytes"]);i!=null&&f(e,["bytesBase64Encoded"],pi(i));const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function fn(t){const e={},i=d(t,["gcsUri"]);i!=null&&f(e,["gcsUri"],i);const s=d(t,["imageBytes"]);s!=null&&f(e,["bytesBase64Encoded"],pi(s));const a=d(t,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function fR(t,e,i){const s={},a=d(e,["pageSize"]);i!==void 0&&a!=null&&f(i,["_query","pageSize"],a);const l=d(e,["pageToken"]);i!==void 0&&l!=null&&f(i,["_query","pageToken"],l);const c=d(e,["filter"]);i!==void 0&&c!=null&&f(i,["_query","filter"],c);const h=d(e,["queryBase"]);return i!==void 0&&h!=null&&f(i,["_url","models_url"],ov(t,h)),s}function hR(t,e,i){const s={},a=d(e,["pageSize"]);i!==void 0&&a!=null&&f(i,["_query","pageSize"],a);const l=d(e,["pageToken"]);i!==void 0&&l!=null&&f(i,["_query","pageToken"],l);const c=d(e,["filter"]);i!==void 0&&c!=null&&f(i,["_query","filter"],c);const h=d(e,["queryBase"]);return i!==void 0&&h!=null&&f(i,["_url","models_url"],ov(t,h)),s}function pR(t,e){const i={},s=d(e,["config"]);return s!=null&&fR(t,s,i),i}function mR(t,e){const i={},s=d(e,["config"]);return s!=null&&hR(t,s,i),i}function gR(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=d(t,["_self"]);if(a!=null){let l=sv(a);Array.isArray(l)&&(l=l.map(c=>Jc(c))),f(e,["models"],l)}return e}function yR(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=d(t,["_self"]);if(a!=null){let l=sv(a);Array.isArray(l)&&(l=l.map(c=>Yc(c))),f(e,["models"],l)}return e}function vR(t){const e={},i=d(t,["maskMode"]);i!=null&&f(e,["maskMode"],i);const s=d(t,["segmentationClasses"]);s!=null&&f(e,["maskClasses"],s);const a=d(t,["maskDilation"]);return a!=null&&f(e,["dilation"],a),e}function Jc(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const s=d(t,["displayName"]);s!=null&&f(e,["displayName"],s);const a=d(t,["description"]);a!=null&&f(e,["description"],a);const l=d(t,["version"]);l!=null&&f(e,["version"],l);const c=d(t,["_self"]);c!=null&&f(e,["tunedModelInfo"],kR(c));const h=d(t,["inputTokenLimit"]);h!=null&&f(e,["inputTokenLimit"],h);const g=d(t,["outputTokenLimit"]);g!=null&&f(e,["outputTokenLimit"],g);const m=d(t,["supportedGenerationMethods"]);m!=null&&f(e,["supportedActions"],m);const v=d(t,["temperature"]);v!=null&&f(e,["temperature"],v);const _=d(t,["maxTemperature"]);_!=null&&f(e,["maxTemperature"],_);const S=d(t,["topP"]);S!=null&&f(e,["topP"],S);const w=d(t,["topK"]);w!=null&&f(e,["topK"],w);const b=d(t,["thinking"]);return b!=null&&f(e,["thinking"],b),e}function Yc(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const s=d(t,["displayName"]);s!=null&&f(e,["displayName"],s);const a=d(t,["description"]);a!=null&&f(e,["description"],a);const l=d(t,["versionId"]);l!=null&&f(e,["version"],l);const c=d(t,["deployedModels"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(S=>MC(S))),f(e,["endpoints"],_)}const h=d(t,["labels"]);h!=null&&f(e,["labels"],h);const g=d(t,["_self"]);g!=null&&f(e,["tunedModelInfo"],OR(g));const m=d(t,["defaultCheckpointId"]);m!=null&&f(e,["defaultCheckpointId"],m);const v=d(t,["checkpoints"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(S=>S)),f(e,["checkpoints"],_)}return e}function _R(t){const e={},i=d(t,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const a=d(t,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(t,["fileData"]);l!=null&&f(e,["fileData"],DC(l));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],UC(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],oC(g));const m=d(t,["text"]);m!=null&&f(e,["text"],m);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function SR(t){const e={},i=d(t,["productImage"]);return i!=null&&f(e,["image"],fn(i)),e}function ER(t,e){const i={},s=d(t,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const a=d(t,["baseSteps"]);e!==void 0&&a!=null&&f(e,["parameters","baseSteps"],a);const l=d(t,["outputGcsUri"]);e!==void 0&&l!=null&&f(e,["parameters","storageUri"],l);const c=d(t,["seed"]);e!==void 0&&c!=null&&f(e,["parameters","seed"],c);const h=d(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&f(e,["parameters","safetySetting"],h);const g=d(t,["personGeneration"]);e!==void 0&&g!=null&&f(e,["parameters","personGeneration"],g);const m=d(t,["addWatermark"]);e!==void 0&&m!=null&&f(e,["parameters","addWatermark"],m);const v=d(t,["outputMimeType"]);e!==void 0&&v!=null&&f(e,["parameters","outputOptions","mimeType"],v);const _=d(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&f(e,["parameters","outputOptions","compressionQuality"],_);const S=d(t,["enhancePrompt"]);e!==void 0&&S!=null&&f(e,["parameters","enhancePrompt"],S);const w=d(t,["labels"]);return e!==void 0&&w!=null&&f(e,["labels"],w),i}function TR(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ne(t,s));const a=d(e,["source"]);a!=null&&AR(a,i);const l=d(e,["config"]);return l!=null&&ER(l,i),i}function wR(t){const e={},i=d(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>$a(a))),f(e,["generatedImages"],s)}return e}function AR(t,e){const i={},s=d(t,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const a=d(t,["personImage"]);e!==void 0&&a!=null&&f(e,["instances[0]","personImage","image"],fn(a));const l=d(t,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>SR(h))),f(e,["instances[0]","productImages"],c)}return i}function bR(t){const e={},i=d(t,["referenceImage"]);i!=null&&f(e,["referenceImage"],fn(i));const s=d(t,["referenceId"]);s!=null&&f(e,["referenceId"],s);const a=d(t,["referenceType"]);a!=null&&f(e,["referenceType"],a);const l=d(t,["maskImageConfig"]);l!=null&&f(e,["maskImageConfig"],vR(l));const c=d(t,["controlImageConfig"]);c!=null&&f(e,["controlImageConfig"],dC(c));const h=d(t,["styleImageConfig"]);h!=null&&f(e,["styleImageConfig"],h);const g=d(t,["subjectImageConfig"]);return g!=null&&f(e,["subjectImageConfig"],g),e}function fv(t){const e={},i=d(t,["safetyAttributes","categories"]);i!=null&&f(e,["categories"],i);const s=d(t,["safetyAttributes","scores"]);s!=null&&f(e,["scores"],s);const a=d(t,["contentType"]);return a!=null&&f(e,["contentType"],a),e}function hv(t){const e={},i=d(t,["safetyAttributes","categories"]);i!=null&&f(e,["categories"],i);const s=d(t,["safetyAttributes","scores"]);s!=null&&f(e,["scores"],s);const a=d(t,["contentType"]);return a!=null&&f(e,["contentType"],a),e}function CR(t){const e={},i=d(t,["category"]);if(i!=null&&f(e,["category"],i),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(t,["threshold"]);return s!=null&&f(e,["threshold"],s),e}function RR(t){const e={},i=d(t,["image"]);return i!=null&&f(e,["image"],fn(i)),e}function xR(t,e){const i={},s=d(t,["mode"]);e!==void 0&&s!=null&&f(e,["parameters","mode"],s);const a=d(t,["maxPredictions"]);e!==void 0&&a!=null&&f(e,["parameters","maxPredictions"],a);const l=d(t,["confidenceThreshold"]);e!==void 0&&l!=null&&f(e,["parameters","confidenceThreshold"],l);const c=d(t,["maskDilation"]);e!==void 0&&c!=null&&f(e,["parameters","maskDilation"],c);const h=d(t,["binaryColorThreshold"]);e!==void 0&&h!=null&&f(e,["parameters","binaryColorThreshold"],h);const g=d(t,["labels"]);return e!==void 0&&g!=null&&f(e,["labels"],g),i}function NR(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ne(t,s));const a=d(e,["source"]);a!=null&&MR(a,i);const l=d(e,["config"]);return l!=null&&xR(l,i),i}function IR(t){const e={},i=d(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>tR(a))),f(e,["generatedMasks"],s)}return e}function MR(t,e){const i={},s=d(t,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const a=d(t,["image"]);e!==void 0&&a!=null&&f(e,["instances[0]","image"],fn(a));const l=d(t,["scribbleImage"]);return e!==void 0&&l!=null&&f(e,["instances[0]","scribble"],RR(l)),i}function DR(t){const e={},i=d(t,["functionCallingConfig"]);i!=null&&f(e,["functionCallingConfig"],kC(i));const s=d(t,["retrievalConfig"]);return s!=null&&f(e,["retrievalConfig"],s),e}function UR(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(t,["googleSearchRetrieval"]);s!=null&&f(e,["googleSearchRetrieval"],s);const a=d(t,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=d(t,["fileSearch"]);l!=null&&f(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],aR(h));const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],lR(g));const m=d(t,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}function pv(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let _=i;Array.isArray(_)&&(_=_.map(S=>OC(S))),f(e,["functionDeclarations"],_)}const s=d(t,["retrieval"]);s!=null&&f(e,["retrieval"],s);const a=d(t,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],a);const l=d(t,["computerUse"]);if(l!=null&&f(e,["computerUse"],l),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(t,["codeExecution"]);c!=null&&f(e,["codeExecution"],c);const h=d(t,["enterpriseWebSearch"]);h!=null&&f(e,["enterpriseWebSearch"],h);const g=d(t,["googleMaps"]);g!=null&&f(e,["googleMaps"],g);const m=d(t,["googleSearch"]);m!=null&&f(e,["googleSearch"],m);const v=d(t,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function kR(t){const e={},i=d(t,["baseModel"]);i!=null&&f(e,["baseModel"],i);const s=d(t,["createTime"]);s!=null&&f(e,["createTime"],s);const a=d(t,["updateTime"]);return a!=null&&f(e,["updateTime"],a),e}function OR(t){const e={},i=d(t,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&f(e,["baseModel"],i);const s=d(t,["createTime"]);s!=null&&f(e,["createTime"],s);const a=d(t,["updateTime"]);return a!=null&&f(e,["updateTime"],a),e}function LR(t,e){const i={},s=d(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const a=d(t,["description"]);e!==void 0&&a!=null&&f(e,["description"],a);const l=d(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&f(e,["defaultCheckpointId"],l),i}function PR(t,e){const i={},s=d(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const a=d(t,["description"]);e!==void 0&&a!=null&&f(e,["description"],a);const l=d(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&f(e,["defaultCheckpointId"],l),i}function qR(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","name"],Ne(t,s));const a=d(e,["config"]);return a!=null&&LR(a,i),i}function GR(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ne(t,s));const a=d(e,["config"]);return a!=null&&PR(a,i),i}function HR(t,e){const i={},s=d(t,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const a=d(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&f(e,["parameters","safetySetting"],a);const l=d(t,["personGeneration"]);e!==void 0&&l!=null&&f(e,["parameters","personGeneration"],l);const c=d(t,["includeRaiReason"]);e!==void 0&&c!=null&&f(e,["parameters","includeRaiReason"],c);const h=d(t,["outputMimeType"]);e!==void 0&&h!=null&&f(e,["parameters","outputOptions","mimeType"],h);const g=d(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&f(e,["parameters","outputOptions","compressionQuality"],g);const m=d(t,["enhanceInputImage"]);e!==void 0&&m!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=d(t,["imagePreservationFactor"]);e!==void 0&&v!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const _=d(t,["labels"]);e!==void 0&&_!=null&&f(e,["labels"],_);const S=d(t,["numberOfImages"]);e!==void 0&&S!=null&&f(e,["parameters","sampleCount"],S);const w=d(t,["mode"]);return e!==void 0&&w!=null&&f(e,["parameters","mode"],w),i}function VR(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["_url","model"],Ne(t,s));const a=d(e,["image"]);a!=null&&f(i,["instances[0]","image"],fn(a));const l=d(e,["upscaleFactor"]);l!=null&&f(i,["parameters","upscaleConfig","upscaleFactor"],l);const c=d(e,["config"]);return c!=null&&HR(c,i),i}function BR(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>$a(l))),f(e,["generatedImages"],a)}return e}function zR(t){const e={},i=d(t,["uri"]);i!=null&&f(e,["uri"],i);const s=d(t,["encodedVideo"]);s!=null&&f(e,["videoBytes"],pi(s));const a=d(t,["encoding"]);return a!=null&&f(e,["mimeType"],a),e}function FR(t){const e={},i=d(t,["gcsUri"]);i!=null&&f(e,["uri"],i);const s=d(t,["bytesBase64Encoded"]);s!=null&&f(e,["videoBytes"],pi(s));const a=d(t,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}function $R(t){const e={},i=d(t,["image"]);i!=null&&f(e,["_self"],fn(i));const s=d(t,["maskMode"]);return s!=null&&f(e,["maskMode"],s),e}function JR(t){const e={},i=d(t,["image"]);i!=null&&f(e,["image"],Ja(i));const s=d(t,["referenceType"]);return s!=null&&f(e,["referenceType"],s),e}function YR(t){const e={},i=d(t,["image"]);i!=null&&f(e,["image"],fn(i));const s=d(t,["referenceType"]);return s!=null&&f(e,["referenceType"],s),e}function mv(t){const e={},i=d(t,["uri"]);i!=null&&f(e,["uri"],i);const s=d(t,["videoBytes"]);s!=null&&f(e,["encodedVideo"],pi(s));const a=d(t,["mimeType"]);return a!=null&&f(e,["encoding"],a),e}function gv(t){const e={},i=d(t,["uri"]);i!=null&&f(e,["gcsUri"],i);const s=d(t,["videoBytes"]);s!=null&&f(e,["bytesBase64Encoded"],pi(s));const a=d(t,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KR(t,e){const i={},s=d(t,["displayName"]);return e!==void 0&&s!=null&&f(e,["displayName"],s),i}function XR(t){const e={},i=d(t,["config"]);return i!=null&&KR(i,e),e}function QR(t,e){const i={},s=d(t,["force"]);return e!==void 0&&s!=null&&f(e,["_query","force"],s),i}function WR(t){const e={},i=d(t,["name"]);i!=null&&f(e,["_url","name"],i);const s=d(t,["config"]);return s!=null&&QR(s,e),e}function ZR(t){const e={},i=d(t,["name"]);return i!=null&&f(e,["_url","name"],i),e}function jR(t,e){const i={},s=d(t,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["customMetadata"],l)}const a=d(t,["chunkingConfig"]);return e!==void 0&&a!=null&&f(e,["chunkingConfig"],a),i}function ex(t){const e={},i=d(t,["name"]);i!=null&&f(e,["name"],i);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const a=d(t,["done"]);a!=null&&f(e,["done"],a);const l=d(t,["error"]);l!=null&&f(e,["error"],l);const c=d(t,["response"]);return c!=null&&f(e,["response"],nx(c)),e}function tx(t){const e={},i=d(t,["fileSearchStoreName"]);i!=null&&f(e,["_url","file_search_store_name"],i);const s=d(t,["fileName"]);s!=null&&f(e,["fileName"],s);const a=d(t,["config"]);return a!=null&&jR(a,e),e}function nx(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["parent"]);s!=null&&f(e,["parent"],s);const a=d(t,["documentName"]);return a!=null&&f(e,["documentName"],a),e}function ix(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=d(t,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function ox(t){const e={},i=d(t,["config"]);return i!=null&&ix(i,e),e}function sx(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=d(t,["fileSearchStores"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["fileSearchStores"],l)}return e}function yv(t,e){const i={},s=d(t,["mimeType"]);e!==void 0&&s!=null&&f(e,["mimeType"],s);const a=d(t,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const l=d(t,["customMetadata"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(g=>g)),f(e,["customMetadata"],h)}const c=d(t,["chunkingConfig"]);return e!==void 0&&c!=null&&f(e,["chunkingConfig"],c),i}function rx(t){const e={},i=d(t,["fileSearchStoreName"]);i!=null&&f(e,["_url","file_search_store_name"],i);const s=d(t,["config"]);return s!=null&&yv(s,e),e}function ax(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lx="Content-Type",ux="X-Server-Timeout",cx="User-Agent",Kc="x-goog-api-client",dx="1.34.0",fx=`google-genai-sdk/${dx}`,hx="v1beta1",px="v1beta";class mx{constructor(e){var i,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:hx,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:px,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,s){const a=[this.getRequestUrlInternal(i)];return s&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,i,s);if(e.queryParams)for(const[c,h]of Object.entries(e.queryParams))a.searchParams.append(c,String(h));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,i,a.toString(),e.abortSignal),this.unaryApiCall(a,l,e.httpMethod)}patchHttpOptions(e,i){const s=JSON.parse(JSON.stringify(e));for(const[a,l]of Object.entries(i))typeof l=="object"?s[a]=Object.assign(Object.assign({},s[a]),l):l!==void 0&&(s[a]=l);return s}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,i,s);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,i,a.toString(),e.abortSignal),this.streamApiCall(a,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,s,a){if(i&&i.timeout||a){const l=new AbortController,c=l.signal;if(i.timeout&&(i==null?void 0:i.timeout)>0){const h=setTimeout(()=>l.abort(),i.timeout);h&&typeof h.unref=="function"&&h.unref()}a&&a.addEventListener("abort",()=>{l.abort()}),e.signal=c}return i&&i.extraBody!==null&&gx(e,i.extraBody),e.headers=await this.getHeadersInternal(i,s),e}async unaryApiCall(e,i,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:s})).then(async a=>(await yy(a),new zc(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,i,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:s})).then(async a=>(await yy(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){return cn(this,arguments,function*(){var s;const a=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),l=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let c="";const h="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:v}=yield fe(a.read());if(m){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const _=l.decode(v,{stream:!0});try{const b=JSON.parse(_);if("error"in b){const R=JSON.parse(JSON.stringify(b.error)),x=R.status,U=R.code,H=`got status: ${x}. ${JSON.stringify(b)}`;if(U>=400&&U<600)throw new za({message:H,status:U})}}catch(b){if(b.name==="ApiError")throw b}c+=_;let S=-1,w=0;for(;;){S=-1,w=0;for(const x of g){const U=c.indexOf(x);U!==-1&&(S===-1||U<S)&&(S=U,w=x.length)}if(S===-1)break;const b=c.substring(0,S);c=c.substring(S+w);const R=b.trim();if(R.startsWith(h)){const x=R.substring(h.length).trim();try{const U=new Response(x,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield fe(new zc(U))}catch(U){throw new Error(`exception parsing stream chunk ${x}. ${U}`)}}}}}finally{a.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},i=fx+" "+this.clientOptions.userAgentExtra;return e[cx]=i,e[Kc]=i,e[lx]="application/json",e}async getHeadersInternal(e,i){const s=new Headers;if(e&&e.headers){for(const[a,l]of Object.entries(e.headers))s.append(a,l);e.timeout&&e.timeout>0&&s.append(ux,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,i),s}getFileName(e){var i;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(i=s.split(/[/\\]/).pop())!==null&&i!==void 0?i:""),s}async uploadFile(e,i){var s;const a={};i!=null&&(a.mimeType=i.mimeType,a.name=i.name,a.displayName=i.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);a.sizeBytes=String(c.size);const h=(s=i==null?void 0:i.mimeType)!==null&&s!==void 0?s:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=h;const g={file:a},m=this.getFileName(e),v=j("upload/v1beta/files",g._url),_=await this.fetchUploadUrl(v,a.sizeBytes,a.mimeType,m,g,i==null?void 0:i.httpOptions);return l.upload(e,_,this)}async uploadFileToFileSearchStore(e,i,s){var a;const l=this.clientOptions.uploader,c=await l.stat(i),h=String(c.size),g=(a=s==null?void 0:s.mimeType)!==null&&a!==void 0?a:c.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(i),_={};s!=null&&yv(s,_);const S=await this.fetchUploadUrl(m,h,g,v,_,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(i,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i,s,a,l,c){var h;let g={};c?g=c:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i}`,"X-Goog-Upload-Header-Content-Type":`${s}`},a?{"X-Goog-Upload-File-Name":a}:{})};const m=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(h=m==null?void 0:m.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function yy(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const i=t.status;let s;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await t.json():s={error:{message:await t.text(),code:t.status,status:t.statusText}};const a=JSON.stringify(s);throw i>=400&&i<600?new za({message:a,status:i}):new Error(a)}}function gx(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))i=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,c){const h=Object.assign({},l);for(const g in c)if(Object.prototype.hasOwnProperty.call(c,g)){const m=c[g],v=h[g];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?h[g]=s(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),h[g]=m)}return h}const a=s(i,e);t.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yx="mcp_used/unknown";let vx=!1;function vv(t){for(const e of t)if(_x(e)||typeof e=="object"&&"inputSchema"in e)return!0;return vx}function _v(t){var e;const i=(e=t[Kc])!==null&&e!==void 0?e:"";t[Kc]=(i+` ${yx}`).trimStart()}function _x(t){return t!==null&&typeof t=="object"&&t instanceof pd}function Sx(t){return cn(this,arguments,function*(i,s=100){let a,l=0;for(;l<s;){const c=yield fe(i.listTools({cursor:a}));for(const h of c.tools)yield yield fe(h),l++;if(!c.nextCursor)break;a=c.nextCursor}})}class pd{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new pd(e,i)}async initialize(){var e,i,s,a;if(this.mcpTools.length>0)return;const l={},c=[];for(const v of this.mcpClients)try{for(var h=!0,g=(i=void 0,dn(Sx(v))),m;m=await g.next(),e=m.done,!e;h=!0){a=m.value,h=!1;const _=a;c.push(_);const S=_.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=v}}catch(_){i={error:_}}finally{try{!h&&!e&&(s=g.return)&&await s.call(g)}finally{if(i)throw i.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),Zw(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await a.callTool({name:s.name,arguments:s.args},void 0,l);i.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Ex(t,e,i){const s=new Fw;let a;i.data instanceof Blob?a=JSON.parse(await i.data.text()):a=JSON.parse(i.data),Object.assign(s,a),e(s)}class Tx{constructor(e,i,s){this.apiClient=e,this.auth=i,this.webSocketFactory=s}async connect(e){var i,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=bx(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),g=`${a}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${h}`;let m=()=>{};const v=new Promise(D=>{m=D}),_=e.callbacks,S=function(){m({})},w=this.apiClient,b={onopen:S,onmessage:D=>{Ex(w,_.onmessage,D)},onerror:(i=_==null?void 0:_.onerror)!==null&&i!==void 0?i:function(D){},onclose:(s=_==null?void 0:_.onclose)!==null&&s!==void 0?s:function(D){}},R=this.webSocketFactory.create(g,Ax(c),b);R.connect(),await v;const H={setup:{model:Ne(this.apiClient,e.model)}};return R.send(JSON.stringify(H)),new wx(R,this.apiClient)}}class wx{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=Xb(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=Kb(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const i={playbackControl:e};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(Bo.PLAY)}pause(){this.sendPlaybackControl(Bo.PAUSE)}stop(){this.sendPlaybackControl(Bo.STOP)}resetContext(){this.sendPlaybackControl(Bo.RESET_CONTEXT)}close(){this.conn.close()}}function Ax(t){const e={};return t.forEach((i,s)=>{e[s]=i}),e}function bx(t){const e=new Headers;for(const[i,s]of Object.entries(t))e.append(i,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cx="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Rx(t,e,i){const s=new zw;let a;i.data instanceof Blob?a=await i.data.text():i.data instanceof ArrayBuffer?a=new TextDecoder().decode(i.data):a=i.data;const l=JSON.parse(a);if(t.isVertexAI()){const c=Zb(l);Object.assign(s,c)}else Object.assign(s,l);e(s)}class xx{constructor(e,i,s){this.apiClient=e,this.auth=i,this.webSocketFactory=s,this.music=new Tx(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,s,a,l,c,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&vv(e.config.tools)&&_v(_);const S=Dx(_);if(this.apiClient.isVertexAI())v=`${g}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const K=this.apiClient.getApiKey();let le="BidiGenerateContent",ye="key";K!=null&&K.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),le="BidiGenerateContentConstrained",ye="access_token"),v=`${g}/ws/google.ai.generativelanguage.${m}.GenerativeService.${le}?${ye}=${K}`}let w=()=>{};const b=new Promise(K=>{w=K}),R=e.callbacks,x=function(){var K;(K=R==null?void 0:R.onopen)===null||K===void 0||K.call(R),w({})},U=this.apiClient,H={onopen:x,onmessage:K=>{Rx(U,R.onmessage,K)},onerror:(i=R==null?void 0:R.onerror)!==null&&i!==void 0?i:function(K){},onclose:(s=R==null?void 0:R.onclose)!==null&&s!==void 0?s:function(K){}},D=this.webSocketFactory.create(v,Mx(S),H);D.connect(),await b;let Y=Ne(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&Y.startsWith("publishers/")){const K=this.apiClient.getProject(),le=this.apiClient.getLocation();Y=`projects/${K}/locations/${le}/`+Y}let X={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ka.AUDIO]}:e.config.responseModalities=[ka.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const B=(h=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[],z=[];for(const K of B)if(this.isCallableTool(K)){const le=K;z.push(await le.tool())}else z.push(K);z.length>0&&(e.config.tools=z);const ne={model:Y,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?X=Yb(this.apiClient,ne):X=Jb(this.apiClient,ne),delete X.config,D.send(JSON.stringify(X)),new Ix(D,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Nx={turnComplete:!0};class Ix{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let s=[];try{s=en(i.turns),e.isVertexAI()||(s=s.map(a=>Fa(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:s,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let s=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?s=i.functionResponses:s=[i.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(Cx)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},Nx),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:Wb(e)}:i={realtimeInput:Qb(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function Mx(t){const e={};return t.forEach((i,s)=>{e[s]=i}),e}function Dx(t){const e=new Headers;for(const[i,s]of Object.entries(t))e.append(i,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vy=10;function _y(t){var e,i,s;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const c of(i=t==null?void 0:t.tools)!==null&&i!==void 0?i:[])if(Jo(c)){a=!0;break}if(!a)return!0;const l=(s=t==null?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Jo(t){return"callTool"in t&&typeof t.callTool=="function"}function Ux(t){var e,i,s;return(s=(i=(e=t.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(a=>Jo(a)))!==null&&s!==void 0?s:!1}function Sy(t){var e;const i=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((s,a)=>{if(Jo(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&i.push(a)}),i}function Ey(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kx extends Gn{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var s,a,l,c,h;const g=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!Ux(i)||_y(i.config))return await this.generateContentInternal(g);const m=Sy(i);if(m.length>0){const R=m.map(x=>`tools[${x}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${R}.`)}let v,_;const S=en(g.contents),w=(l=(a=(s=g.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&l!==void 0?l:vy;let b=0;for(;b<w&&(v=await this.generateContentInternal(g),!(!v.functionCalls||v.functionCalls.length===0));){const R=v.candidates[0].content,x=[];for(const U of(h=(c=i.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[])if(Jo(U)){const D=await U.callTool(v.functionCalls);x.push(...D)}b++,_={role:"user",parts:x},g.contents=en(g.contents),g.contents.push(R),g.contents.push(_),Ey(g.config)&&(S.push(R),S.push(_))}return Ey(g.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async i=>{var s,a,l,c,h;if(this.maybeMoveToResponseJsonSchem(i),_y(i.config)){const _=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(_)}const g=Sy(i);if(g.length>0){const _=g.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(l=(a=(s=i==null?void 0:i.config)===null||s===void 0?void 0:s.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,v=(h=(c=i==null?void 0:i.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(s=>{var a;let l;const c=[];if(s!=null&&s.generatedImages)for(const g of s.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((a=g==null?void 0:g.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:c.push(g);let h;return l?h={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:h={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},h}),this.list=async i=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),i==null?void 0:i.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Bi(Pn.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(c),c)},this.editImage=async i=>{const s={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(s.referenceImages=i.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async i=>{let s={numberOfImages:1,mode:"upscale"};i.config&&(s=Object.assign(Object.assign({},s),i.config));const a={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:s};return await this.upscaleImageInternal(a)},this.generateVideos=async i=>{var s,a,l,c,h,g;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=i.video)===null||s===void 0)&&s.uri&&(!((a=i.video)===null||a===void 0)&&a.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((c=(l=i.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((g=(h=i.source)===null||h===void 0?void 0:h.video)===null||g===void 0)&&g.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,s,a;const l=(i=e.config)===null||i===void 0?void 0:i.tools;if(!l)return e;const c=await Promise.all(l.map(async g=>Jo(g)?await g.tool():g)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(h.config.tools=c,e.config&&e.config.tools&&vv(e.config.tools)){const g=(a=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&a!==void 0?a:{};let m=Object.assign({},g);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),_v(m),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return h}async initAfcToolsMap(e){var i,s,a;const l=new Map;for(const c of(s=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&s!==void 0?s:[])if(Jo(c)){const h=c,g=await h.tool();for(const m of(a=g.functionDeclarations)!==null&&a!==void 0?a:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,h)}}return l}async processAfcStream(e){var i,s,a;const l=(a=(s=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:vy;let c=!1,h=0;const g=await this.initAfcToolsMap(e);return(function(m,v,_){return cn(this,arguments,function*(){for(var S,w,b,R,x,U;h<l;){c&&(h++,c=!1);const X=yield fe(m.processParamsMaybeAddMcpUsage(_)),B=yield fe(m.generateContentStreamInternal(X)),z=[],ne=[];try{for(var H=!0,D=(w=void 0,dn(B)),Y;Y=yield fe(D.next()),S=Y.done,!S;H=!0){R=Y.value,H=!1;const K=R;if(yield yield fe(K),K.candidates&&(!((x=K.candidates[0])===null||x===void 0)&&x.content)){ne.push(K.candidates[0].content);for(const le of(U=K.candidates[0].content.parts)!==null&&U!==void 0?U:[])if(h<l&&le.functionCall){if(!le.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(le.functionCall.name)){const ye=yield fe(v.get(le.functionCall.name).callTool([le.functionCall]));z.push(...ye)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${le.functionCall.name}`)}}}}catch(K){w={error:K}}finally{try{!H&&!S&&(b=D.return)&&(yield fe(b.call(D)))}finally{if(w)throw w.error}}if(z.length>0){c=!0;const K=new Fs;K.candidates=[{content:{role:"user",parts:z}}],yield yield fe(K);const le=[];le.push(...ne),le.push({role:"user",parts:z});const ye=en(_.contents).concat(le);_.contents=ye}else break}})})(this,g,e)}async generateContentInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=py(this.apiClient,e);return h=j("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=gy(v),S=new Fs;return Object.assign(S,_),S})}else{const m=hy(this.apiClient,e);return h=j("{model}:generateContent",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=my(v),S=new Fs;return Object.assign(S,_),S})}}async generateContentStreamInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=py(this.apiClient,e);return h=j("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(_){return cn(this,arguments,function*(){var S,w,b,R;try{for(var x=!0,U=dn(_),H;H=yield fe(U.next()),S=H.done,!S;x=!0){R=H.value,x=!1;const D=R,Y=gy(yield fe(D.json()));Y.sdkHttpResponse={headers:D.headers};const X=new Fs;Object.assign(X,Y),yield yield fe(X)}}catch(D){w={error:D}}finally{try{!x&&!S&&(b=U.return)&&(yield fe(b.call(U)))}finally{if(w)throw w.error}}})})}else{const m=hy(this.apiClient,e);return h=j("{model}:streamGenerateContent?alt=sse",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(_){return cn(this,arguments,function*(){var S,w,b,R;try{for(var x=!0,U=dn(_),H;H=yield fe(U.next()),S=H.done,!S;x=!0){R=H.value,x=!1;const D=R,Y=my(yield fe(D.json()));Y.sdkHttpResponse={headers:D.headers};const X=new Fs;Object.assign(X,Y),yield yield fe(X)}}catch(D){w={error:D}}finally{try{!x&&!S&&(b=U.return)&&(yield fe(b.call(U)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=xC(this.apiClient,e);return h=j("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=IC(v),S=new Qg;return Object.assign(S,_),S})}else{const m=RC(this.apiClient,e);return h=j("{model}:batchEmbedContents",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=NC(v),S=new Qg;return Object.assign(S,_),S})}}async generateImagesInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=VC(this.apiClient,e);return h=j("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=zC(v),S=new Wg;return Object.assign(S,_),S})}else{const m=HC(this.apiClient,e);return h=j("{model}:predict",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=BC(v),S=new Wg;return Object.assign(S,_),S})}}async editImageInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=wC(this.apiClient,e);return l=j("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const m=AC(g),v=new Dw;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=VR(this.apiClient,e);return l=j("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const m=BR(g),v=new Uw;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=TR(this.apiClient,e);return l=j("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>{const m=wR(g),v=new kw;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=NR(this.apiClient,e);return l=j("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>{const m=IR(g),v=new Ow;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=rR(this.apiClient,e);return h=j("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Yc(v))}else{const m=sR(this.apiClient,e);return h=j("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Jc(v))}}async listInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=mR(this.apiClient,e);return h=j("{models_url}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=yR(v),S=new Zg;return Object.assign(S,_),S})}else{const m=pR(this.apiClient,e);return h=j("{models_url}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=gR(v),S=new Zg;return Object.assign(S,_),S})}}async update(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=GR(this.apiClient,e);return h=j("{model}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Yc(v))}else{const m=qR(this.apiClient,e);return h=j("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Jc(v))}}async delete(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=_C(this.apiClient,e);return h=j("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=EC(v),S=new jg;return Object.assign(S,_),S})}else{const m=vC(this.apiClient,e);return h=j("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=SC(v),S=new jg;return Object.assign(S,_),S})}}async countTokens(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=mC(this.apiClient,e);return h=j("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=yC(v),S=new ey;return Object.assign(S,_),S})}else{const m=pC(this.apiClient,e);return h=j("{model}:countTokens",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=gC(v),S=new ey;return Object.assign(S,_),S})}}async computeTokens(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=aC(this.apiClient,e);return l=j("{model}:computeTokens",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const m=lC(g),v=new Lw;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=XC(this.apiClient,e);return h=j("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>{const _=YC(v),S=new Oa;return Object.assign(S,_),S})}else{const m=KC(this.apiClient,e);return h=j("{model}:predictLongRunning",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const _=JC(v),S=new Oa;return Object.assign(S,_),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ox extends Gn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,s=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=i.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:a,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:i.name,config:s});return i._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const i=e.operation,s=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=i.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:a,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:i.name,config:s});return i._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=Cw(e);return h=j("{operationName}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c}else{const m=bw(e);return h=j("{operationName}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=vw(e);return l=j("{resourceName}:fetchPredictOperation",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lx(t){const e={},i=d(t,["data"]);if(i!=null&&f(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Px(t){const e={},i=d(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>Jx(l))),f(e,["parts"],a)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function qx(t,e,i){const s={},a=d(e,["expireTime"]);i!==void 0&&a!=null&&f(i,["expireTime"],a);const l=d(e,["newSessionExpireTime"]);i!==void 0&&l!=null&&f(i,["newSessionExpireTime"],l);const c=d(e,["uses"]);i!==void 0&&c!=null&&f(i,["uses"],c);const h=d(e,["liveConnectConstraints"]);i!==void 0&&h!=null&&f(i,["bidiGenerateContentSetup"],$x(t,h));const g=d(e,["lockAdditionalFields"]);return i!==void 0&&g!=null&&f(i,["fieldMask"],g),s}function Gx(t,e){const i={},s=d(e,["config"]);return s!=null&&f(i,["config"],qx(t,s,i)),i}function Hx(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&f(e,["fileUri"],i);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Vx(t){const e={},i=d(t,["id"]);i!=null&&f(e,["id"],i);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const a=d(t,["name"]);if(a!=null&&f(e,["name"],a),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Bx(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function zx(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function Fx(t,e){const i={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],s);const a=d(t,["responseModalities"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","responseModalities"],a);const l=d(t,["temperature"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const m=d(t,["mediaResolution"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","mediaResolution"],m);const v=d(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=d(t,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],hd(_));const S=d(t,["thinkingConfig"]);e!==void 0&&S!=null&&f(e,["setup","generationConfig","thinkingConfig"],S);const w=d(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],w);const b=d(t,["systemInstruction"]);e!==void 0&&b!=null&&f(e,["setup","systemInstruction"],Px(vt(b)));const R=d(t,["tools"]);if(e!==void 0&&R!=null){let B=Ko(R);Array.isArray(B)&&(B=B.map(z=>Kx(Yo(z)))),f(e,["setup","tools"],B)}const x=d(t,["sessionResumption"]);e!==void 0&&x!=null&&f(e,["setup","sessionResumption"],Yx(x));const U=d(t,["inputAudioTranscription"]);e!==void 0&&U!=null&&f(e,["setup","inputAudioTranscription"],U);const H=d(t,["outputAudioTranscription"]);e!==void 0&&H!=null&&f(e,["setup","outputAudioTranscription"],H);const D=d(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&f(e,["setup","realtimeInputConfig"],D);const Y=d(t,["contextWindowCompression"]);e!==void 0&&Y!=null&&f(e,["setup","contextWindowCompression"],Y);const X=d(t,["proactivity"]);if(e!==void 0&&X!=null&&f(e,["setup","proactivity"],X),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function $x(t,e){const i={},s=d(e,["model"]);s!=null&&f(i,["setup","model"],Ne(t,s));const a=d(e,["config"]);return a!=null&&f(i,["config"],Fx(a,i)),i}function Jx(t){const e={},i=d(t,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const a=d(t,["executableCode"]);a!=null&&f(e,["executableCode"],a);const l=d(t,["fileData"]);l!=null&&f(e,["fileData"],Hx(l));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],Vx(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],Lx(g));const m=d(t,["text"]);m!=null&&f(e,["text"],m);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const S=d(t,["videoMetadata"]);return S!=null&&f(e,["videoMetadata"],S),e}function Yx(t){const e={},i=d(t,["handle"]);if(i!=null&&f(e,["handle"],i),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Kx(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(t,["googleSearchRetrieval"]);s!=null&&f(e,["googleSearchRetrieval"],s);const a=d(t,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=d(t,["fileSearch"]);l!=null&&f(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&f(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],Bx(h));const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],zx(g));const m=d(t,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xx(t){const e=[];for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const s=t[i];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const a=Object.keys(s).map(l=>`${i}.${l}`);e.push(...a)}else e.push(i)}return e.join(",")}function Qx(t,e){let i=null;const s=t.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,i=l):delete t.bidiGenerateContentSetup}else s!==void 0&&delete t.bidiGenerateContentSetup;const a=t.fieldMask;if(i){const l=Xx(i);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];a.length>0&&(h=a.map(m=>c.includes(m)?`generationConfig.${m}`:m));const g=[];l&&g.push(l),h.length>0&&g.push(...h),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?t.fieldMask=a.join(","):delete t.fieldMask;return t}class Wx extends Gn{constructor(e){super(),this.apiClient=e}async create(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=Gx(this.apiClient,e);l=j("auth_tokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const g=Qx(h,e.config);return a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zx(t,e){const i={},s=d(t,["force"]);return e!==void 0&&s!=null&&f(e,["_query","force"],s),i}function jx(t){const e={},i=d(t,["name"]);i!=null&&f(e,["_url","name"],i);const s=d(t,["config"]);return s!=null&&Zx(s,e),e}function eN(t){const e={},i=d(t,["name"]);return i!=null&&f(e,["_url","name"],i),e}function tN(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=d(t,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function nN(t){const e={},i=d(t,["parent"]);i!=null&&f(e,["_url","parent"],i);const s=d(t,["config"]);return s!=null&&tN(s,e),e}function iN(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=d(t,["documents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),f(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oN extends Gn{constructor(e){super(),this.apiClient=e,this.list=async i=>new Bi(Pn.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:i.parent,config:s.config}),await this.listInternal(i),i)}async get(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=eN(e);return l=j("{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var i,s;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=jx(e);a=j("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=nN(e);return l=j("{parent}/documents",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>{const m=iN(g),v=new Pw;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sN extends Gn{constructor(e,i=new oN(e)){super(),this.apiClient=e,this.documents=i,this.list=async(s={})=>new Bi(Pn.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=XR(e);return l=j("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async get(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=ZR(e);return l=j("{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var i,s;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=WR(e);a=j("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=ox(e);return l=j("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>{const m=sx(g),v=new qw;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=rx(e);return l=j("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>{const m=ax(g),v=new Gw;return Object.assign(v,m),v})}}async importFile(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=tx(e);return l=j("{file_search_store_name}:importFile",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>{const m=ex(g),v=new ld;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Sv=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Sv=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),i=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^i()&15>>+s/4).toString(16))};const rN=()=>Sv();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xc(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Qc=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tn extends Error{}class Et extends tn{constructor(e,i,s,a){super(`${Et.makeMessage(e,i,s)}`),this.status=e,this.headers=a,this.error=i}static makeMessage(e,i,s){const a=i!=null&&i.message?typeof i.message=="string"?i.message:JSON.stringify(i.message):i?JSON.stringify(i):s;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,i,s,a){if(!e||!a)return new Ya({message:s,cause:Qc(i)});const l=i;return e===400?new Tv(e,l,s,a):e===401?new wv(e,l,s,a):e===403?new Av(e,l,s,a):e===404?new bv(e,l,s,a):e===409?new Cv(e,l,s,a):e===422?new Rv(e,l,s,a):e===429?new xv(e,l,s,a):e>=500?new Nv(e,l,s,a):new Et(e,l,s,a)}}class Wc extends Et{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Ya extends Et{constructor({message:e,cause:i}){super(void 0,void 0,e||"Connection error.",void 0),i&&(this.cause=i)}}class Ev extends Ya{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Tv extends Et{}class wv extends Et{}class Av extends Et{}class bv extends Et{}class Cv extends Et{}class Rv extends Et{}class xv extends Et{}class Nv extends Et{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aN=/^[a-z][a-z0-9+.-]*:/i,lN=t=>aN.test(t);let Zc=t=>(Zc=Array.isArray,Zc(t));const uN=Zc;let cN=uN;const Ty=cN;function dN(t){if(!t)return!0;for(const e in t)return!1;return!0}function fN(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const hN=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new tn(`${t} must be an integer`);if(e<0)throw new tn(`${t} must be a positive integer`);return e},pN=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mN=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ho="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gN(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const yN=()=>{var t,e,i,s,a;const l=gN();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ho,"X-Stainless-OS":Ay(Deno.build.os),"X-Stainless-Arch":wy(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ho,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ho,"X-Stainless-OS":Ay((i=globalThis.process.platform)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Arch":wy((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(a=globalThis.process.version)!==null&&a!==void 0?a:"unknown"};const c=vN();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ho,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ho,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function vN(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:i}of t){const s=i.exec(navigator.userAgent);if(s){const a=s[1]||0,l=s[2]||0,c=s[3]||0;return{browser:e,version:`${a}.${l}.${c}`}}}return null}const wy=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Ay=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Aa;const _N=()=>Aa??(Aa=yN());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SN(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Iv(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function EN(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Iv({start(){},async pull(i){const{done:s,value:a}=await e.next();s?i.close():i.enqueue(a)},async cancel(){var i;await((i=e.return)===null||i===void 0?void 0:i.call(e))}})}function Mv(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const i=await e.read();return i!=null&&i.done&&e.releaseLock(),i}catch(i){throw e.releaseLock(),i}},async return(){const i=e.cancel();return e.releaseLock(),await i,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function TN(t){var e,i;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((i=(e=t[Symbol.asyncIterator]()).return)===null||i===void 0?void 0:i.call(e));return}const s=t.getReader(),a=s.cancel();s.releaseLock(),await a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wN=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dv=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,i=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(i?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Rc(t,e,i){return Dv(),new File(t,e??"unknown_file",i)}function AN(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const bN=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Uv=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",CN=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Uv(t),RN=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function xN(t,e,i){if(Dv(),t=await t,CN(t))return t instanceof File?t:Rc([await t.arrayBuffer()],t.name);if(RN(t)){const a=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Rc(await jc(a),e,i)}const s=await jc(t);if(e||(e=AN(t)),!(i!=null&&i.type)){const a=s.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof a=="string"&&(i=Object.assign(Object.assign({},i),{type:a}))}return Rc(s,e,i)}async function jc(t){var e,i,s,a,l;let c=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)c.push(t);else if(Uv(t))c.push(t instanceof Blob?t:await t.arrayBuffer());else if(bN(t))try{for(var h=!0,g=dn(t),m;m=await g.next(),e=m.done,!e;h=!0){a=m.value,h=!1;const v=a;c.push(...await jc(v))}}catch(v){i={error:v}}finally{try{!h&&!e&&(s=g.return)&&await s.call(g)}finally{if(i)throw i.error}}else{const v=(l=t==null?void 0:t.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof t}${v?`; constructor: ${v}`:""}${NN(t)}`)}return c}function NN(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(i=>`"${i}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kv{constructor(e){this._client=e}}kv._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ov(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const by=Object.freeze(Object.create(null)),IN=(t=Ov)=>(function(i,...s){if(i.length===1)return i[0];let a=!1;const l=[],c=i.reduce((v,_,S)=>{var w,b,R;/[?#]/.test(_)&&(a=!0);const x=s[S];let U=(a?encodeURIComponent:t)(""+x);return S!==s.length&&(x==null||typeof x=="object"&&x.toString===((R=Object.getPrototypeOf((b=Object.getPrototypeOf((w=x.hasOwnProperty)!==null&&w!==void 0?w:by))!==null&&b!==void 0?b:by))===null||R===void 0?void 0:R.toString))&&(U=x+"",l.push({start:v.length+_.length,length:U.length,error:`Value of type ${Object.prototype.toString.call(x).slice(8,-1)} is not a valid path parameter`})),v+_+(S===s.length?"":U)},""),h=c.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=g.exec(h))!==null;)l.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(l.sort((v,_)=>v.start-_.start),l.length>0){let v=0;const _=l.reduce((S,w)=>{const b=" ".repeat(w.start-v),R="^".repeat(w.length);return v=w.start+w.length,S+b+R},"");throw new tn(`Path parameters result in path with invalid segments:
${l.map(S=>S.error).join(`
`)}
${c}
${_}`)}return c}),ba=IN(Ov);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lv extends kv{create(e,i){var s;const{api_version:a=this._client.apiVersion}=e,l=Pa(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new tn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new tn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(ba`/${a}/interactions`,Object.assign(Object.assign({body:l},i),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,i={},s){const{api_version:a=this._client.apiVersion}=i??{};return this._client.delete(ba`/${a}/interactions/${e}`,s)}cancel(e,i={},s){const{api_version:a=this._client.apiVersion}=i??{};return this._client.post(ba`/${a}/interactions/${e}/cancel`,s)}get(e,i={},s){var a;const l=i??{},{api_version:c=this._client.apiVersion}=l,h=Pa(l,["api_version"]);return this._client.get(ba`/${c}/interactions/${e}`,Object.assign(Object.assign({query:h},s),{stream:(a=i==null?void 0:i.stream)!==null&&a!==void 0?a:!1}))}}Lv._key=Object.freeze(["interactions"]);class Pv extends Lv{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MN(t){let e=0;for(const a of t)e+=a.length;const i=new Uint8Array(e);let s=0;for(const a of t)i.set(a,s),s+=a.length;return i}let Ca;function md(t){let e;return(Ca??(e=new globalThis.TextEncoder,Ca=e.encode.bind(e)))(t)}let Ra;function Cy(t){let e;return(Ra??(e=new globalThis.TextDecoder,Ra=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ka{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const i=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?md(e):e;this.buffer=MN([this.buffer,i]);const s=[];let a;for(;(a=DN(this.buffer,this.carriageReturnIndex))!=null;){if(a.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=a.index;continue}if(this.carriageReturnIndex!=null&&(a.index!==this.carriageReturnIndex+1||a.carriage)){s.push(Cy(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?a.preceding-1:a.preceding,c=Cy(this.buffer.subarray(0,l));s.push(c),this.buffer=this.buffer.subarray(a.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}Ka.NEWLINE_CHARS=new Set([`
`,"\r"]);Ka.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function DN(t,e){for(let a=e??0;a<t.length;a++){if(t[a]===10)return{preceding:a,index:a+1,carriage:!1};if(t[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function UN(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qa={off:0,error:200,warn:300,info:400,debug:500},Ry=(t,e,i)=>{if(t){if(fN(qa,t))return t;St(i).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(qa))}`)}};function Ys(){}function xa(t,e,i){return!e||qa[t]>qa[i]?Ys:e[t].bind(e)}const kN={error:Ys,warn:Ys,info:Ys,debug:Ys};let xy=new WeakMap;function St(t){var e;const i=t.logger,s=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!i)return kN;const a=xy.get(i);if(a&&a[0]===s)return a[1];const l={error:xa("error",i,s),warn:xa("warn",i,s),info:xa("info",i,s),debug:xa("debug",i,s)};return xy.set(i,[s,l]),l}const Pi=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,i])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":i]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zo{constructor(e,i,s){this.iterator=e,this.controller=i,this.client=s}static fromSSEResponse(e,i,s){let a=!1;const l=s?St(s):console;function c(){return cn(this,arguments,function*(){var g,m,v,_;if(a)throw new tn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let S=!1;try{try{for(var w=!0,b=dn(ON(e,i)),R;R=yield fe(b.next()),g=R.done,!g;w=!0){_=R.value,w=!1;const x=_;if(!S)if(x.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield fe(JSON.parse(x.data))}catch(U){throw l.error("Could not parse message into JSON:",x.data),l.error("From chunk:",x.raw),U}}}catch(x){m={error:x}}finally{try{!w&&!g&&(v=b.return)&&(yield fe(v.call(b)))}finally{if(m)throw m.error}}S=!0}catch(x){if(Xc(x))return yield fe(void 0);throw x}finally{S||i.abort()}})}return new zo(c,i,s)}static fromReadableStream(e,i,s){let a=!1;function l(){return cn(this,arguments,function*(){var g,m,v,_;const S=new Ka,w=Mv(e);try{for(var b=!0,R=dn(w),x;x=yield fe(R.next()),g=x.done,!g;b=!0){_=x.value,b=!1;const U=_;for(const H of S.decode(U))yield yield fe(H)}}catch(U){m={error:U}}finally{try{!b&&!g&&(v=R.return)&&(yield fe(v.call(R)))}finally{if(m)throw m.error}}for(const U of S.flush())yield yield fe(U)})}function c(){return cn(this,arguments,function*(){var g,m,v,_;if(a)throw new tn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let S=!1;try{try{for(var w=!0,b=dn(l()),R;R=yield fe(b.next()),g=R.done,!g;w=!0){_=R.value,w=!1;const x=_;S||x&&(yield yield fe(JSON.parse(x)))}}catch(x){m={error:x}}finally{try{!w&&!g&&(v=b.return)&&(yield fe(v.call(b)))}finally{if(m)throw m.error}}S=!0}catch(x){if(Xc(x))return yield fe(void 0);throw x}finally{S||i.abort()}})}return new zo(c,i,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],i=[],s=this.iterator(),a=l=>({next:()=>{if(l.length===0){const c=s.next();e.push(c),i.push(c)}return l.shift()}});return[new zo(()=>a(e),this.controller,this.client),new zo(()=>a(i),this.controller,this.client)]}toReadableStream(){const e=this;let i;return Iv({async start(){i=e[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:l}=await i.next();if(l)return s.close();const c=md(JSON.stringify(a)+`
`);s.enqueue(c)}catch(a){s.error(a)}},async cancel(){var s;await((s=i.return)===null||s===void 0?void 0:s.call(i))}})}}function ON(t,e){return cn(this,arguments,function*(){var s,a,l,c;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new tn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new tn("Attempted to iterate over a response with no body");const h=new PN,g=new Ka,m=Mv(t.body);try{for(var v=!0,_=dn(LN(m)),S;S=yield fe(_.next()),s=S.done,!s;v=!0){c=S.value,v=!1;const w=c;for(const b of g.decode(w)){const R=h.decode(b);R&&(yield yield fe(R))}}}catch(w){a={error:w}}finally{try{!v&&!s&&(l=_.return)&&(yield fe(l.call(_)))}finally{if(a)throw a.error}}for(const w of g.flush()){const b=h.decode(w);b&&(yield yield fe(b))}})}function LN(t){return cn(this,arguments,function*(){var i,s,a,l;let c=new Uint8Array;try{for(var h=!0,g=dn(t),m;m=yield fe(g.next()),i=m.done,!i;h=!0){l=m.value,h=!1;const v=l;if(v==null)continue;const _=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?md(v):v;let S=new Uint8Array(c.length+_.length);S.set(c),S.set(_,c.length),c=S;let w;for(;(w=UN(c))!==-1;)yield yield fe(c.slice(0,w)),c=c.slice(w)}}catch(v){s={error:v}}finally{try{!h&&!i&&(a=g.return)&&(yield fe(a.call(g)))}finally{if(s)throw s.error}}c.length>0&&(yield yield fe(c))})}class PN{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[i,s,a]=qN(e,":");return a.startsWith(" ")&&(a=a.substring(1)),i==="event"?this.event=a:i==="data"&&this.data.push(a),null}}function qN(t,e){const i=t.indexOf(e);return i!==-1?[t.substring(0,i),e,t.substring(i+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function GN(t,e){const{response:i,requestLogID:s,retryOfRequestLogID:a,startTime:l}=e,c=await(async()=>{var h;if(e.options.stream)return St(t).debug("response",i.status,i.url,i.headers,i.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(i,e.controller,t):zo.fromSSEResponse(i,e.controller,t);if(i.status===204)return null;if(e.options.__binaryResponse)return i;const g=i.headers.get("content-type"),m=(h=g==null?void 0:g.split(";")[0])===null||h===void 0?void 0:h.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?await i.json():await i.text()})();return St(t).debug(`[${s}] response parsed`,Pi({retryOfRequestLogID:a,url:i.url,status:i.status,body:c,durationMs:Date.now()-l})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gd extends Promise{constructor(e,i,s=GN){super(a=>{a(null)}),this.responsePromise=i,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new gd(this.client,this.responsePromise,async(i,s)=>e(await this.parseResponse(i,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,i]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:i}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,i){return this.parse().then(e,i)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qv=Symbol("brand.privateNullableHeaders");function*HN(t){if(!t)return;if(qv in t){const{values:s,nulls:a}=t;yield*s.entries();for(const l of a)yield[l,null];return}let e=!1,i;t instanceof Headers?i=t.entries():Ty(t)?i=t:(e=!0,i=Object.entries(t??{}));for(let s of i){const a=s[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const l=Ty(s[1])?s[1]:[s[1]];let c=!1;for(const h of l)h!==void 0&&(e&&!c&&(c=!0,yield[a,null]),yield[a,h])}}const $s=t=>{const e=new Headers,i=new Set;for(const s of t){const a=new Set;for(const[l,c]of HN(s)){const h=l.toLowerCase();a.has(h)||(e.delete(l),a.add(h)),c===null?(e.delete(l),i.add(h)):(e.append(l,c),i.delete(h))}}return{[qv]:!0,values:e,nulls:i}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xc=t=>{var e,i,s,a,l,c;if(typeof globalThis.process<"u")return(s=(i=(e=fw)===null||e===void 0?void 0:e[t])===null||i===void 0?void 0:i.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(c=(l=(a=globalThis.Deno.env)===null||a===void 0?void 0:a.get)===null||l===void 0?void 0:l.call(a,t))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Gv;class Xa{constructor(e){var i,s,a,l,c,h,g,{baseURL:m=xc("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(i=xc("GEMINI_API_KEY"))!==null&&i!==void 0?i:null,apiVersion:_="v1beta"}=e,S=Pa(e,["baseURL","apiKey","apiVersion"]);const w=Object.assign(Object.assign({apiKey:v,apiVersion:_},S),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=w.baseURL,this.timeout=(s=w.timeout)!==null&&s!==void 0?s:Xa.DEFAULT_TIMEOUT,this.logger=(a=w.logger)!==null&&a!==void 0?a:console;const b="warn";this.logLevel=b,this.logLevel=(c=(l=Ry(w.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:Ry(xc("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:b,this.fetchOptions=w.fetchOptions,this.maxRetries=(h=w.maxRetries)!==null&&h!==void 0?h:2,this.fetch=(g=w.fetch)!==null&&g!==void 0?g:SN(),this.encoder=wN,this._options=w,this.apiKey=v,this.apiVersion=_,this.clientAdapter=w.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:i}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!i.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const i=$s([e.headers]);if(!(i.values.has("authorization")||i.values.has("x-goog-api-key"))){if(this.apiKey)return $s([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return $s([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([i,s])=>typeof s<"u").map(([i,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(i)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(i)}=`;throw new tn(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ho}`}defaultIdempotencyKey(){return`stainless-node-retry-${rN()}`}makeStatusError(e,i,s,a){return Et.generate(e,i,s,a)}buildURL(e,i,s){const a=!this.baseURLOverridden()&&s||this.baseURL,l=lN(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return dN(c)||(i=Object.assign(Object.assign({},c),i)),typeof i=="object"&&i&&!Array.isArray(i)&&(l.search=this.stringifyQuery(i)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const i=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${i}`}}async prepareRequest(e,{url:i,options:s}){}get(e,i){return this.methodRequest("get",e,i)}post(e,i){return this.methodRequest("post",e,i)}patch(e,i){return this.methodRequest("patch",e,i)}put(e,i){return this.methodRequest("put",e,i)}delete(e,i){return this.methodRequest("delete",e,i)}methodRequest(e,i,s){return this.request(Promise.resolve(s).then(a=>Object.assign({method:e,path:i},a)))}request(e,i=null){return new gd(this,this.makeRequest(e,i,void 0))}async makeRequest(e,i,s){var a,l,c;const h=await e,g=(a=h.maxRetries)!==null&&a!==void 0?a:this.maxRetries;i==null&&(i=g),await this.prepareOptions(h);const{req:m,url:v,timeout:_}=await this.buildRequest(h,{retryCount:g-i});await this.prepareRequest(m,{url:v,options:h});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),w=s===void 0?"":`, retryOf: ${s}`,b=Date.now();if(St(this).debug(`[${S}] sending request`,Pi({retryOfRequestLogID:s,method:h.method,url:v,options:h,headers:m.headers})),!((l=h.signal)===null||l===void 0)&&l.aborted)throw new Wc;const R=new AbortController,x=await this.fetchWithTimeout(v,m,_,R).catch(Qc),U=Date.now();if(x instanceof globalThis.Error){const D=`retrying, ${i} attempts remaining`;if(!((c=h.signal)===null||c===void 0)&&c.aborted)throw new Wc;const Y=Xc(x)||/timed? ?out/i.test(String(x)+("cause"in x?String(x.cause):""));if(i)return St(this).info(`[${S}] connection ${Y?"timed out":"failed"} - ${D}`),St(this).debug(`[${S}] connection ${Y?"timed out":"failed"} (${D})`,Pi({retryOfRequestLogID:s,url:v,durationMs:U-b,message:x.message})),this.retryRequest(h,i,s??S);throw St(this).info(`[${S}] connection ${Y?"timed out":"failed"} - error; no more retries left`),St(this).debug(`[${S}] connection ${Y?"timed out":"failed"} (error; no more retries left)`,Pi({retryOfRequestLogID:s,url:v,durationMs:U-b,message:x.message})),Y?new Ev:new Ya({cause:x})}const H=`[${S}${w}] ${m.method} ${v} ${x.ok?"succeeded":"failed"} with status ${x.status} in ${U-b}ms`;if(!x.ok){const D=await this.shouldRetry(x);if(i&&D){const K=`retrying, ${i} attempts remaining`;return await TN(x.body),St(this).info(`${H} - ${K}`),St(this).debug(`[${S}] response error (${K})`,Pi({retryOfRequestLogID:s,url:x.url,status:x.status,headers:x.headers,durationMs:U-b})),this.retryRequest(h,i,s??S,x.headers)}const Y=D?"error; no more retries left":"error; not retryable";St(this).info(`${H} - ${Y}`);const X=await x.text().catch(K=>Qc(K).message),B=pN(X),z=B?void 0:X;throw St(this).debug(`[${S}] response error (${Y})`,Pi({retryOfRequestLogID:s,url:x.url,status:x.status,headers:x.headers,message:z,durationMs:Date.now()-b})),this.makeStatusError(x.status,B,z,x.headers)}return St(this).info(H),St(this).debug(`[${S}] response start`,Pi({retryOfRequestLogID:s,url:x.url,status:x.status,headers:x.headers,durationMs:U-b})),{response:x,options:h,controller:R,requestLogID:S,retryOfRequestLogID:s,startTime:b}}async fetchWithTimeout(e,i,s,a){const l=i||{},{signal:c,method:h}=l,g=Pa(l,["signal","method"]);c&&c.addEventListener("abort",()=>a.abort());const m=setTimeout(()=>a.abort(),s),v=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,_=Object.assign(Object.assign(Object.assign({signal:a.signal},v?{duplex:"half"}:{}),{method:"GET"}),g);h&&(_.method=h.toUpperCase());try{return await this.fetch.call(void 0,e,_)}finally{clearTimeout(m)}}async shouldRetry(e){const i=e.headers.get("x-should-retry");return i==="true"?!0:i==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,i,s,a){var l;let c;const h=a==null?void 0:a.get("retry-after-ms");if(h){const m=parseFloat(h);Number.isNaN(m)||(c=m)}const g=a==null?void 0:a.get("retry-after");if(g&&!c){const m=parseFloat(g);Number.isNaN(m)?c=Date.parse(g)-Date.now():c=m*1e3}if(!(c&&0<=c&&c<60*1e3)){const m=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(i,m)}return await mN(c),this.makeRequest(e,i-1,s)}calculateDefaultRetryTimeoutMillis(e,i){const l=i-e,c=Math.min(.5*Math.pow(2,l),8),h=1-Math.random()*.25;return c*h*1e3}async buildRequest(e,{retryCount:i=0}={}){var s,a,l;const c=Object.assign({},e),{method:h,path:g,query:m,defaultBaseURL:v}=c,_=this.buildURL(g,m,v);"timeout"in c&&hN("timeout",c.timeout),c.timeout=(s=c.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:S,body:w}=this.buildBody({options:c}),b=await this.buildHeaders({options:e,method:h,bodyHeaders:S,retryCount:i});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:h,headers:b},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&w instanceof globalThis.ReadableStream&&{duplex:"half"}),w&&{body:w}),(a=this.fetchOptions)!==null&&a!==void 0?a:{}),(l=c.fetchOptions)!==null&&l!==void 0?l:{}),url:_,timeout:c.timeout}}async buildHeaders({options:e,method:i,bodyHeaders:s,retryCount:a}){let l={};this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const c=await this.authHeaders(e);let h=$s([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),_N()),this._options.defaultHeaders,s,e.headers,c]);return this.validateHeaders(h),h.values}buildBody({options:{body:e,headers:i}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=$s([i]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:EN(e)}:this.encoder({body:e,headers:s})}}Xa.DEFAULT_TIMEOUT=6e4;class lt extends Xa{constructor(){super(...arguments),this.interactions=new Pv(this)}}Gv=lt;lt.GeminiNextGenAPIClient=Gv;lt.GeminiNextGenAPIClientError=tn;lt.APIError=Et;lt.APIConnectionError=Ya;lt.APIConnectionTimeoutError=Ev;lt.APIUserAbortError=Wc;lt.NotFoundError=bv;lt.ConflictError=Cv;lt.RateLimitError=xv;lt.BadRequestError=Tv;lt.AuthenticationError=wv;lt.InternalServerError=Nv;lt.PermissionDeniedError=Av;lt.UnprocessableEntityError=Rv;lt.toFile=xN;lt.Interactions=Pv;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VN(t,e){const i={},s=d(t,["name"]);return s!=null&&f(i,["_url","name"],s),i}function BN(t,e){const i={},s=d(t,["name"]);return s!=null&&f(i,["_url","name"],s),i}function zN(t,e){const i={},s=d(t,["sdkHttpResponse"]);return s!=null&&f(i,["sdkHttpResponse"],s),i}function FN(t,e){const i={},s=d(t,["sdkHttpResponse"]);return s!=null&&f(i,["sdkHttpResponse"],s),i}function $N(t,e,i){const s={};if(d(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=d(t,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&f(e,["displayName"],a),d(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=d(t,["epochCount"]);e!==void 0&&l!=null&&f(e,["tuningTask","hyperparameters","epochCount"],l);const c=d(t,["learningRateMultiplier"]);if(c!=null&&f(s,["tuningTask","hyperparameters","learningRateMultiplier"],c),d(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=d(t,["batchSize"]);e!==void 0&&h!=null&&f(e,["tuningTask","hyperparameters","batchSize"],h);const g=d(t,["learningRate"]);if(e!==void 0&&g!=null&&f(e,["tuningTask","hyperparameters","learningRate"],g),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function JN(t,e,i){const s={};let a=d(i,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const w=d(t,["validationDataset"]);e!==void 0&&w!=null&&f(e,["supervisedTuningSpec"],Ny(w))}else if(a==="PREFERENCE_TUNING"){const w=d(t,["validationDataset"]);e!==void 0&&w!=null&&f(e,["preferenceOptimizationSpec"],Ny(w))}const l=d(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&f(e,["tunedModelDisplayName"],l);const c=d(t,["description"]);e!==void 0&&c!=null&&f(e,["description"],c);let h=d(i,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const w=d(t,["epochCount"]);e!==void 0&&w!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(h==="PREFERENCE_TUNING"){const w=d(t,["epochCount"]);e!==void 0&&w!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let g=d(i,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const w=d(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(g==="PREFERENCE_TUNING"){const w=d(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let m=d(i,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const w=d(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(m==="PREFERENCE_TUNING"){const w=d(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let v=d(i,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const w=d(t,["adapterSize"]);e!==void 0&&w!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(v==="PREFERENCE_TUNING"){const w=d(t,["adapterSize"]);e!==void 0&&w!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(d(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=d(t,["labels"]);e!==void 0&&_!=null&&f(e,["labels"],_);const S=d(t,["beta"]);return e!==void 0&&S!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),s}function YN(t,e){const i={},s=d(t,["baseModel"]);s!=null&&f(i,["baseModel"],s);const a=d(t,["preTunedModel"]);a!=null&&f(i,["preTunedModel"],a);const l=d(t,["trainingDataset"]);l!=null&&oI(l);const c=d(t,["config"]);return c!=null&&$N(c,i),i}function KN(t,e){const i={},s=d(t,["baseModel"]);s!=null&&f(i,["baseModel"],s);const a=d(t,["preTunedModel"]);a!=null&&f(i,["preTunedModel"],a);const l=d(t,["trainingDataset"]);l!=null&&sI(l,i,e);const c=d(t,["config"]);return c!=null&&JN(c,i,e),i}function XN(t,e){const i={},s=d(t,["name"]);return s!=null&&f(i,["_url","name"],s),i}function QN(t,e){const i={},s=d(t,["name"]);return s!=null&&f(i,["_url","name"],s),i}function WN(t,e,i){const s={},a=d(t,["pageSize"]);e!==void 0&&a!=null&&f(e,["_query","pageSize"],a);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&f(e,["_query","pageToken"],l);const c=d(t,["filter"]);return e!==void 0&&c!=null&&f(e,["_query","filter"],c),s}function ZN(t,e,i){const s={},a=d(t,["pageSize"]);e!==void 0&&a!=null&&f(e,["_query","pageSize"],a);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&f(e,["_query","pageToken"],l);const c=d(t,["filter"]);return e!==void 0&&c!=null&&f(e,["_query","filter"],c),s}function jN(t,e){const i={},s=d(t,["config"]);return s!=null&&WN(s,i),i}function eI(t,e){const i={},s=d(t,["config"]);return s!=null&&ZN(s,i),i}function tI(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const a=d(t,["nextPageToken"]);a!=null&&f(i,["nextPageToken"],a);const l=d(t,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>Hv(h))),f(i,["tuningJobs"],c)}return i}function nI(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const a=d(t,["nextPageToken"]);a!=null&&f(i,["nextPageToken"],a);const l=d(t,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>ed(h))),f(i,["tuningJobs"],c)}return i}function iI(t,e){const i={},s=d(t,["name"]);s!=null&&f(i,["model"],s);const a=d(t,["name"]);return a!=null&&f(i,["endpoint"],a),i}function oI(t,e){const i={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=d(t,["examples"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),f(i,["examples","examples"],a)}return i}function sI(t,e,i){const s={};let a=d(i,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(a==="PREFERENCE_TUNING"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=d(i,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(d(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function Hv(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const a=d(t,["name"]);a!=null&&f(i,["name"],a);const l=d(t,["state"]);l!=null&&f(i,["state"],nv(l));const c=d(t,["createTime"]);c!=null&&f(i,["createTime"],c);const h=d(t,["tuningTask","startTime"]);h!=null&&f(i,["startTime"],h);const g=d(t,["tuningTask","completeTime"]);g!=null&&f(i,["endTime"],g);const m=d(t,["updateTime"]);m!=null&&f(i,["updateTime"],m);const v=d(t,["description"]);v!=null&&f(i,["description"],v);const _=d(t,["baseModel"]);_!=null&&f(i,["baseModel"],_);const S=d(t,["_self"]);return S!=null&&f(i,["tunedModel"],iI(S)),i}function ed(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const a=d(t,["name"]);a!=null&&f(i,["name"],a);const l=d(t,["state"]);l!=null&&f(i,["state"],nv(l));const c=d(t,["createTime"]);c!=null&&f(i,["createTime"],c);const h=d(t,["startTime"]);h!=null&&f(i,["startTime"],h);const g=d(t,["endTime"]);g!=null&&f(i,["endTime"],g);const m=d(t,["updateTime"]);m!=null&&f(i,["updateTime"],m);const v=d(t,["error"]);v!=null&&f(i,["error"],v);const _=d(t,["description"]);_!=null&&f(i,["description"],_);const S=d(t,["baseModel"]);S!=null&&f(i,["baseModel"],S);const w=d(t,["tunedModel"]);w!=null&&f(i,["tunedModel"],w);const b=d(t,["preTunedModel"]);b!=null&&f(i,["preTunedModel"],b);const R=d(t,["supervisedTuningSpec"]);R!=null&&f(i,["supervisedTuningSpec"],R);const x=d(t,["preferenceOptimizationSpec"]);x!=null&&f(i,["preferenceOptimizationSpec"],x);const U=d(t,["tuningDataStats"]);U!=null&&f(i,["tuningDataStats"],U);const H=d(t,["encryptionSpec"]);H!=null&&f(i,["encryptionSpec"],H);const D=d(t,["partnerModelTuningSpec"]);D!=null&&f(i,["partnerModelTuningSpec"],D);const Y=d(t,["customBaseModel"]);Y!=null&&f(i,["customBaseModel"],Y);const X=d(t,["experiment"]);X!=null&&f(i,["experiment"],X);const B=d(t,["labels"]);B!=null&&f(i,["labels"],B);const z=d(t,["outputUri"]);z!=null&&f(i,["outputUri"],z);const ne=d(t,["pipelineJob"]);ne!=null&&f(i,["pipelineJob"],ne);const K=d(t,["serviceAccount"]);K!=null&&f(i,["serviceAccount"],K);const le=d(t,["tunedModelDisplayName"]);le!=null&&f(i,["tunedModelDisplayName"],le);const ye=d(t,["veoTuningSpec"]);return ye!=null&&f(i,["veoTuningSpec"],ye),i}function rI(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const a=d(t,["name"]);a!=null&&f(i,["name"],a);const l=d(t,["metadata"]);l!=null&&f(i,["metadata"],l);const c=d(t,["done"]);c!=null&&f(i,["done"],c);const h=d(t,["error"]);return h!=null&&f(i,["error"],h),i}function Ny(t,e){const i={},s=d(t,["gcsUri"]);s!=null&&f(i,["validationDatasetUri"],s);const a=d(t,["vertexDatasetResource"]);return a!=null&&f(i,["validationDatasetUri"],a),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aI extends Gn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Bi(Pn.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(i),i),this.get=async i=>await this.getInternal(i),this.tune=async i=>{var s;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const a={tunedModelName:i.baseModel};!((s=i.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(a.checkpointId=i.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},i),{preTunedModel:a});return l.baseModel=void 0,await this.tuneInternal(l)}else{const a=Object.assign({},i);return await this.tuneInternal(a)}else{const a=Object.assign({},i),l=await this.tuneMldevInternal(a);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Bc.JOB_STATE_QUEUED}}}}async getInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=QN(e);return h=j("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>ed(v))}else{const m=XN(e);return h=j("{name}",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>Hv(v))}}async listInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=eI(e);return h=j("tuningJobs",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=nI(v),S=new ty;return Object.assign(S,_),S})}else{const m=jN(e);return h=j("tunedModels",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=tI(v),S=new ty;return Object.assign(S,_),S})}}async cancel(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const m=BN(e);return h=j("{name}:cancel",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=FN(v),S=new ny;return Object.assign(S,_),S})}else{const m=VN(e);return h=j("{name}:cancel",m._url),g=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(_=>{const S=_;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const _=zN(v),S=new ny;return Object.assign(S,_),S})}}async tuneInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=KN(e,e);return l=j("tuningJobs",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>ed(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=YN(e);return l=j("tunedModels",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>rI(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lI{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const uI=1024*1024*8,cI=3,dI=1e3,fI=2,Ga="x-goog-upload-status";async function hI(t,e,i){var s;const a=await Vv(t,e,i),l=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Ga])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function pI(t,e,i){var s;const a=await Vv(t,e,i),l=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[Ga])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=Qy(l),h=new ud;return Object.assign(h,c),h}async function Vv(t,e,i){var s,a;let l=0,c=0,h=new zc(new Response),g="upload";for(l=t.size;c<l;){const m=Math.min(uI,l-c),v=t.slice(c,c+m);c+m>=l&&(g+=", finalize");let _=0,S=dI;for(;_<cI&&(h=await i.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(c),"Content-Length":String(m)}}}),!(!((s=h==null?void 0:h.headers)===null||s===void 0)&&s[Ga]));)_++,await gI(S),S=S*fI;if(c+=m,((a=h==null?void 0:h.headers)===null||a===void 0?void 0:a[Ga])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function mI(t){return{size:t.size,type:t.type}}function gI(t){return new Promise(e=>setTimeout(e,t))}class yI{async upload(e,i,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await hI(e,i,s)}async uploadToFileSearchStore(e,i,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await pI(e,i,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await mI(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vI{create(e,i,s){return new _I(e,i,s)}}class _I{constructor(e,i,s){this.url=e,this.headers=i,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Iy="x-goog-api-key";class SI{constructor(e){this.apiKey=e}async addAuthHeaders(e,i){if(e.get(Iy)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Iy,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const EI="gl-node/";class TI{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const i=new lt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=i.interactions,this._interactions}constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const s=gw(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const a=new SI(this.apiKey);this.apiClient=new mx({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:EI+"web",uploader:new yI,downloader:new lI}),this.models=new kx(this.apiClient),this.live=new xx(this.apiClient,a,new vI),this.batches=new $A(this.apiClient),this.chats=new Cb(this.models,this.apiClient),this.caches=new wb(this.apiClient),this.files=new Lb(this.apiClient),this.operations=new Ox(this.apiClient),this.authTokens=new Wx(this.apiClient),this.tunings=new aI(this.apiClient),this.fileSearchStores=new sN(this.apiClient)}}const wI=new TI({apiKey:"PLACEHOLDER_API_KEY"});async function AI(t,e){try{const s=(await wI.models.generateContent({model:"gemini-3-pro-preview",contents:`Provide detailed veterinary medical information for the disease "${t}" in "${e}". Focus on evidence-based DVM protocols.`,config:{systemInstruction:"You are a world-class veterinary medicine expert. Provide accurate, technical, and structured information for DVMs. Return valid JSON only.",responseMimeType:"application/json",thinkingConfig:{thinkingBudget:32768},responseSchema:{type:nt.OBJECT,properties:{causalAgent:{type:nt.STRING},cause:{type:nt.STRING},clinicalSigns:{type:nt.STRING},diagnosis:{type:nt.STRING},treatment:{type:nt.OBJECT,properties:{medicine:{type:nt.STRING},drug:{type:nt.STRING},vaccine:{type:nt.STRING}},required:["medicine","drug","vaccine"]},prevention:{type:nt.STRING},precaution:{type:nt.STRING},epidemiology:{type:nt.STRING}},required:["causalAgent","cause","clinicalSigns","diagnosis","treatment","prevention","precaution","epidemiology"]}}})).text;return s?JSON.parse(s):null}catch(i){return console.error("Gemini Error:",i),null}}var bI={};const My={animalName:"",cause:"",clinicalSigns:"",diagnosis:"",treatments:[],prevention:"",precaution:"",epidemiology:""},CI=({diseases:t,customAnimalTypes:e,onAddCustomAnimal:i,onUpsertDisease:s,onDeleteDisease:a,isAuthorized:l,onAuthorize:c})=>{const[h,g]=Ae.useState("list"),[m,v]=Ae.useState(null),[_,S]=Ae.useState(""),[w,b]=Ae.useState(!1),[R,x]=Ae.useState(""),[U,H]=Ae.useState(""),[D,Y]=Ae.useState([]),[X,B]=Ae.useState({}),[z,ne]=Ae.useState(null),[K,le]=Ae.useState(""),[ye,ke]=Ae.useState(!1),Ce=P=>{P.preventDefault();const Z=bI.ADMIN_SECRET_CODE||"DVM2025";_===Z?(c(),b(!1)):b(!0)},$e=P=>{v(P.id),x(P.name),H(P.causalAgent),Y(P.hosts.map(oe=>oe.animalName));const Z={};P.hosts.forEach(oe=>{Z[oe.animalName]={...oe}}),B(Z),g("form")},st=()=>{v(null),x(""),H(""),Y([]),B({}),le(""),ke(!1),g("list"),window.scrollTo({top:0,behavior:"smooth"})},G=P=>{if(P===Vi.OTHER){ke(!0);return}Y(Z=>{if(Z.includes(P)){const Te=Z.filter(Tt=>Tt!==P),ge={...X};return delete ge[P],B(ge),Te}else{const Te=[...Z,P];return B(ge=>({...ge,[P]:{...My,animalName:P}})),Te}})},Q=()=>{const P=K.trim();P&&(i(P),D.includes(P)||(Y(Z=>[...Z,P]),B(Z=>({...Z,[P]:{...My,animalName:P}}))),le(""),ke(!1))},re=(P,Z,oe)=>{B(Te=>({...Te,[P]:{...Te[P],[Z]:oe}}))},Me=P=>{const Z={id:Date.now().toString()+Math.random(),type:un.MEDICINE,name:"",dose:"",frequency:"",duration:"",notes:""};B(oe=>({...oe,[P]:{...oe[P],treatments:[...oe[P].treatments,Z]}}))},be=(P,Z,oe,Te)=>{B(ge=>({...ge,[P]:{...ge[P],treatments:ge[P].treatments.map(Tt=>Tt.id===Z?{...Tt,[oe]:Te}:Tt)}}))},I=(P,Z)=>{B(oe=>({...oe,[P]:{...oe[P],treatments:oe[P].treatments.filter(Te=>Te.id!==Z)}}))},J=async P=>{if(!R){alert("Please enter a disease name first.");return}ne(P);const Z=await AI(R,P);if(ne(null),Z){let oe=[];Z.treatment&&(oe=[{id:"t-med-"+Math.random(),type:un.MEDICINE,name:Z.treatment.medicine,dose:"",frequency:"",duration:"",notes:""},{id:"t-drug-"+Math.random(),type:un.DRUG,name:Z.treatment.drug,dose:"",frequency:"",duration:"",notes:""},{id:"t-vac-"+Math.random(),type:un.VACCINE,name:Z.treatment.vaccine,dose:"",frequency:"",duration:"",notes:""}]),B(Te=>({...Te,[P]:{...Te[P],...Z,treatments:oe,animalName:P}}))}},W=P=>{var oe,Te;if(P.preventDefault(),D.length===0){alert("Please select at least one host animal.");return}const Z={id:m||Date.now().toString(),name:R,causalAgent:U,createdAt:m&&((oe=t.find(ge=>ge.id===m))==null?void 0:oe.createdAt)||Date.now(),searchCount:m&&((Te=t.find(ge=>ge.id===m))==null?void 0:Te.searchCount)||0,hosts:D.map(ge=>X[ge])};s(Z),st()};if(!l)return A.jsx("div",{className:"min-h-[60vh] flex items-center justify-center animate-in fade-in duration-500",children:A.jsxs("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl border border-slate-100 dark:border-slate-700 text-center",children:[A.jsx("div",{className:"w-12 h-12 bg-teal-600 rounded-2xl flex items-center justify-center text-white mx-auto mb-6",children:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),A.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-white mb-2",children:"Admin Security Check"}),A.jsx("p",{className:"text-slate-500 text-xs mb-6",children:"Enter the secret code to access management tools"}),A.jsxs("form",{onSubmit:Ce,className:"space-y-4",children:[A.jsx("input",{type:"password",placeholder:"Secret Code",value:_,onChange:P=>S(P.target.value),className:`w-full px-4 py-3 bg-slate-50 dark:bg-slate-900 border-0 ring-1 rounded-xl text-center font-bold tracking-widest focus:ring-2 focus:ring-teal-500 transition-all dark:text-white ${w?"ring-red-500":"ring-slate-100 dark:ring-slate-700"}`}),w&&A.jsx("p",{className:"text-red-500 text-[10px] font-bold uppercase",children:"Invalid secret code"}),A.jsx("button",{type:"submit",className:"w-full py-3 bg-teal-600 hover:bg-teal-700 text-white font-bold rounded-xl transition-all",children:"Unlock Dashboard"})]})]})});const te=Array.from(new Set([...CS.filter(P=>P!==Vi.OTHER),...e]));return h==="list"?A.jsxs("div",{className:"space-y-6 md:space-y-8 animate-in fade-in duration-300",children:[A.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[A.jsxs("div",{children:[A.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-700 dark:text-white",children:"Registry Management"}),A.jsx("p",{className:"text-sm text-slate-500",children:"Edit or publish veterinary medical protocols"})]}),A.jsxs("button",{onClick:()=>{st(),g("form")},className:"px-6 py-3 bg-teal-600 hover:bg-teal-700 text-white font-semibold rounded-xl shadow-md flex items-center gap-2 group text-sm",children:[A.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"ADD DISEASE"]})]}),A.jsx("div",{className:"grid grid-cols-1 gap-3",children:t.map(P=>A.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 flex items-center justify-between hover:border-teal-300 transition-all shadow-sm",children:[A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-white truncate",children:P.name}),A.jsx("p",{className:"text-xs text-teal-600 dark:text-teal-400 font-semibold mb-2",children:P.causalAgent}),A.jsx("div",{className:"flex flex-wrap gap-1.5",children:P.hosts.map((Z,oe)=>A.jsx("span",{className:"text-[10px] font-bold bg-slate-50 dark:bg-slate-900 px-2 py-0.5 rounded-lg text-slate-500 border border-slate-100 dark:border-slate-700 uppercase",children:Z.animalName},oe))})]}),A.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[A.jsx("button",{onClick:()=>$e(P),className:"p-2.5 bg-slate-50 dark:bg-slate-900 text-slate-500 hover:text-teal-600 rounded-lg transition-all","aria-label":"Edit",children:A.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),A.jsx("button",{onClick:()=>{confirm(`Delete ${P.name}?`)&&a(P.id)},className:"p-2.5 bg-slate-50 dark:bg-slate-900 text-slate-500 hover:text-red-600 rounded-lg transition-all","aria-label":"Delete",children:A.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]},P.id))})]}):A.jsxs("div",{className:"max-w-4xl mx-auto animate-in slide-in-from-right-4 duration-400 pb-20",children:[A.jsxs("header",{className:"mb-8 flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-700 dark:text-white",children:m?"Edit Protocol":"New Protocol"}),A.jsx("p",{className:"text-xs text-slate-400 font-medium uppercase tracking-widest mt-1",children:"Medical Entry Form"})]}),A.jsx("button",{onClick:st,className:"text-xs font-bold text-slate-400 hover:text-red-500 transition-colors uppercase",children:"Cancel"})]}),A.jsxs("form",{onSubmit:W,className:"space-y-6 md:space-y-10",children:[A.jsxs("section",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm space-y-6",children:[A.jsxs("div",{className:"flex items-center gap-3 border-b border-slate-50 dark:border-slate-700 pb-4",children:[A.jsx("span",{className:"w-8 h-8 bg-teal-600 text-white rounded-lg flex items-center justify-center text-sm font-bold",children:"1"}),A.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-white",children:"Identification"})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wide",children:"Pathology Name"}),A.jsx("input",{type:"text",required:!0,value:R,onChange:P=>x(P.target.value),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-900 border-0 ring-1 ring-slate-100 dark:ring-slate-700 rounded-xl focus:ring-2 focus:ring-teal-500 transition-all dark:text-white"})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wide",children:"Causal Agent"}),A.jsx("input",{type:"text",required:!0,value:U,onChange:P=>H(P.target.value),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-900 border-0 ring-1 ring-slate-100 dark:ring-slate-700 rounded-xl focus:ring-2 focus:ring-teal-500 transition-all dark:text-white"})]})]})]}),A.jsxs("section",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm space-y-6",children:[A.jsxs("div",{className:"flex items-center gap-3 border-b border-slate-50 dark:border-slate-700 pb-4",children:[A.jsx("span",{className:"w-8 h-8 bg-teal-600 text-white rounded-lg flex items-center justify-center text-sm font-bold",children:"2"}),A.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-white",children:"Host Vectors"})]}),A.jsxs("div",{className:"flex flex-wrap gap-2",children:[te.map(P=>{const Z=D.includes(P);return A.jsx("button",{type:"button",onClick:()=>G(P),className:`px-4 py-2 rounded-xl text-xs font-bold transition-all border ${Z?"bg-teal-600 border-teal-600 text-white shadow-sm":"bg-white dark:bg-slate-900 border-slate-100 dark:border-slate-700 text-slate-500"}`,children:P},P)}),A.jsx("button",{type:"button",onClick:()=>G(Vi.OTHER),className:"px-4 py-2 rounded-xl text-xs font-bold bg-slate-50 dark:bg-slate-800 border border-slate-100 dark:border-slate-700 text-teal-600 flex items-center gap-1",children:"+ CUSTOM"})]}),ye&&A.jsxs("div",{className:"flex items-center gap-2 animate-in slide-in-from-top-2 duration-200",children:[A.jsx("input",{type:"text",value:K,onChange:P=>le(P.target.value),placeholder:"Custom host name...",className:"flex-1 px-4 py-2 bg-slate-50 dark:bg-slate-900 border-0 ring-1 ring-teal-500/30 rounded-lg text-sm dark:text-white font-semibold",onKeyDown:P=>P.key==="Enter"&&(P.preventDefault(),Q())}),A.jsx("button",{type:"button",onClick:Q,className:"px-4 py-2 bg-teal-600 text-white text-xs font-bold rounded-lg uppercase",children:"Add"}),A.jsx("button",{type:"button",onClick:()=>ke(!1),className:"text-xs font-bold text-slate-400",children:"Cancel"})]})]}),D.map(P=>{var Z,oe,Te,ge,Tt,mi,zi;return A.jsxs("section",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-2xl border-2 border-slate-50 dark:border-slate-700 shadow-md space-y-8 animate-in zoom-in-95 duration-300",children:[A.jsxs("div",{className:"flex items-center justify-between border-b border-slate-50 dark:border-slate-700 pb-4",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("span",{className:"px-3 py-1 bg-teal-600 text-white text-[10px] font-bold rounded uppercase tracking-tighter",children:P}),A.jsx("h3",{className:"text-base font-bold text-slate-700 dark:text-white uppercase tracking-tight",children:"Clinical Protocol"})]}),A.jsx("button",{type:"button",disabled:z===P,onClick:()=>J(P),className:"flex items-center gap-2 px-4 py-2 bg-slate-50 dark:bg-slate-900 text-slate-600 dark:text-teal-400 text-[10px] font-bold rounded-lg hover:bg-teal-600 hover:text-white transition-all shadow-sm",children:z===P?"GENERATE...":"AI SUGGEST"})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[A.jsx(Lo,{label:"Cause",value:(Z=X[P])==null?void 0:Z.cause,onChange:qe=>re(P,"cause",qe)}),A.jsx(Lo,{label:"Symptoms",value:(oe=X[P])==null?void 0:oe.clinicalSigns,onChange:qe=>re(P,"clinicalSigns",qe)}),A.jsx(Lo,{label:"Diagnosis",value:(Te=X[P])==null?void 0:Te.diagnosis,onChange:qe=>re(P,"diagnosis",qe)})]}),A.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-50 dark:border-slate-700",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx("h4",{className:"text-xs font-bold uppercase tracking-wider text-teal-600 flex items-center gap-2",children:"Therapy"}),A.jsx("button",{type:"button",onClick:()=>Me(P),className:"px-3 py-1.5 bg-slate-50 dark:bg-slate-900 text-teal-600 text-[10px] font-bold rounded-lg border border-slate-100 dark:border-slate-700",children:"+ ITEM"})]}),A.jsx("div",{className:"space-y-4",children:(ge=X[P])==null?void 0:ge.treatments.map((qe,yn)=>A.jsxs("div",{className:"p-5 bg-slate-50 dark:bg-slate-900/40 rounded-xl border border-slate-100 dark:border-slate-700 space-y-4",children:[A.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 dark:border-slate-800 pb-3",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsxs("span",{className:"text-[10px] font-bold text-slate-400",children:["#",yn+1]}),A.jsx("div",{className:"flex bg-white dark:bg-slate-800 rounded-lg p-1 border border-slate-200 dark:border-slate-700",children:Object.values(un).map(gt=>A.jsx("button",{type:"button",onClick:()=>be(P,qe.id,"type",gt),className:`px-3 py-1 rounded text-[9px] font-bold transition-all ${qe.type===gt?"bg-teal-600 text-white":"text-slate-400 hover:text-slate-600"}`,children:gt},gt))})]}),A.jsx("button",{type:"button",onClick:()=>I(P,qe.id),className:"text-red-500 text-[10px] font-bold uppercase",children:"Remove"})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"text-[10px] font-bold text-slate-400 ml-1",children:"Name"}),A.jsx("input",{type:"text",className:"w-full px-3 py-2 bg-white dark:bg-slate-800 border-0 ring-1 ring-slate-100 dark:ring-slate-700 rounded-lg text-xs dark:text-white",value:qe.name,onChange:gt=>be(P,qe.id,"name",gt.target.value)})]}),A.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[A.jsx(Nc,{label:"Dose",value:qe.dose,onChange:gt=>be(P,qe.id,"dose",gt)}),A.jsx(Nc,{label:"Freq",value:qe.frequency,onChange:gt=>be(P,qe.id,"frequency",gt)}),A.jsx(Nc,{label:"Dur",value:qe.duration,onChange:gt=>be(P,qe.id,"duration",gt)})]})]})]},qe.id))})]}),A.jsxs("div",{className:"pt-6 border-t border-slate-50 dark:border-slate-700 grid grid-cols-1 gap-6",children:[A.jsx(Lo,{label:"Prevention",value:(Tt=X[P])==null?void 0:Tt.prevention,onChange:qe=>re(P,"prevention",qe)}),A.jsx(Lo,{label:"Precautions",value:(mi=X[P])==null?void 0:mi.precaution,onChange:qe=>re(P,"precaution",qe)}),A.jsx(Lo,{label:"Epidemiology",value:(zi=X[P])==null?void 0:zi.epidemiology,onChange:qe=>re(P,"epidemiology",qe)})]})]},P)}),D.length>0&&A.jsx("div",{className:"fixed bottom-6 left-0 right-0 z-50 flex justify-center pointer-events-none px-4",children:A.jsxs("button",{type:"submit",className:"px-10 py-4 bg-teal-600 hover:bg-teal-700 text-white font-bold rounded-2xl shadow-xl transition-all flex items-center gap-3 pointer-events-auto active:scale-95",children:["PUBLISH RECORD",A.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})]})})]})]})},Lo=({label:t,value:e,onChange:i})=>A.jsxs("div",{className:"space-y-2",children:[A.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase ml-1",children:t}),A.jsx("textarea",{required:!0,rows:3,className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-900 border-0 ring-1 ring-slate-100 dark:ring-slate-700 rounded-xl focus:ring-2 focus:ring-teal-500 transition-all text-xs dark:text-white font-medium resize-none",value:e||"",onChange:s=>i(s.target.value)})]}),Nc=({label:t,value:e,onChange:i})=>A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"text-[9px] font-bold text-slate-400 ml-1",children:t}),A.jsx("input",{type:"text",className:"w-full px-2 py-2 bg-white dark:bg-slate-800 border-0 ring-1 ring-slate-100 dark:ring-slate-700 rounded-lg text-[10px] dark:text-white",value:e,onChange:s=>i(s.target.value)})]}),RI=()=>{const[t,e]=Ae.useState([]),[i,s]=Ae.useState(null),[a,l]=Ae.useState("login"),[c,h]=Ae.useState(!1),[g,m]=Ae.useState("normal"),[v,_]=Ae.useState([]),[S,w]=Ae.useState(!1),b=B=>(""+B).match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i)!==null,R=async()=>{const{data:B,error:z}=await jt.from("diseases").select("*").order("created_at",{ascending:!1});if(!z&&B){const le=B.map(ye=>({id:ye.id,name:ye.name,causalAgent:ye.causal_agent,createdAt:new Date(ye.created_at).getTime(),searchCount:ye.search_count||0,hosts:ye.hosts||[]}));e(le)}else z&&z.code==="42P01"&&e(AS);const{data:ne,error:K}=await jt.from("custom_animal_types").select("name");!K&&ne&&_(ne.map(le=>le.name))};Ae.useEffect(()=>{jt.auth.getSession().then(({data:{session:K}})=>{K!=null&&K.user&&(s({id:K.user.id,username:K.user.email||"Admin"}),R(),a==="login"&&l("home"))});const{data:{subscription:B}}=jt.auth.onAuthStateChange((K,le)=>{le!=null&&le.user?(s({id:le.user.id,username:le.user.email||"Admin"}),R(),K==="PASSWORD_RECOVERY"?l("update-password"):a==="login"&&l("home")):(s(null),l("login"),w(!1))});localStorage.getItem("vetpath_theme")==="dark"&&(h(!0),document.documentElement.classList.add("dark"));const ne=localStorage.getItem("vetpath_fontscale");return ne&&m(ne),()=>B.unsubscribe()},[]),Ae.useEffect(()=>{const B=document.documentElement;g==="normal"?B.style.fontSize="16px":g==="large"?B.style.fontSize="18px":g==="extra-large"&&(B.style.fontSize="20px"),localStorage.setItem("vetpath_fontscale",g)},[g]);const x=()=>{h(B=>{const z=!B;return z?(document.documentElement.classList.add("dark"),localStorage.setItem("vetpath_theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("vetpath_theme","light")),z})},U=async()=>{await jt.auth.signOut(),s(null),l("login"),w(!1)},H=async B=>{const z={name:B.name,causal_agent:B.causalAgent,hosts:B.hosts,search_count:B.searchCount};b(B.id)&&(z.id=B.id);const{error:ne}=await jt.from("diseases").upsert(z);ne?(console.error("Error upserting disease:",ne),alert("Failed to save disease record. Check console for details.")):R()},D=async B=>{const{error:z}=await jt.from("diseases").delete().eq("id",B);z&&console.error("Error deleting:",z),R()},Y=Ae.useCallback(async B=>{const z=t.find(ne=>ne.id===B);if(z&&b(B)){const ne=(z.searchCount||0)+1;e(K=>K.map(le=>le.id===B?{...le,searchCount:ne}:le)),await jt.from("diseases").update({search_count:ne}).eq("id",B)}},[t]),X=async B=>{const{error:z}=await jt.from("custom_animal_types").insert({name:B});z&&console.error("Error adding custom animal:",z),R()};return!i&&a!=="update-password"?A.jsx("div",{className:`min-h-screen ${c?"dark":""}`,children:A.jsx("main",{className:"max-w-7xl mx-auto px-4 py-10",children:A.jsx(Wm,{initialMode:"login",onSuccess:()=>l("home")})})}):A.jsxs("div",{className:`min-h-screen ${c?"dark":""}`,children:[A.jsx(aw,{isDarkMode:c,toggleTheme:x,currentPage:a==="update-password"?"login":a,setCurrentPage:B=>l(B),user:i,onLogout:U,fontScale:g,setFontScale:m}),A.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-6 md:py-10",children:[a==="home"&&A.jsx(dw,{diseases:t,onViewDetails:Y}),a==="update-password"&&A.jsx(Wm,{initialMode:"update",onSuccess:()=>l("home")}),a==="admin"&&i&&A.jsx(CI,{diseases:t,customAnimalTypes:v,onAddCustomAnimal:X,onUpsertDisease:H,onDeleteDisease:D,isAuthorized:S,onAuthorize:()=>w(!0)})]}),A.jsx("footer",{className:"py-10 border-t border-slate-100 dark:border-slate-800 text-center text-[10px] text-slate-400 dark:text-slate-500 uppercase tracking-widest font-bold",children:A.jsxs("p",{children:[" ",new Date().getFullYear()," VetPath Intelligence  DVM Professional Portal"]})})]})},Bv=document.getElementById("root");if(!Bv)throw new Error("Could not find root element to mount to");const xI=wS.createRoot(Bv);xI.render(A.jsx(mS.StrictMode,{children:A.jsx(RI,{})}));
